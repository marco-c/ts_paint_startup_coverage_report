<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">

<html lang="en">

<head>
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
  <title>LCOV - output.info - media/libvpx/libvpx/vp9/common/vp9_entropymode.c</title>
  <link rel="stylesheet" type="text/css" href="../../../../../gcov.css">
</head>

<body>

  <table width="100%" border=0 cellspacing=0 cellpadding=0>
    <tr><td class="title">LCOV - code coverage report</td></tr>
    <tr><td class="ruler"><img src="../../../../../glass.png" width=3 height=3 alt=""></td></tr>

    <tr>
      <td width="100%">
        <table cellpadding=1 border=0 width="100%">
          <tr>
            <td width="10%" class="headerItem">Current view:</td>
            <td width="35%" class="headerValue"><a href="../../../../../index.html">top level</a> - <a href="index.html">media/libvpx/libvpx/vp9/common</a> - vp9_entropymode.c<span style="font-size: 80%;"> (source / <a href="vp9_entropymode.c.func-sort-c.html">functions</a>)</span></td>
            <td width="5%"></td>
            <td width="15%"></td>
            <td width="10%" class="headerCovTableHead">Hit</td>
            <td width="10%" class="headerCovTableHead">Total</td>
            <td width="15%" class="headerCovTableHead">Coverage</td>
          </tr>
          <tr>
            <td class="headerItem">Test:</td>
            <td class="headerValue">output.info</td>
            <td></td>
            <td class="headerItem">Lines:</td>
            <td class="headerCovTableEntry">0</td>
            <td class="headerCovTableEntry">121</td>
            <td class="headerCovTableEntryLo">0.0 %</td>
          </tr>
          <tr>
            <td class="headerItem">Date:</td>
            <td class="headerValue">2017-07-14 16:53:18</td>
            <td></td>
            <td class="headerItem">Functions:</td>
            <td class="headerCovTableEntry">0</td>
            <td class="headerCovTableEntry">7</td>
            <td class="headerCovTableEntryLo">0.0 %</td>
          </tr>
          <tr>
            <td class="headerItem">Legend:</td>
            <td class="headerValueLeg">            Lines:
            <span class="coverLegendCov">hit</span>
            <span class="coverLegendNoCov">not hit</span>
</td>
            <td></td>
          </tr>
          <tr><td><img src="../../../../../glass.png" width=3 height=3 alt=""></td></tr>
        </table>
      </td>
    </tr>

    <tr><td class="ruler"><img src="../../../../../glass.png" width=3 height=3 alt=""></td></tr>
  </table>

  <table cellpadding=0 cellspacing=0 border=0>
    <tr>
      <td><br></td>
    </tr>
    <tr>
      <td>
<pre class="sourceHeading">          Line data    Source code</pre>
<pre class="source">
<a name="1"><span class="lineNum">       1 </span>            : /*</a>
<span class="lineNum">       2 </span>            :  *  Copyright (c) 2010 The WebM project authors. All Rights Reserved.
<span class="lineNum">       3 </span>            :  *
<span class="lineNum">       4 </span>            :  *  Use of this source code is governed by a BSD-style license
<span class="lineNum">       5 </span>            :  *  that can be found in the LICENSE file in the root of the source
<span class="lineNum">       6 </span>            :  *  tree. An additional intellectual property rights grant can be found
<span class="lineNum">       7 </span>            :  *  in the file PATENTS.  All contributing project authors may
<span class="lineNum">       8 </span>            :  *  be found in the AUTHORS file in the root of the source tree.
<span class="lineNum">       9 </span>            :  */
<span class="lineNum">      10 </span>            : 
<span class="lineNum">      11 </span>            : #include &quot;vpx_mem/vpx_mem.h&quot;
<span class="lineNum">      12 </span>            : 
<span class="lineNum">      13 </span>            : #include &quot;vp9/common/vp9_onyxc_int.h&quot;
<span class="lineNum">      14 </span>            : #include &quot;vp9/common/vp9_seg_common.h&quot;
<span class="lineNum">      15 </span>            : 
<span class="lineNum">      16 </span>            : const vpx_prob vp9_kf_y_mode_prob[INTRA_MODES][INTRA_MODES][INTRA_MODES - 1] = {
<span class="lineNum">      17 </span>            :   {
<span class="lineNum">      18 </span>            :       // above = dc
<span class="lineNum">      19 </span>            :       { 137, 30, 42, 148, 151, 207, 70, 52, 91 },   // left = dc
<span class="lineNum">      20 </span>            :       { 92, 45, 102, 136, 116, 180, 74, 90, 100 },  // left = v
<span class="lineNum">      21 </span>            :       { 73, 32, 19, 187, 222, 215, 46, 34, 100 },   // left = h
<span class="lineNum">      22 </span>            :       { 91, 30, 32, 116, 121, 186, 93, 86, 94 },    // left = d45
<span class="lineNum">      23 </span>            :       { 72, 35, 36, 149, 68, 206, 68, 63, 105 },    // left = d135
<span class="lineNum">      24 </span>            :       { 73, 31, 28, 138, 57, 124, 55, 122, 151 },   // left = d117
<span class="lineNum">      25 </span>            :       { 67, 23, 21, 140, 126, 197, 40, 37, 171 },   // left = d153
<span class="lineNum">      26 </span>            :       { 86, 27, 28, 128, 154, 212, 45, 43, 53 },    // left = d207
<span class="lineNum">      27 </span>            :       { 74, 32, 27, 107, 86, 160, 63, 134, 102 },   // left = d63
<span class="lineNum">      28 </span>            :       { 59, 67, 44, 140, 161, 202, 78, 67, 119 }    // left = tm
<span class="lineNum">      29 </span>            :   },
<span class="lineNum">      30 </span>            :   {
<span class="lineNum">      31 </span>            :       // above = v
<span class="lineNum">      32 </span>            :       { 63, 36, 126, 146, 123, 158, 60, 90, 96 },   // left = dc
<span class="lineNum">      33 </span>            :       { 43, 46, 168, 134, 107, 128, 69, 142, 92 },  // left = v
<span class="lineNum">      34 </span>            :       { 44, 29, 68, 159, 201, 177, 50, 57, 77 },    // left = h
<span class="lineNum">      35 </span>            :       { 58, 38, 76, 114, 97, 172, 78, 133, 92 },    // left = d45
<span class="lineNum">      36 </span>            :       { 46, 41, 76, 140, 63, 184, 69, 112, 57 },    // left = d135
<span class="lineNum">      37 </span>            :       { 38, 32, 85, 140, 46, 112, 54, 151, 133 },   // left = d117
<span class="lineNum">      38 </span>            :       { 39, 27, 61, 131, 110, 175, 44, 75, 136 },   // left = d153
<span class="lineNum">      39 </span>            :       { 52, 30, 74, 113, 130, 175, 51, 64, 58 },    // left = d207
<span class="lineNum">      40 </span>            :       { 47, 35, 80, 100, 74, 143, 64, 163, 74 },    // left = d63
<span class="lineNum">      41 </span>            :       { 36, 61, 116, 114, 128, 162, 80, 125, 82 }   // left = tm
<span class="lineNum">      42 </span>            :   },
<span class="lineNum">      43 </span>            :   {
<span class="lineNum">      44 </span>            :       // above = h
<span class="lineNum">      45 </span>            :       { 82, 26, 26, 171, 208, 204, 44, 32, 105 },  // left = dc
<span class="lineNum">      46 </span>            :       { 55, 44, 68, 166, 179, 192, 57, 57, 108 },  // left = v
<span class="lineNum">      47 </span>            :       { 42, 26, 11, 199, 241, 228, 23, 15, 85 },   // left = h
<span class="lineNum">      48 </span>            :       { 68, 42, 19, 131, 160, 199, 55, 52, 83 },   // left = d45
<span class="lineNum">      49 </span>            :       { 58, 50, 25, 139, 115, 232, 39, 52, 118 },  // left = d135
<span class="lineNum">      50 </span>            :       { 50, 35, 33, 153, 104, 162, 64, 59, 131 },  // left = d117
<span class="lineNum">      51 </span>            :       { 44, 24, 16, 150, 177, 202, 33, 19, 156 },  // left = d153
<span class="lineNum">      52 </span>            :       { 55, 27, 12, 153, 203, 218, 26, 27, 49 },   // left = d207
<span class="lineNum">      53 </span>            :       { 53, 49, 21, 110, 116, 168, 59, 80, 76 },   // left = d63
<span class="lineNum">      54 </span>            :       { 38, 72, 19, 168, 203, 212, 50, 50, 107 }   // left = tm
<span class="lineNum">      55 </span>            :   },
<span class="lineNum">      56 </span>            :   {
<span class="lineNum">      57 </span>            :       // above = d45
<span class="lineNum">      58 </span>            :       { 103, 26, 36, 129, 132, 201, 83, 80, 93 },  // left = dc
<span class="lineNum">      59 </span>            :       { 59, 38, 83, 112, 103, 162, 98, 136, 90 },  // left = v
<span class="lineNum">      60 </span>            :       { 62, 30, 23, 158, 200, 207, 59, 57, 50 },   // left = h
<span class="lineNum">      61 </span>            :       { 67, 30, 29, 84, 86, 191, 102, 91, 59 },    // left = d45
<span class="lineNum">      62 </span>            :       { 60, 32, 33, 112, 71, 220, 64, 89, 104 },   // left = d135
<span class="lineNum">      63 </span>            :       { 53, 26, 34, 130, 56, 149, 84, 120, 103 },  // left = d117
<span class="lineNum">      64 </span>            :       { 53, 21, 23, 133, 109, 210, 56, 77, 172 },  // left = d153
<span class="lineNum">      65 </span>            :       { 77, 19, 29, 112, 142, 228, 55, 66, 36 },   // left = d207
<span class="lineNum">      66 </span>            :       { 61, 29, 29, 93, 97, 165, 83, 175, 162 },   // left = d63
<span class="lineNum">      67 </span>            :       { 47, 47, 43, 114, 137, 181, 100, 99, 95 }   // left = tm
<span class="lineNum">      68 </span>            :   },
<span class="lineNum">      69 </span>            :   {
<span class="lineNum">      70 </span>            :       // above = d135
<span class="lineNum">      71 </span>            :       { 69, 23, 29, 128, 83, 199, 46, 44, 101 },   // left = dc
<span class="lineNum">      72 </span>            :       { 53, 40, 55, 139, 69, 183, 61, 80, 110 },   // left = v
<span class="lineNum">      73 </span>            :       { 40, 29, 19, 161, 180, 207, 43, 24, 91 },   // left = h
<span class="lineNum">      74 </span>            :       { 60, 34, 19, 105, 61, 198, 53, 64, 89 },    // left = d45
<span class="lineNum">      75 </span>            :       { 52, 31, 22, 158, 40, 209, 58, 62, 89 },    // left = d135
<span class="lineNum">      76 </span>            :       { 44, 31, 29, 147, 46, 158, 56, 102, 198 },  // left = d117
<span class="lineNum">      77 </span>            :       { 35, 19, 12, 135, 87, 209, 41, 45, 167 },   // left = d153
<span class="lineNum">      78 </span>            :       { 55, 25, 21, 118, 95, 215, 38, 39, 66 },    // left = d207
<span class="lineNum">      79 </span>            :       { 51, 38, 25, 113, 58, 164, 70, 93, 97 },    // left = d63
<span class="lineNum">      80 </span>            :       { 47, 54, 34, 146, 108, 203, 72, 103, 151 }  // left = tm
<span class="lineNum">      81 </span>            :   },
<span class="lineNum">      82 </span>            :   {
<span class="lineNum">      83 </span>            :       // above = d117
<span class="lineNum">      84 </span>            :       { 64, 19, 37, 156, 66, 138, 49, 95, 133 },   // left = dc
<span class="lineNum">      85 </span>            :       { 46, 27, 80, 150, 55, 124, 55, 121, 135 },  // left = v
<span class="lineNum">      86 </span>            :       { 36, 23, 27, 165, 149, 166, 54, 64, 118 },  // left = h
<span class="lineNum">      87 </span>            :       { 53, 21, 36, 131, 63, 163, 60, 109, 81 },   // left = d45
<span class="lineNum">      88 </span>            :       { 40, 26, 35, 154, 40, 185, 51, 97, 123 },   // left = d135
<span class="lineNum">      89 </span>            :       { 35, 19, 34, 179, 19, 97, 48, 129, 124 },   // left = d117
<span class="lineNum">      90 </span>            :       { 36, 20, 26, 136, 62, 164, 33, 77, 154 },   // left = d153
<span class="lineNum">      91 </span>            :       { 45, 18, 32, 130, 90, 157, 40, 79, 91 },    // left = d207
<span class="lineNum">      92 </span>            :       { 45, 26, 28, 129, 45, 129, 49, 147, 123 },  // left = d63
<span class="lineNum">      93 </span>            :       { 38, 44, 51, 136, 74, 162, 57, 97, 121 }    // left = tm
<span class="lineNum">      94 </span>            :   },
<span class="lineNum">      95 </span>            :   {
<span class="lineNum">      96 </span>            :       // above = d153
<span class="lineNum">      97 </span>            :       { 75, 17, 22, 136, 138, 185, 32, 34, 166 },  // left = dc
<span class="lineNum">      98 </span>            :       { 56, 39, 58, 133, 117, 173, 48, 53, 187 },  // left = v
<span class="lineNum">      99 </span>            :       { 35, 21, 12, 161, 212, 207, 20, 23, 145 },  // left = h
<span class="lineNum">     100 </span>            :       { 56, 29, 19, 117, 109, 181, 55, 68, 112 },  // left = d45
<span class="lineNum">     101 </span>            :       { 47, 29, 17, 153, 64, 220, 59, 51, 114 },   // left = d135
<span class="lineNum">     102 </span>            :       { 46, 16, 24, 136, 76, 147, 41, 64, 172 },   // left = d117
<span class="lineNum">     103 </span>            :       { 34, 17, 11, 108, 152, 187, 13, 15, 209 },  // left = d153
<span class="lineNum">     104 </span>            :       { 51, 24, 14, 115, 133, 209, 32, 26, 104 },  // left = d207
<span class="lineNum">     105 </span>            :       { 55, 30, 18, 122, 79, 179, 44, 88, 116 },   // left = d63
<span class="lineNum">     106 </span>            :       { 37, 49, 25, 129, 168, 164, 41, 54, 148 }   // left = tm
<span class="lineNum">     107 </span>            :   },
<span class="lineNum">     108 </span>            :   {
<span class="lineNum">     109 </span>            :       // above = d207
<span class="lineNum">     110 </span>            :       { 82, 22, 32, 127, 143, 213, 39, 41, 70 },   // left = dc
<span class="lineNum">     111 </span>            :       { 62, 44, 61, 123, 105, 189, 48, 57, 64 },   // left = v
<span class="lineNum">     112 </span>            :       { 47, 25, 17, 175, 222, 220, 24, 30, 86 },   // left = h
<span class="lineNum">     113 </span>            :       { 68, 36, 17, 106, 102, 206, 59, 74, 74 },   // left = d45
<span class="lineNum">     114 </span>            :       { 57, 39, 23, 151, 68, 216, 55, 63, 58 },    // left = d135
<span class="lineNum">     115 </span>            :       { 49, 30, 35, 141, 70, 168, 82, 40, 115 },   // left = d117
<span class="lineNum">     116 </span>            :       { 51, 25, 15, 136, 129, 202, 38, 35, 139 },  // left = d153
<span class="lineNum">     117 </span>            :       { 68, 26, 16, 111, 141, 215, 29, 28, 28 },   // left = d207
<span class="lineNum">     118 </span>            :       { 59, 39, 19, 114, 75, 180, 77, 104, 42 },   // left = d63
<span class="lineNum">     119 </span>            :       { 40, 61, 26, 126, 152, 206, 61, 59, 93 }    // left = tm
<span class="lineNum">     120 </span>            :   },
<span class="lineNum">     121 </span>            :   {
<span class="lineNum">     122 </span>            :       // above = d63
<span class="lineNum">     123 </span>            :       { 78, 23, 39, 111, 117, 170, 74, 124, 94 },   // left = dc
<span class="lineNum">     124 </span>            :       { 48, 34, 86, 101, 92, 146, 78, 179, 134 },   // left = v
<span class="lineNum">     125 </span>            :       { 47, 22, 24, 138, 187, 178, 68, 69, 59 },    // left = h
<span class="lineNum">     126 </span>            :       { 56, 25, 33, 105, 112, 187, 95, 177, 129 },  // left = d45
<span class="lineNum">     127 </span>            :       { 48, 31, 27, 114, 63, 183, 82, 116, 56 },    // left = d135
<span class="lineNum">     128 </span>            :       { 43, 28, 37, 121, 63, 123, 61, 192, 169 },   // left = d117
<span class="lineNum">     129 </span>            :       { 42, 17, 24, 109, 97, 177, 56, 76, 122 },    // left = d153
<span class="lineNum">     130 </span>            :       { 58, 18, 28, 105, 139, 182, 70, 92, 63 },    // left = d207
<span class="lineNum">     131 </span>            :       { 46, 23, 32, 74, 86, 150, 67, 183, 88 },     // left = d63
<span class="lineNum">     132 </span>            :       { 36, 38, 48, 92, 122, 165, 88, 137, 91 }     // left = tm
<span class="lineNum">     133 </span>            :   },
<span class="lineNum">     134 </span>            :   {
<span class="lineNum">     135 </span>            :       // above = tm
<span class="lineNum">     136 </span>            :       { 65, 70, 60, 155, 159, 199, 61, 60, 81 },    // left = dc
<span class="lineNum">     137 </span>            :       { 44, 78, 115, 132, 119, 173, 71, 112, 93 },  // left = v
<span class="lineNum">     138 </span>            :       { 39, 38, 21, 184, 227, 206, 42, 32, 64 },    // left = h
<span class="lineNum">     139 </span>            :       { 58, 47, 36, 124, 137, 193, 80, 82, 78 },    // left = d45
<span class="lineNum">     140 </span>            :       { 49, 50, 35, 144, 95, 205, 63, 78, 59 },     // left = d135
<span class="lineNum">     141 </span>            :       { 41, 53, 52, 148, 71, 142, 65, 128, 51 },    // left = d117
<span class="lineNum">     142 </span>            :       { 40, 36, 28, 143, 143, 202, 40, 55, 137 },   // left = d153
<span class="lineNum">     143 </span>            :       { 52, 34, 29, 129, 183, 227, 42, 35, 43 },    // left = d207
<span class="lineNum">     144 </span>            :       { 42, 44, 44, 104, 105, 164, 64, 130, 80 },   // left = d63
<span class="lineNum">     145 </span>            :       { 43, 81, 53, 140, 169, 204, 68, 84, 72 }     // left = tm
<span class="lineNum">     146 </span>            :   }
<span class="lineNum">     147 </span>            : };
<span class="lineNum">     148 </span>            : 
<span class="lineNum">     149 </span>            : const vpx_prob vp9_kf_uv_mode_prob[INTRA_MODES][INTRA_MODES - 1] = {
<span class="lineNum">     150 </span>            :   { 144, 11, 54, 157, 195, 130, 46, 58, 108 },   // y = dc
<span class="lineNum">     151 </span>            :   { 118, 15, 123, 148, 131, 101, 44, 93, 131 },  // y = v
<span class="lineNum">     152 </span>            :   { 113, 12, 23, 188, 226, 142, 26, 32, 125 },   // y = h
<span class="lineNum">     153 </span>            :   { 120, 11, 50, 123, 163, 135, 64, 77, 103 },   // y = d45
<span class="lineNum">     154 </span>            :   { 113, 9, 36, 155, 111, 157, 32, 44, 161 },    // y = d135
<span class="lineNum">     155 </span>            :   { 116, 9, 55, 176, 76, 96, 37, 61, 149 },      // y = d117
<span class="lineNum">     156 </span>            :   { 115, 9, 28, 141, 161, 167, 21, 25, 193 },    // y = d153
<span class="lineNum">     157 </span>            :   { 120, 12, 32, 145, 195, 142, 32, 38, 86 },    // y = d207
<span class="lineNum">     158 </span>            :   { 116, 12, 64, 120, 140, 125, 49, 115, 121 },  // y = d63
<span class="lineNum">     159 </span>            :   { 102, 19, 66, 162, 182, 122, 35, 59, 128 }    // y = tm
<span class="lineNum">     160 </span>            : };
<span class="lineNum">     161 </span>            : 
<span class="lineNum">     162 </span>            : static const vpx_prob default_if_y_probs[BLOCK_SIZE_GROUPS][INTRA_MODES - 1] = {
<span class="lineNum">     163 </span>            :   { 65, 32, 18, 144, 162, 194, 41, 51, 98 },   // block_size &lt; 8x8
<span class="lineNum">     164 </span>            :   { 132, 68, 18, 165, 217, 196, 45, 40, 78 },  // block_size &lt; 16x16
<span class="lineNum">     165 </span>            :   { 173, 80, 19, 176, 240, 193, 64, 35, 46 },  // block_size &lt; 32x32
<span class="lineNum">     166 </span>            :   { 221, 135, 38, 194, 248, 121, 96, 85, 29 }  // block_size &gt;= 32x32
<span class="lineNum">     167 </span>            : };
<span class="lineNum">     168 </span>            : 
<span class="lineNum">     169 </span>            : static const vpx_prob default_if_uv_probs[INTRA_MODES][INTRA_MODES - 1] = {
<span class="lineNum">     170 </span>            :   { 120, 7, 76, 176, 208, 126, 28, 54, 103 },   // y = dc
<span class="lineNum">     171 </span>            :   { 48, 12, 154, 155, 139, 90, 34, 117, 119 },  // y = v
<span class="lineNum">     172 </span>            :   { 67, 6, 25, 204, 243, 158, 13, 21, 96 },     // y = h
<span class="lineNum">     173 </span>            :   { 97, 5, 44, 131, 176, 139, 48, 68, 97 },     // y = d45
<span class="lineNum">     174 </span>            :   { 83, 5, 42, 156, 111, 152, 26, 49, 152 },    // y = d135
<span class="lineNum">     175 </span>            :   { 80, 5, 58, 178, 74, 83, 33, 62, 145 },      // y = d117
<span class="lineNum">     176 </span>            :   { 86, 5, 32, 154, 192, 168, 14, 22, 163 },    // y = d153
<span class="lineNum">     177 </span>            :   { 85, 5, 32, 156, 216, 148, 19, 29, 73 },     // y = d207
<span class="lineNum">     178 </span>            :   { 77, 7, 64, 116, 132, 122, 37, 126, 120 },   // y = d63
<span class="lineNum">     179 </span>            :   { 101, 21, 107, 181, 192, 103, 19, 67, 125 }  // y = tm
<span class="lineNum">     180 </span>            : };
<span class="lineNum">     181 </span>            : 
<span class="lineNum">     182 </span>            : const vpx_prob vp9_kf_partition_probs[PARTITION_CONTEXTS]
<span class="lineNum">     183 </span>            :                                      [PARTITION_TYPES - 1] = {
<span class="lineNum">     184 </span>            :                                        // 8x8 -&gt; 4x4
<span class="lineNum">     185 </span>            :                                        { 158, 97, 94 },  // a/l both not split
<span class="lineNum">     186 </span>            :                                        { 93, 24, 99 },   // a split, l not split
<span class="lineNum">     187 </span>            :                                        { 85, 119, 44 },  // l split, a not split
<span class="lineNum">     188 </span>            :                                        { 62, 59, 67 },   // a/l both split
<span class="lineNum">     189 </span>            :                                        // 16x16 -&gt; 8x8
<span class="lineNum">     190 </span>            :                                        { 149, 53, 53 },  // a/l both not split
<span class="lineNum">     191 </span>            :                                        { 94, 20, 48 },   // a split, l not split
<span class="lineNum">     192 </span>            :                                        { 83, 53, 24 },   // l split, a not split
<span class="lineNum">     193 </span>            :                                        { 52, 18, 18 },   // a/l both split
<span class="lineNum">     194 </span>            :                                        // 32x32 -&gt; 16x16
<span class="lineNum">     195 </span>            :                                        { 150, 40, 39 },  // a/l both not split
<span class="lineNum">     196 </span>            :                                        { 78, 12, 26 },   // a split, l not split
<span class="lineNum">     197 </span>            :                                        { 67, 33, 11 },   // l split, a not split
<span class="lineNum">     198 </span>            :                                        { 24, 7, 5 },     // a/l both split
<span class="lineNum">     199 </span>            :                                        // 64x64 -&gt; 32x32
<span class="lineNum">     200 </span>            :                                        { 174, 35, 49 },  // a/l both not split
<span class="lineNum">     201 </span>            :                                        { 68, 11, 27 },   // a split, l not split
<span class="lineNum">     202 </span>            :                                        { 57, 15, 9 },    // l split, a not split
<span class="lineNum">     203 </span>            :                                        { 12, 3, 3 },     // a/l both split
<span class="lineNum">     204 </span>            :                                      };
<span class="lineNum">     205 </span>            : 
<span class="lineNum">     206 </span>            : static const vpx_prob
<span class="lineNum">     207 </span>            :     default_partition_probs[PARTITION_CONTEXTS][PARTITION_TYPES - 1] = {
<span class="lineNum">     208 </span>            :       // 8x8 -&gt; 4x4
<span class="lineNum">     209 </span>            :       { 199, 122, 141 },  // a/l both not split
<span class="lineNum">     210 </span>            :       { 147, 63, 159 },   // a split, l not split
<span class="lineNum">     211 </span>            :       { 148, 133, 118 },  // l split, a not split
<span class="lineNum">     212 </span>            :       { 121, 104, 114 },  // a/l both split
<span class="lineNum">     213 </span>            :       // 16x16 -&gt; 8x8
<span class="lineNum">     214 </span>            :       { 174, 73, 87 },  // a/l both not split
<span class="lineNum">     215 </span>            :       { 92, 41, 83 },   // a split, l not split
<span class="lineNum">     216 </span>            :       { 82, 99, 50 },   // l split, a not split
<span class="lineNum">     217 </span>            :       { 53, 39, 39 },   // a/l both split
<span class="lineNum">     218 </span>            :       // 32x32 -&gt; 16x16
<span class="lineNum">     219 </span>            :       { 177, 58, 59 },  // a/l both not split
<span class="lineNum">     220 </span>            :       { 68, 26, 63 },   // a split, l not split
<span class="lineNum">     221 </span>            :       { 52, 79, 25 },   // l split, a not split
<span class="lineNum">     222 </span>            :       { 17, 14, 12 },   // a/l both split
<span class="lineNum">     223 </span>            :       // 64x64 -&gt; 32x32
<span class="lineNum">     224 </span>            :       { 222, 34, 30 },  // a/l both not split
<span class="lineNum">     225 </span>            :       { 72, 16, 44 },   // a split, l not split
<span class="lineNum">     226 </span>            :       { 58, 32, 12 },   // l split, a not split
<span class="lineNum">     227 </span>            :       { 10, 7, 6 },     // a/l both split
<span class="lineNum">     228 </span>            :     };
<span class="lineNum">     229 </span>            : 
<span class="lineNum">     230 </span>            : static const vpx_prob
<span class="lineNum">     231 </span>            :     default_inter_mode_probs[INTER_MODE_CONTEXTS][INTER_MODES - 1] = {
<span class="lineNum">     232 </span>            :       { 2, 173, 34 },  // 0 = both zero mv
<span class="lineNum">     233 </span>            :       { 7, 145, 85 },  // 1 = one zero mv + one a predicted mv
<span class="lineNum">     234 </span>            :       { 7, 166, 63 },  // 2 = two predicted mvs
<span class="lineNum">     235 </span>            :       { 7, 94, 66 },   // 3 = one predicted/zero and one new mv
<span class="lineNum">     236 </span>            :       { 8, 64, 46 },   // 4 = two new mvs
<span class="lineNum">     237 </span>            :       { 17, 81, 31 },  // 5 = one intra neighbour + x
<span class="lineNum">     238 </span>            :       { 25, 29, 30 },  // 6 = two intra neighbours
<span class="lineNum">     239 </span>            :     };
<span class="lineNum">     240 </span>            : 
<span class="lineNum">     241 </span>            : /* Array indices are identical to previously-existing INTRAMODECONTEXTNODES. */
<span class="lineNum">     242 </span>            : const vpx_tree_index vp9_intra_mode_tree[TREE_SIZE(INTRA_MODES)] = {
<span class="lineNum">     243 </span>            :   -DC_PRED,   2,          /* 0 = DC_NODE */
<span class="lineNum">     244 </span>            :   -TM_PRED,   4,          /* 1 = TM_NODE */
<span class="lineNum">     245 </span>            :   -V_PRED,    6,          /* 2 = V_NODE */
<span class="lineNum">     246 </span>            :   8,          12,         /* 3 = COM_NODE */
<span class="lineNum">     247 </span>            :   -H_PRED,    10,         /* 4 = H_NODE */
<span class="lineNum">     248 </span>            :   -D135_PRED, -D117_PRED, /* 5 = D135_NODE */
<span class="lineNum">     249 </span>            :   -D45_PRED,  14,         /* 6 = D45_NODE */
<span class="lineNum">     250 </span>            :   -D63_PRED,  16,         /* 7 = D63_NODE */
<span class="lineNum">     251 </span>            :   -D153_PRED, -D207_PRED  /* 8 = D153_NODE */
<span class="lineNum">     252 </span>            : };
<span class="lineNum">     253 </span>            : 
<span class="lineNum">     254 </span>            : const vpx_tree_index vp9_inter_mode_tree[TREE_SIZE(INTER_MODES)] = {
<span class="lineNum">     255 </span>            :   -INTER_OFFSET(ZEROMV), 2, -INTER_OFFSET(NEARESTMV), 4, -INTER_OFFSET(NEARMV),
<span class="lineNum">     256 </span>            :   -INTER_OFFSET(NEWMV)
<span class="lineNum">     257 </span>            : };
<span class="lineNum">     258 </span>            : 
<span class="lineNum">     259 </span>            : const vpx_tree_index vp9_partition_tree[TREE_SIZE(PARTITION_TYPES)] = {
<span class="lineNum">     260 </span>            :   -PARTITION_NONE, 2, -PARTITION_HORZ, 4, -PARTITION_VERT, -PARTITION_SPLIT
<span class="lineNum">     261 </span>            : };
<span class="lineNum">     262 </span>            : 
<span class="lineNum">     263 </span>            : static const vpx_prob default_intra_inter_p[INTRA_INTER_CONTEXTS] = {
<span class="lineNum">     264 </span>            :   9, 102, 187, 225
<span class="lineNum">     265 </span>            : };
<span class="lineNum">     266 </span>            : 
<span class="lineNum">     267 </span>            : static const vpx_prob default_comp_inter_p[COMP_INTER_CONTEXTS] = {
<span class="lineNum">     268 </span>            :   239, 183, 119, 96, 41
<span class="lineNum">     269 </span>            : };
<span class="lineNum">     270 </span>            : 
<span class="lineNum">     271 </span>            : static const vpx_prob default_comp_ref_p[REF_CONTEXTS] = { 50, 126, 123, 221,
<span class="lineNum">     272 </span>            :                                                            226 };
<span class="lineNum">     273 </span>            : 
<span class="lineNum">     274 </span>            : static const vpx_prob default_single_ref_p[REF_CONTEXTS][2] = {
<span class="lineNum">     275 </span>            :   { 33, 16 }, { 77, 74 }, { 142, 142 }, { 172, 170 }, { 238, 247 }
<span class="lineNum">     276 </span>            : };
<span class="lineNum">     277 </span>            : 
<span class="lineNum">     278 </span>            : static const struct tx_probs default_tx_probs = { { { 3, 136, 37 },
<span class="lineNum">     279 </span>            :                                                     { 5, 52, 13 } },
<span class="lineNum">     280 </span>            : 
<span class="lineNum">     281 </span>            :                                                   { { 20, 152 }, { 15, 101 } },
<span class="lineNum">     282 </span>            : 
<a name="283"><span class="lineNum">     283 </span>            :                                                   { { 100 }, { 66 } } };</a>
<span class="lineNum">     284 </span>            : 
<span class="lineNum">     285 </span><span class="lineNoCov">          0 : void tx_counts_to_branch_counts_32x32(const unsigned int *tx_count_32x32p,</span>
<span class="lineNum">     286 </span>            :                                       unsigned int (*ct_32x32p)[2]) {
<span class="lineNum">     287 </span><span class="lineNoCov">          0 :   ct_32x32p[0][0] = tx_count_32x32p[TX_4X4];</span>
<span class="lineNum">     288 </span><span class="lineNoCov">          0 :   ct_32x32p[0][1] = tx_count_32x32p[TX_8X8] + tx_count_32x32p[TX_16X16] +</span>
<span class="lineNum">     289 </span><span class="lineNoCov">          0 :                     tx_count_32x32p[TX_32X32];</span>
<span class="lineNum">     290 </span><span class="lineNoCov">          0 :   ct_32x32p[1][0] = tx_count_32x32p[TX_8X8];</span>
<span class="lineNum">     291 </span><span class="lineNoCov">          0 :   ct_32x32p[1][1] = tx_count_32x32p[TX_16X16] + tx_count_32x32p[TX_32X32];</span>
<span class="lineNum">     292 </span><span class="lineNoCov">          0 :   ct_32x32p[2][0] = tx_count_32x32p[TX_16X16];</span>
<span class="lineNum">     293 </span><span class="lineNoCov">          0 :   ct_32x32p[2][1] = tx_count_32x32p[TX_32X32];</span>
<a name="294"><span class="lineNum">     294 </span><span class="lineNoCov">          0 : }</span></a>
<span class="lineNum">     295 </span>            : 
<span class="lineNum">     296 </span><span class="lineNoCov">          0 : void tx_counts_to_branch_counts_16x16(const unsigned int *tx_count_16x16p,</span>
<span class="lineNum">     297 </span>            :                                       unsigned int (*ct_16x16p)[2]) {
<span class="lineNum">     298 </span><span class="lineNoCov">          0 :   ct_16x16p[0][0] = tx_count_16x16p[TX_4X4];</span>
<span class="lineNum">     299 </span><span class="lineNoCov">          0 :   ct_16x16p[0][1] = tx_count_16x16p[TX_8X8] + tx_count_16x16p[TX_16X16];</span>
<span class="lineNum">     300 </span><span class="lineNoCov">          0 :   ct_16x16p[1][0] = tx_count_16x16p[TX_8X8];</span>
<span class="lineNum">     301 </span><span class="lineNoCov">          0 :   ct_16x16p[1][1] = tx_count_16x16p[TX_16X16];</span>
<a name="302"><span class="lineNum">     302 </span><span class="lineNoCov">          0 : }</span></a>
<span class="lineNum">     303 </span>            : 
<span class="lineNum">     304 </span><span class="lineNoCov">          0 : void tx_counts_to_branch_counts_8x8(const unsigned int *tx_count_8x8p,</span>
<span class="lineNum">     305 </span>            :                                     unsigned int (*ct_8x8p)[2]) {
<span class="lineNum">     306 </span><span class="lineNoCov">          0 :   ct_8x8p[0][0] = tx_count_8x8p[TX_4X4];</span>
<span class="lineNum">     307 </span><span class="lineNoCov">          0 :   ct_8x8p[0][1] = tx_count_8x8p[TX_8X8];</span>
<span class="lineNum">     308 </span><span class="lineNoCov">          0 : }</span>
<span class="lineNum">     309 </span>            : 
<span class="lineNum">     310 </span>            : static const vpx_prob default_skip_probs[SKIP_CONTEXTS] = { 192, 128, 64 };
<span class="lineNum">     311 </span>            : 
<span class="lineNum">     312 </span>            : static const vpx_prob default_switchable_interp_prob[SWITCHABLE_FILTER_CONTEXTS]
<span class="lineNum">     313 </span>            :                                                     [SWITCHABLE_FILTERS - 1] = {
<span class="lineNum">     314 </span>            :                                                       { 235, 162 },
<span class="lineNum">     315 </span>            :                                                       { 36, 255 },
<span class="lineNum">     316 </span>            :                                                       { 34, 3 },
<span class="lineNum">     317 </span>            :                                                       { 149, 144 },
<a name="318"><span class="lineNum">     318 </span>            :                                                     };</a>
<span class="lineNum">     319 </span>            : 
<span class="lineNum">     320 </span><span class="lineNoCov">          0 : static void init_mode_probs(FRAME_CONTEXT *fc) {</span>
<span class="lineNum">     321 </span><span class="lineNoCov">          0 :   vp9_copy(fc-&gt;uv_mode_prob, default_if_uv_probs);</span>
<span class="lineNum">     322 </span><span class="lineNoCov">          0 :   vp9_copy(fc-&gt;y_mode_prob, default_if_y_probs);</span>
<span class="lineNum">     323 </span><span class="lineNoCov">          0 :   vp9_copy(fc-&gt;switchable_interp_prob, default_switchable_interp_prob);</span>
<span class="lineNum">     324 </span><span class="lineNoCov">          0 :   vp9_copy(fc-&gt;partition_prob, default_partition_probs);</span>
<span class="lineNum">     325 </span><span class="lineNoCov">          0 :   vp9_copy(fc-&gt;intra_inter_prob, default_intra_inter_p);</span>
<span class="lineNum">     326 </span><span class="lineNoCov">          0 :   vp9_copy(fc-&gt;comp_inter_prob, default_comp_inter_p);</span>
<span class="lineNum">     327 </span><span class="lineNoCov">          0 :   vp9_copy(fc-&gt;comp_ref_prob, default_comp_ref_p);</span>
<span class="lineNum">     328 </span><span class="lineNoCov">          0 :   vp9_copy(fc-&gt;single_ref_prob, default_single_ref_p);</span>
<span class="lineNum">     329 </span><span class="lineNoCov">          0 :   fc-&gt;tx_probs = default_tx_probs;</span>
<span class="lineNum">     330 </span><span class="lineNoCov">          0 :   vp9_copy(fc-&gt;skip_probs, default_skip_probs);</span>
<span class="lineNum">     331 </span><span class="lineNoCov">          0 :   vp9_copy(fc-&gt;inter_mode_probs, default_inter_mode_probs);</span>
<span class="lineNum">     332 </span><span class="lineNoCov">          0 : }</span>
<span class="lineNum">     333 </span>            : 
<span class="lineNum">     334 </span>            : const vpx_tree_index vp9_switchable_interp_tree[TREE_SIZE(SWITCHABLE_FILTERS)] =
<a name="335"><span class="lineNum">     335 </span>            :     { -EIGHTTAP, 2, -EIGHTTAP_SMOOTH, -EIGHTTAP_SHARP };</a>
<span class="lineNum">     336 </span>            : 
<span class="lineNum">     337 </span><span class="lineNoCov">          0 : void vp9_adapt_mode_probs(VP9_COMMON *cm) {</span>
<span class="lineNum">     338 </span>            :   int i, j;
<span class="lineNum">     339 </span><span class="lineNoCov">          0 :   FRAME_CONTEXT *fc = cm-&gt;fc;</span>
<span class="lineNum">     340 </span><span class="lineNoCov">          0 :   const FRAME_CONTEXT *pre_fc = &amp;cm-&gt;frame_contexts[cm-&gt;frame_context_idx];</span>
<span class="lineNum">     341 </span><span class="lineNoCov">          0 :   const FRAME_COUNTS *counts = &amp;cm-&gt;counts;</span>
<span class="lineNum">     342 </span>            : 
<span class="lineNum">     343 </span><span class="lineNoCov">          0 :   for (i = 0; i &lt; INTRA_INTER_CONTEXTS; i++)</span>
<span class="lineNum">     344 </span><span class="lineNoCov">          0 :     fc-&gt;intra_inter_prob[i] = mode_mv_merge_probs(pre_fc-&gt;intra_inter_prob[i],</span>
<span class="lineNum">     345 </span><span class="lineNoCov">          0 :                                                   counts-&gt;intra_inter[i]);</span>
<span class="lineNum">     346 </span><span class="lineNoCov">          0 :   for (i = 0; i &lt; COMP_INTER_CONTEXTS; i++)</span>
<span class="lineNum">     347 </span><span class="lineNoCov">          0 :     fc-&gt;comp_inter_prob[i] =</span>
<span class="lineNum">     348 </span><span class="lineNoCov">          0 :         mode_mv_merge_probs(pre_fc-&gt;comp_inter_prob[i], counts-&gt;comp_inter[i]);</span>
<span class="lineNum">     349 </span><span class="lineNoCov">          0 :   for (i = 0; i &lt; REF_CONTEXTS; i++)</span>
<span class="lineNum">     350 </span><span class="lineNoCov">          0 :     fc-&gt;comp_ref_prob[i] =</span>
<span class="lineNum">     351 </span><span class="lineNoCov">          0 :         mode_mv_merge_probs(pre_fc-&gt;comp_ref_prob[i], counts-&gt;comp_ref[i]);</span>
<span class="lineNum">     352 </span><span class="lineNoCov">          0 :   for (i = 0; i &lt; REF_CONTEXTS; i++)</span>
<span class="lineNum">     353 </span><span class="lineNoCov">          0 :     for (j = 0; j &lt; 2; j++)</span>
<span class="lineNum">     354 </span><span class="lineNoCov">          0 :       fc-&gt;single_ref_prob[i][j] = mode_mv_merge_probs(</span>
<span class="lineNum">     355 </span><span class="lineNoCov">          0 :           pre_fc-&gt;single_ref_prob[i][j], counts-&gt;single_ref[i][j]);</span>
<span class="lineNum">     356 </span>            : 
<span class="lineNum">     357 </span><span class="lineNoCov">          0 :   for (i = 0; i &lt; INTER_MODE_CONTEXTS; i++)</span>
<span class="lineNum">     358 </span><span class="lineNoCov">          0 :     vpx_tree_merge_probs(vp9_inter_mode_tree, pre_fc-&gt;inter_mode_probs[i],</span>
<span class="lineNum">     359 </span><span class="lineNoCov">          0 :                          counts-&gt;inter_mode[i], fc-&gt;inter_mode_probs[i]);</span>
<span class="lineNum">     360 </span>            : 
<span class="lineNum">     361 </span><span class="lineNoCov">          0 :   for (i = 0; i &lt; BLOCK_SIZE_GROUPS; i++)</span>
<span class="lineNum">     362 </span><span class="lineNoCov">          0 :     vpx_tree_merge_probs(vp9_intra_mode_tree, pre_fc-&gt;y_mode_prob[i],</span>
<span class="lineNum">     363 </span><span class="lineNoCov">          0 :                          counts-&gt;y_mode[i], fc-&gt;y_mode_prob[i]);</span>
<span class="lineNum">     364 </span>            : 
<span class="lineNum">     365 </span><span class="lineNoCov">          0 :   for (i = 0; i &lt; INTRA_MODES; ++i)</span>
<span class="lineNum">     366 </span><span class="lineNoCov">          0 :     vpx_tree_merge_probs(vp9_intra_mode_tree, pre_fc-&gt;uv_mode_prob[i],</span>
<span class="lineNum">     367 </span><span class="lineNoCov">          0 :                          counts-&gt;uv_mode[i], fc-&gt;uv_mode_prob[i]);</span>
<span class="lineNum">     368 </span>            : 
<span class="lineNum">     369 </span><span class="lineNoCov">          0 :   for (i = 0; i &lt; PARTITION_CONTEXTS; i++)</span>
<span class="lineNum">     370 </span><span class="lineNoCov">          0 :     vpx_tree_merge_probs(vp9_partition_tree, pre_fc-&gt;partition_prob[i],</span>
<span class="lineNum">     371 </span><span class="lineNoCov">          0 :                          counts-&gt;partition[i], fc-&gt;partition_prob[i]);</span>
<span class="lineNum">     372 </span>            : 
<span class="lineNum">     373 </span><span class="lineNoCov">          0 :   if (cm-&gt;interp_filter == SWITCHABLE) {</span>
<span class="lineNum">     374 </span><span class="lineNoCov">          0 :     for (i = 0; i &lt; SWITCHABLE_FILTER_CONTEXTS; i++)</span>
<span class="lineNum">     375 </span><span class="lineNoCov">          0 :       vpx_tree_merge_probs(</span>
<span class="lineNum">     376 </span><span class="lineNoCov">          0 :           vp9_switchable_interp_tree, pre_fc-&gt;switchable_interp_prob[i],</span>
<span class="lineNum">     377 </span><span class="lineNoCov">          0 :           counts-&gt;switchable_interp[i], fc-&gt;switchable_interp_prob[i]);</span>
<span class="lineNum">     378 </span>            :   }
<span class="lineNum">     379 </span>            : 
<span class="lineNum">     380 </span><span class="lineNoCov">          0 :   if (cm-&gt;tx_mode == TX_MODE_SELECT) {</span>
<span class="lineNum">     381 </span>            :     int j;
<span class="lineNum">     382 </span>            :     unsigned int branch_ct_8x8p[TX_SIZES - 3][2];
<span class="lineNum">     383 </span>            :     unsigned int branch_ct_16x16p[TX_SIZES - 2][2];
<span class="lineNum">     384 </span>            :     unsigned int branch_ct_32x32p[TX_SIZES - 1][2];
<span class="lineNum">     385 </span>            : 
<span class="lineNum">     386 </span><span class="lineNoCov">          0 :     for (i = 0; i &lt; TX_SIZE_CONTEXTS; ++i) {</span>
<span class="lineNum">     387 </span><span class="lineNoCov">          0 :       tx_counts_to_branch_counts_8x8(counts-&gt;tx.p8x8[i], branch_ct_8x8p);</span>
<span class="lineNum">     388 </span><span class="lineNoCov">          0 :       for (j = 0; j &lt; TX_SIZES - 3; ++j)</span>
<span class="lineNum">     389 </span><span class="lineNoCov">          0 :         fc-&gt;tx_probs.p8x8[i][j] =</span>
<span class="lineNum">     390 </span><span class="lineNoCov">          0 :             mode_mv_merge_probs(pre_fc-&gt;tx_probs.p8x8[i][j], branch_ct_8x8p[j]);</span>
<span class="lineNum">     391 </span>            : 
<span class="lineNum">     392 </span><span class="lineNoCov">          0 :       tx_counts_to_branch_counts_16x16(counts-&gt;tx.p16x16[i], branch_ct_16x16p);</span>
<span class="lineNum">     393 </span><span class="lineNoCov">          0 :       for (j = 0; j &lt; TX_SIZES - 2; ++j)</span>
<span class="lineNum">     394 </span><span class="lineNoCov">          0 :         fc-&gt;tx_probs.p16x16[i][j] = mode_mv_merge_probs(</span>
<span class="lineNum">     395 </span><span class="lineNoCov">          0 :             pre_fc-&gt;tx_probs.p16x16[i][j], branch_ct_16x16p[j]);</span>
<span class="lineNum">     396 </span>            : 
<span class="lineNum">     397 </span><span class="lineNoCov">          0 :       tx_counts_to_branch_counts_32x32(counts-&gt;tx.p32x32[i], branch_ct_32x32p);</span>
<span class="lineNum">     398 </span><span class="lineNoCov">          0 :       for (j = 0; j &lt; TX_SIZES - 1; ++j)</span>
<span class="lineNum">     399 </span><span class="lineNoCov">          0 :         fc-&gt;tx_probs.p32x32[i][j] = mode_mv_merge_probs(</span>
<span class="lineNum">     400 </span><span class="lineNoCov">          0 :             pre_fc-&gt;tx_probs.p32x32[i][j], branch_ct_32x32p[j]);</span>
<span class="lineNum">     401 </span>            :     }
<span class="lineNum">     402 </span>            :   }
<span class="lineNum">     403 </span>            : 
<span class="lineNum">     404 </span><span class="lineNoCov">          0 :   for (i = 0; i &lt; SKIP_CONTEXTS; ++i)</span>
<span class="lineNum">     405 </span><span class="lineNoCov">          0 :     fc-&gt;skip_probs[i] =</span>
<span class="lineNum">     406 </span><span class="lineNoCov">          0 :         mode_mv_merge_probs(pre_fc-&gt;skip_probs[i], counts-&gt;skip[i]);</span>
<a name="407"><span class="lineNum">     407 </span><span class="lineNoCov">          0 : }</span></a>
<span class="lineNum">     408 </span>            : 
<span class="lineNum">     409 </span><span class="lineNoCov">          0 : static void set_default_lf_deltas(struct loopfilter *lf) {</span>
<span class="lineNum">     410 </span><span class="lineNoCov">          0 :   lf-&gt;mode_ref_delta_enabled = 1;</span>
<span class="lineNum">     411 </span><span class="lineNoCov">          0 :   lf-&gt;mode_ref_delta_update = 1;</span>
<span class="lineNum">     412 </span>            : 
<span class="lineNum">     413 </span><span class="lineNoCov">          0 :   lf-&gt;ref_deltas[INTRA_FRAME] = 1;</span>
<span class="lineNum">     414 </span><span class="lineNoCov">          0 :   lf-&gt;ref_deltas[LAST_FRAME] = 0;</span>
<span class="lineNum">     415 </span><span class="lineNoCov">          0 :   lf-&gt;ref_deltas[GOLDEN_FRAME] = -1;</span>
<span class="lineNum">     416 </span><span class="lineNoCov">          0 :   lf-&gt;ref_deltas[ALTREF_FRAME] = -1;</span>
<span class="lineNum">     417 </span>            : 
<span class="lineNum">     418 </span><span class="lineNoCov">          0 :   lf-&gt;mode_deltas[0] = 0;</span>
<span class="lineNum">     419 </span><span class="lineNoCov">          0 :   lf-&gt;mode_deltas[1] = 0;</span>
<a name="420"><span class="lineNum">     420 </span><span class="lineNoCov">          0 : }</span></a>
<span class="lineNum">     421 </span>            : 
<span class="lineNum">     422 </span><span class="lineNoCov">          0 : void vp9_setup_past_independence(VP9_COMMON *cm) {</span>
<span class="lineNum">     423 </span>            :   // Reset the segment feature data to the default stats:
<span class="lineNum">     424 </span>            :   // Features disabled, 0, with delta coding (Default state).
<span class="lineNum">     425 </span><span class="lineNoCov">          0 :   struct loopfilter *const lf = &amp;cm-&gt;lf;</span>
<span class="lineNum">     426 </span>            : 
<span class="lineNum">     427 </span>            :   int i;
<span class="lineNum">     428 </span><span class="lineNoCov">          0 :   vp9_clearall_segfeatures(&amp;cm-&gt;seg);</span>
<span class="lineNum">     429 </span><span class="lineNoCov">          0 :   cm-&gt;seg.abs_delta = SEGMENT_DELTADATA;</span>
<span class="lineNum">     430 </span>            : 
<span class="lineNum">     431 </span><span class="lineNoCov">          0 :   if (cm-&gt;last_frame_seg_map &amp;&amp; !cm-&gt;frame_parallel_decode)</span>
<span class="lineNum">     432 </span><span class="lineNoCov">          0 :     memset(cm-&gt;last_frame_seg_map, 0, (cm-&gt;mi_rows * cm-&gt;mi_cols));</span>
<span class="lineNum">     433 </span>            : 
<span class="lineNum">     434 </span><span class="lineNoCov">          0 :   if (cm-&gt;current_frame_seg_map)</span>
<span class="lineNum">     435 </span><span class="lineNoCov">          0 :     memset(cm-&gt;current_frame_seg_map, 0, (cm-&gt;mi_rows * cm-&gt;mi_cols));</span>
<span class="lineNum">     436 </span>            : 
<span class="lineNum">     437 </span>            :   // Reset the mode ref deltas for loop filter
<span class="lineNum">     438 </span><span class="lineNoCov">          0 :   vp9_zero(lf-&gt;last_ref_deltas);</span>
<span class="lineNum">     439 </span><span class="lineNoCov">          0 :   vp9_zero(lf-&gt;last_mode_deltas);</span>
<span class="lineNum">     440 </span><span class="lineNoCov">          0 :   set_default_lf_deltas(lf);</span>
<span class="lineNum">     441 </span>            : 
<span class="lineNum">     442 </span>            :   // To force update of the sharpness
<span class="lineNum">     443 </span><span class="lineNoCov">          0 :   lf-&gt;last_sharpness_level = -1;</span>
<span class="lineNum">     444 </span>            : 
<span class="lineNum">     445 </span><span class="lineNoCov">          0 :   vp9_default_coef_probs(cm);</span>
<span class="lineNum">     446 </span><span class="lineNoCov">          0 :   init_mode_probs(cm-&gt;fc);</span>
<span class="lineNum">     447 </span><span class="lineNoCov">          0 :   vp9_init_mv_probs(cm);</span>
<span class="lineNum">     448 </span><span class="lineNoCov">          0 :   cm-&gt;fc-&gt;initialized = 1;</span>
<span class="lineNum">     449 </span>            : 
<span class="lineNum">     450 </span><span class="lineNoCov">          0 :   if (cm-&gt;frame_type == KEY_FRAME || cm-&gt;error_resilient_mode ||</span>
<span class="lineNum">     451 </span><span class="lineNoCov">          0 :       cm-&gt;reset_frame_context == 3) {</span>
<span class="lineNum">     452 </span>            :     // Reset all frame contexts.
<span class="lineNum">     453 </span><span class="lineNoCov">          0 :     for (i = 0; i &lt; FRAME_CONTEXTS; ++i) cm-&gt;frame_contexts[i] = *cm-&gt;fc;</span>
<span class="lineNum">     454 </span><span class="lineNoCov">          0 :   } else if (cm-&gt;reset_frame_context == 2) {</span>
<span class="lineNum">     455 </span>            :     // Reset only the frame context specified in the frame header.
<span class="lineNum">     456 </span><span class="lineNoCov">          0 :     cm-&gt;frame_contexts[cm-&gt;frame_context_idx] = *cm-&gt;fc;</span>
<span class="lineNum">     457 </span>            :   }
<span class="lineNum">     458 </span>            : 
<span class="lineNum">     459 </span>            :   // prev_mip will only be allocated in encoder.
<span class="lineNum">     460 </span><span class="lineNoCov">          0 :   if (frame_is_intra_only(cm) &amp;&amp; cm-&gt;prev_mip &amp;&amp; !cm-&gt;frame_parallel_decode)</span>
<span class="lineNum">     461 </span><span class="lineNoCov">          0 :     memset(cm-&gt;prev_mip, 0,</span>
<span class="lineNum">     462 </span><span class="lineNoCov">          0 :            cm-&gt;mi_stride * (cm-&gt;mi_rows + 1) * sizeof(*cm-&gt;prev_mip));</span>
<span class="lineNum">     463 </span>            : 
<span class="lineNum">     464 </span><span class="lineNoCov">          0 :   vp9_zero(cm-&gt;ref_frame_sign_bias);</span>
<span class="lineNum">     465 </span>            : 
<span class="lineNum">     466 </span><span class="lineNoCov">          0 :   cm-&gt;frame_context_idx = 0;</span>
<span class="lineNum">     467 </span><span class="lineNoCov">          0 : }</span>
</pre>
      </td>
    </tr>
  </table>
  <br>

  <table width="100%" border=0 cellspacing=0 cellpadding=0>
    <tr><td class="ruler"><img src="../../../../../glass.png" width=3 height=3 alt=""></td></tr>
    <tr><td class="versionInfo">Generated by: <a href="http://ltp.sourceforge.net/coverage/lcov.php" target="_parent">LCOV version 1.13</a></td></tr>
  </table>
  <br>

</body>
</html>
