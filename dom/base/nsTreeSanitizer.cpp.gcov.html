<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">

<html lang="en">

<head>
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
  <title>LCOV - output.info - dom/base/nsTreeSanitizer.cpp</title>
  <link rel="stylesheet" type="text/css" href="../../gcov.css">
</head>

<body>

  <table width="100%" border=0 cellspacing=0 cellpadding=0>
    <tr><td class="title">LCOV - code coverage report</td></tr>
    <tr><td class="ruler"><img src="../../glass.png" width=3 height=3 alt=""></td></tr>

    <tr>
      <td width="100%">
        <table cellpadding=1 border=0 width="100%">
          <tr>
            <td width="10%" class="headerItem">Current view:</td>
            <td width="35%" class="headerValue"><a href="../../index.html">top level</a> - <a href="index.html">dom/base</a> - nsTreeSanitizer.cpp<span style="font-size: 80%;"> (source / <a href="nsTreeSanitizer.cpp.func-sort-c.html">functions</a>)</span></td>
            <td width="5%"></td>
            <td width="15%"></td>
            <td width="10%" class="headerCovTableHead">Hit</td>
            <td width="10%" class="headerCovTableHead">Total</td>
            <td width="15%" class="headerCovTableHead">Coverage</td>
          </tr>
          <tr>
            <td class="headerItem">Test:</td>
            <td class="headerValue">output.info</td>
            <td></td>
            <td class="headerItem">Lines:</td>
            <td class="headerCovTableEntry">0</td>
            <td class="headerCovTableEntry">343</td>
            <td class="headerCovTableEntryLo">0.0 %</td>
          </tr>
          <tr>
            <td class="headerItem">Date:</td>
            <td class="headerValue">2017-07-14 16:53:18</td>
            <td></td>
            <td class="headerItem">Functions:</td>
            <td class="headerCovTableEntry">0</td>
            <td class="headerCovTableEntry">14</td>
            <td class="headerCovTableEntryLo">0.0 %</td>
          </tr>
          <tr>
            <td class="headerItem">Legend:</td>
            <td class="headerValueLeg">            Lines:
            <span class="coverLegendCov">hit</span>
            <span class="coverLegendNoCov">not hit</span>
</td>
            <td></td>
          </tr>
          <tr><td><img src="../../glass.png" width=3 height=3 alt=""></td></tr>
        </table>
      </td>
    </tr>

    <tr><td class="ruler"><img src="../../glass.png" width=3 height=3 alt=""></td></tr>
  </table>

  <table cellpadding=0 cellspacing=0 border=0>
    <tr>
      <td><br></td>
    </tr>
    <tr>
      <td>
<pre class="sourceHeading">          Line data    Source code</pre>
<pre class="source">
<a name="1"><span class="lineNum">       1 </span>            : /* -*- Mode: C++; tab-width: 8; indent-tabs-mode: nil; c-basic-offset: 2 -*- */</a>
<span class="lineNum">       2 </span>            : /* vim: set ts=8 sts=2 et sw=2 tw=80: */
<span class="lineNum">       3 </span>            : /* This Source Code Form is subject to the terms of the Mozilla Public
<span class="lineNum">       4 </span>            :  * License, v. 2.0. If a copy of the MPL was not distributed with this
<span class="lineNum">       5 </span>            :  * file, You can obtain one at http://mozilla.org/MPL/2.0/. */
<span class="lineNum">       6 </span>            : 
<span class="lineNum">       7 </span>            : #include &quot;nsTreeSanitizer.h&quot;
<span class="lineNum">       8 </span>            : 
<span class="lineNum">       9 </span>            : #include &quot;mozilla/ArrayUtils.h&quot;
<span class="lineNum">      10 </span>            : #include &quot;mozilla/StyleSheetInlines.h&quot;
<span class="lineNum">      11 </span>            : #include &quot;mozilla/css/Declaration.h&quot;
<span class="lineNum">      12 </span>            : #include &quot;mozilla/css/StyleRule.h&quot;
<span class="lineNum">      13 </span>            : #include &quot;mozilla/css/Rule.h&quot;
<span class="lineNum">      14 </span>            : #include &quot;nsCSSParser.h&quot;
<span class="lineNum">      15 </span>            : #include &quot;nsCSSPropertyID.h&quot;
<span class="lineNum">      16 </span>            : #include &quot;nsUnicharInputStream.h&quot;
<span class="lineNum">      17 </span>            : #include &quot;nsIDOMCSSRule.h&quot;
<span class="lineNum">      18 </span>            : #include &quot;nsAttrName.h&quot;
<span class="lineNum">      19 </span>            : #include &quot;nsIScriptSecurityManager.h&quot;
<span class="lineNum">      20 </span>            : #include &quot;nsNetUtil.h&quot;
<span class="lineNum">      21 </span>            : #include &quot;nsComponentManagerUtils.h&quot;
<span class="lineNum">      22 </span>            : #include &quot;NullPrincipal.h&quot;
<span class="lineNum">      23 </span>            : #include &quot;nsContentUtils.h&quot;
<span class="lineNum">      24 </span>            : #include &quot;nsIParserUtils.h&quot;
<span class="lineNum">      25 </span>            : #include &quot;nsIDocument.h&quot;
<span class="lineNum">      26 </span>            : #include &quot;nsQueryObject.h&quot;
<span class="lineNum">      27 </span>            : 
<span class="lineNum">      28 </span>            : using namespace mozilla;
<span class="lineNum">      29 </span>            : 
<span class="lineNum">      30 </span>            : //
<span class="lineNum">      31 </span>            : // Thanks to Mark Pilgrim and Sam Ruby for the initial whitelist
<span class="lineNum">      32 </span>            : //
<span class="lineNum">      33 </span>            : nsIAtom** const kElementsHTML[] = {
<span class="lineNum">      34 </span>            :   &amp;nsGkAtoms::a,
<span class="lineNum">      35 </span>            :   &amp;nsGkAtoms::abbr,
<span class="lineNum">      36 </span>            :   &amp;nsGkAtoms::acronym,
<span class="lineNum">      37 </span>            :   &amp;nsGkAtoms::address,
<span class="lineNum">      38 </span>            :   &amp;nsGkAtoms::area,
<span class="lineNum">      39 </span>            :   &amp;nsGkAtoms::article,
<span class="lineNum">      40 </span>            :   &amp;nsGkAtoms::aside,
<span class="lineNum">      41 </span>            :   &amp;nsGkAtoms::audio,
<span class="lineNum">      42 </span>            :   &amp;nsGkAtoms::b,
<span class="lineNum">      43 </span>            :   &amp;nsGkAtoms::bdi,
<span class="lineNum">      44 </span>            :   &amp;nsGkAtoms::bdo,
<span class="lineNum">      45 </span>            :   &amp;nsGkAtoms::big,
<span class="lineNum">      46 </span>            :   &amp;nsGkAtoms::blockquote,
<span class="lineNum">      47 </span>            :   // body checked specially
<span class="lineNum">      48 </span>            :   &amp;nsGkAtoms::br,
<span class="lineNum">      49 </span>            :   &amp;nsGkAtoms::button,
<span class="lineNum">      50 </span>            :   &amp;nsGkAtoms::canvas,
<span class="lineNum">      51 </span>            :   &amp;nsGkAtoms::caption,
<span class="lineNum">      52 </span>            :   &amp;nsGkAtoms::center,
<span class="lineNum">      53 </span>            :   &amp;nsGkAtoms::cite,
<span class="lineNum">      54 </span>            :   &amp;nsGkAtoms::code,
<span class="lineNum">      55 </span>            :   &amp;nsGkAtoms::col,
<span class="lineNum">      56 </span>            :   &amp;nsGkAtoms::colgroup,
<span class="lineNum">      57 </span>            :   &amp;nsGkAtoms::datalist,
<span class="lineNum">      58 </span>            :   &amp;nsGkAtoms::dd,
<span class="lineNum">      59 </span>            :   &amp;nsGkAtoms::del,
<span class="lineNum">      60 </span>            :   &amp;nsGkAtoms::details,
<span class="lineNum">      61 </span>            :   &amp;nsGkAtoms::dfn,
<span class="lineNum">      62 </span>            :   &amp;nsGkAtoms::dir,
<span class="lineNum">      63 </span>            :   &amp;nsGkAtoms::div,
<span class="lineNum">      64 </span>            :   &amp;nsGkAtoms::dl,
<span class="lineNum">      65 </span>            :   &amp;nsGkAtoms::dt,
<span class="lineNum">      66 </span>            :   &amp;nsGkAtoms::em,
<span class="lineNum">      67 </span>            :   &amp;nsGkAtoms::fieldset,
<span class="lineNum">      68 </span>            :   &amp;nsGkAtoms::figcaption,
<span class="lineNum">      69 </span>            :   &amp;nsGkAtoms::figure,
<span class="lineNum">      70 </span>            :   &amp;nsGkAtoms::font,
<span class="lineNum">      71 </span>            :   &amp;nsGkAtoms::footer,
<span class="lineNum">      72 </span>            :   &amp;nsGkAtoms::form,
<span class="lineNum">      73 </span>            :   &amp;nsGkAtoms::h1,
<span class="lineNum">      74 </span>            :   &amp;nsGkAtoms::h2,
<span class="lineNum">      75 </span>            :   &amp;nsGkAtoms::h3,
<span class="lineNum">      76 </span>            :   &amp;nsGkAtoms::h4,
<span class="lineNum">      77 </span>            :   &amp;nsGkAtoms::h5,
<span class="lineNum">      78 </span>            :   &amp;nsGkAtoms::h6,
<span class="lineNum">      79 </span>            :   // head checked specially
<span class="lineNum">      80 </span>            :   &amp;nsGkAtoms::header,
<span class="lineNum">      81 </span>            :   &amp;nsGkAtoms::hgroup,
<span class="lineNum">      82 </span>            :   &amp;nsGkAtoms::hr,
<span class="lineNum">      83 </span>            :   // html checked specially
<span class="lineNum">      84 </span>            :   &amp;nsGkAtoms::i,
<span class="lineNum">      85 </span>            :   &amp;nsGkAtoms::img,
<span class="lineNum">      86 </span>            :   &amp;nsGkAtoms::input,
<span class="lineNum">      87 </span>            :   &amp;nsGkAtoms::ins,
<span class="lineNum">      88 </span>            :   &amp;nsGkAtoms::kbd,
<span class="lineNum">      89 </span>            :   &amp;nsGkAtoms::label,
<span class="lineNum">      90 </span>            :   &amp;nsGkAtoms::legend,
<span class="lineNum">      91 </span>            :   &amp;nsGkAtoms::li,
<span class="lineNum">      92 </span>            :   &amp;nsGkAtoms::link,
<span class="lineNum">      93 </span>            :   &amp;nsGkAtoms::listing,
<span class="lineNum">      94 </span>            :   &amp;nsGkAtoms::map,
<span class="lineNum">      95 </span>            :   &amp;nsGkAtoms::mark,
<span class="lineNum">      96 </span>            :   &amp;nsGkAtoms::menu,
<span class="lineNum">      97 </span>            :   &amp;nsGkAtoms::meta,
<span class="lineNum">      98 </span>            :   &amp;nsGkAtoms::meter,
<span class="lineNum">      99 </span>            :   &amp;nsGkAtoms::nav,
<span class="lineNum">     100 </span>            :   &amp;nsGkAtoms::nobr,
<span class="lineNum">     101 </span>            :   &amp;nsGkAtoms::noscript,
<span class="lineNum">     102 </span>            :   &amp;nsGkAtoms::ol,
<span class="lineNum">     103 </span>            :   &amp;nsGkAtoms::optgroup,
<span class="lineNum">     104 </span>            :   &amp;nsGkAtoms::option,
<span class="lineNum">     105 </span>            :   &amp;nsGkAtoms::output,
<span class="lineNum">     106 </span>            :   &amp;nsGkAtoms::p,
<span class="lineNum">     107 </span>            :   &amp;nsGkAtoms::pre,
<span class="lineNum">     108 </span>            :   &amp;nsGkAtoms::progress,
<span class="lineNum">     109 </span>            :   &amp;nsGkAtoms::q,
<span class="lineNum">     110 </span>            :   &amp;nsGkAtoms::rb,
<span class="lineNum">     111 </span>            :   &amp;nsGkAtoms::rp,
<span class="lineNum">     112 </span>            :   &amp;nsGkAtoms::rt,
<span class="lineNum">     113 </span>            :   &amp;nsGkAtoms::rtc,
<span class="lineNum">     114 </span>            :   &amp;nsGkAtoms::ruby,
<span class="lineNum">     115 </span>            :   &amp;nsGkAtoms::s,
<span class="lineNum">     116 </span>            :   &amp;nsGkAtoms::samp,
<span class="lineNum">     117 </span>            :   &amp;nsGkAtoms::section,
<span class="lineNum">     118 </span>            :   &amp;nsGkAtoms::select,
<span class="lineNum">     119 </span>            :   &amp;nsGkAtoms::small,
<span class="lineNum">     120 </span>            :   &amp;nsGkAtoms::source,
<span class="lineNum">     121 </span>            :   &amp;nsGkAtoms::span,
<span class="lineNum">     122 </span>            :   &amp;nsGkAtoms::strike,
<span class="lineNum">     123 </span>            :   &amp;nsGkAtoms::strong,
<span class="lineNum">     124 </span>            :   &amp;nsGkAtoms::sub,
<span class="lineNum">     125 </span>            :   &amp;nsGkAtoms::summary,
<span class="lineNum">     126 </span>            :   &amp;nsGkAtoms::sup,
<span class="lineNum">     127 </span>            :   // style checked specially
<span class="lineNum">     128 </span>            :   &amp;nsGkAtoms::table,
<span class="lineNum">     129 </span>            :   &amp;nsGkAtoms::tbody,
<span class="lineNum">     130 </span>            :   &amp;nsGkAtoms::td,
<span class="lineNum">     131 </span>            :   &amp;nsGkAtoms::textarea,
<span class="lineNum">     132 </span>            :   &amp;nsGkAtoms::tfoot,
<span class="lineNum">     133 </span>            :   &amp;nsGkAtoms::th,
<span class="lineNum">     134 </span>            :   &amp;nsGkAtoms::thead,
<span class="lineNum">     135 </span>            :   &amp;nsGkAtoms::time,
<span class="lineNum">     136 </span>            :   // title checked specially
<span class="lineNum">     137 </span>            :   &amp;nsGkAtoms::tr,
<span class="lineNum">     138 </span>            :   &amp;nsGkAtoms::track,
<span class="lineNum">     139 </span>            :   &amp;nsGkAtoms::tt,
<span class="lineNum">     140 </span>            :   &amp;nsGkAtoms::u,
<span class="lineNum">     141 </span>            :   &amp;nsGkAtoms::ul,
<span class="lineNum">     142 </span>            :   &amp;nsGkAtoms::var,
<span class="lineNum">     143 </span>            :   &amp;nsGkAtoms::video,
<span class="lineNum">     144 </span>            :   &amp;nsGkAtoms::wbr,
<span class="lineNum">     145 </span>            :   nullptr
<span class="lineNum">     146 </span>            : };
<span class="lineNum">     147 </span>            : 
<span class="lineNum">     148 </span>            : nsIAtom** const kAttributesHTML[] = {
<span class="lineNum">     149 </span>            :   &amp;nsGkAtoms::abbr,
<span class="lineNum">     150 </span>            :   &amp;nsGkAtoms::accept,
<span class="lineNum">     151 </span>            :   &amp;nsGkAtoms::acceptcharset,
<span class="lineNum">     152 </span>            :   &amp;nsGkAtoms::accesskey,
<span class="lineNum">     153 </span>            :   &amp;nsGkAtoms::action,
<span class="lineNum">     154 </span>            :   &amp;nsGkAtoms::alt,
<span class="lineNum">     155 </span>            :   &amp;nsGkAtoms::as,
<span class="lineNum">     156 </span>            :   &amp;nsGkAtoms::autocomplete,
<span class="lineNum">     157 </span>            :   &amp;nsGkAtoms::autofocus,
<span class="lineNum">     158 </span>            :   &amp;nsGkAtoms::autoplay,
<span class="lineNum">     159 </span>            :   &amp;nsGkAtoms::axis,
<span class="lineNum">     160 </span>            :   &amp;nsGkAtoms::_char,
<span class="lineNum">     161 </span>            :   &amp;nsGkAtoms::charoff,
<span class="lineNum">     162 </span>            :   &amp;nsGkAtoms::charset,
<span class="lineNum">     163 </span>            :   &amp;nsGkAtoms::checked,
<span class="lineNum">     164 </span>            :   &amp;nsGkAtoms::cite,
<span class="lineNum">     165 </span>            :   &amp;nsGkAtoms::_class,
<span class="lineNum">     166 </span>            :   &amp;nsGkAtoms::cols,
<span class="lineNum">     167 </span>            :   &amp;nsGkAtoms::colspan,
<span class="lineNum">     168 </span>            :   &amp;nsGkAtoms::content,
<span class="lineNum">     169 </span>            :   &amp;nsGkAtoms::contenteditable,
<span class="lineNum">     170 </span>            :   &amp;nsGkAtoms::contextmenu,
<span class="lineNum">     171 </span>            :   &amp;nsGkAtoms::controls,
<span class="lineNum">     172 </span>            :   &amp;nsGkAtoms::coords,
<span class="lineNum">     173 </span>            :   &amp;nsGkAtoms::datetime,
<span class="lineNum">     174 </span>            :   &amp;nsGkAtoms::dir,
<span class="lineNum">     175 </span>            :   &amp;nsGkAtoms::disabled,
<span class="lineNum">     176 </span>            :   &amp;nsGkAtoms::draggable,
<span class="lineNum">     177 </span>            :   &amp;nsGkAtoms::enctype,
<span class="lineNum">     178 </span>            :   &amp;nsGkAtoms::face,
<span class="lineNum">     179 </span>            :   &amp;nsGkAtoms::_for,
<span class="lineNum">     180 </span>            :   &amp;nsGkAtoms::frame,
<span class="lineNum">     181 </span>            :   &amp;nsGkAtoms::headers,
<span class="lineNum">     182 </span>            :   &amp;nsGkAtoms::height,
<span class="lineNum">     183 </span>            :   &amp;nsGkAtoms::hidden,
<span class="lineNum">     184 </span>            :   &amp;nsGkAtoms::high,
<span class="lineNum">     185 </span>            :   &amp;nsGkAtoms::href,
<span class="lineNum">     186 </span>            :   &amp;nsGkAtoms::hreflang,
<span class="lineNum">     187 </span>            :   &amp;nsGkAtoms::icon,
<span class="lineNum">     188 </span>            :   &amp;nsGkAtoms::id,
<span class="lineNum">     189 </span>            :   &amp;nsGkAtoms::ismap,
<span class="lineNum">     190 </span>            :   &amp;nsGkAtoms::itemid,
<span class="lineNum">     191 </span>            :   &amp;nsGkAtoms::itemprop,
<span class="lineNum">     192 </span>            :   &amp;nsGkAtoms::itemref,
<span class="lineNum">     193 </span>            :   &amp;nsGkAtoms::itemscope,
<span class="lineNum">     194 </span>            :   &amp;nsGkAtoms::itemtype,
<span class="lineNum">     195 </span>            :   &amp;nsGkAtoms::kind,
<span class="lineNum">     196 </span>            :   &amp;nsGkAtoms::label,
<span class="lineNum">     197 </span>            :   &amp;nsGkAtoms::lang,
<span class="lineNum">     198 </span>            :   &amp;nsGkAtoms::list,
<span class="lineNum">     199 </span>            :   &amp;nsGkAtoms::longdesc,
<span class="lineNum">     200 </span>            :   &amp;nsGkAtoms::loop,
<span class="lineNum">     201 </span>            :   &amp;nsGkAtoms::low,
<span class="lineNum">     202 </span>            :   &amp;nsGkAtoms::max,
<span class="lineNum">     203 </span>            :   &amp;nsGkAtoms::maxlength,
<span class="lineNum">     204 </span>            :   &amp;nsGkAtoms::media,
<span class="lineNum">     205 </span>            :   &amp;nsGkAtoms::method,
<span class="lineNum">     206 </span>            :   &amp;nsGkAtoms::min,
<span class="lineNum">     207 </span>            :   &amp;nsGkAtoms::minlength,
<span class="lineNum">     208 </span>            :   &amp;nsGkAtoms::multiple,
<span class="lineNum">     209 </span>            :   &amp;nsGkAtoms::muted,
<span class="lineNum">     210 </span>            :   &amp;nsGkAtoms::name,
<span class="lineNum">     211 </span>            :   &amp;nsGkAtoms::nohref,
<span class="lineNum">     212 </span>            :   &amp;nsGkAtoms::novalidate,
<span class="lineNum">     213 </span>            :   &amp;nsGkAtoms::nowrap,
<span class="lineNum">     214 </span>            :   &amp;nsGkAtoms::open,
<span class="lineNum">     215 </span>            :   &amp;nsGkAtoms::optimum,
<span class="lineNum">     216 </span>            :   &amp;nsGkAtoms::pattern,
<span class="lineNum">     217 </span>            :   &amp;nsGkAtoms::placeholder,
<span class="lineNum">     218 </span>            :   &amp;nsGkAtoms::playbackrate,
<span class="lineNum">     219 </span>            :   &amp;nsGkAtoms::poster,
<span class="lineNum">     220 </span>            :   &amp;nsGkAtoms::preload,
<span class="lineNum">     221 </span>            :   &amp;nsGkAtoms::prompt,
<span class="lineNum">     222 </span>            :   &amp;nsGkAtoms::pubdate,
<span class="lineNum">     223 </span>            :   &amp;nsGkAtoms::radiogroup,
<span class="lineNum">     224 </span>            :   &amp;nsGkAtoms::readonly,
<span class="lineNum">     225 </span>            :   &amp;nsGkAtoms::rel,
<span class="lineNum">     226 </span>            :   &amp;nsGkAtoms::required,
<span class="lineNum">     227 </span>            :   &amp;nsGkAtoms::rev,
<span class="lineNum">     228 </span>            :   &amp;nsGkAtoms::reversed,
<span class="lineNum">     229 </span>            :   &amp;nsGkAtoms::role,
<span class="lineNum">     230 </span>            :   &amp;nsGkAtoms::rows,
<span class="lineNum">     231 </span>            :   &amp;nsGkAtoms::rowspan,
<span class="lineNum">     232 </span>            :   &amp;nsGkAtoms::rules,
<span class="lineNum">     233 </span>            :   &amp;nsGkAtoms::scoped,
<span class="lineNum">     234 </span>            :   &amp;nsGkAtoms::scope,
<span class="lineNum">     235 </span>            :   &amp;nsGkAtoms::selected,
<span class="lineNum">     236 </span>            :   &amp;nsGkAtoms::shape,
<span class="lineNum">     237 </span>            :   &amp;nsGkAtoms::span,
<span class="lineNum">     238 </span>            :   &amp;nsGkAtoms::spellcheck,
<span class="lineNum">     239 </span>            :   &amp;nsGkAtoms::src,
<span class="lineNum">     240 </span>            :   &amp;nsGkAtoms::srclang,
<span class="lineNum">     241 </span>            :   &amp;nsGkAtoms::start,
<span class="lineNum">     242 </span>            :   &amp;nsGkAtoms::summary,
<span class="lineNum">     243 </span>            :   &amp;nsGkAtoms::tabindex,
<span class="lineNum">     244 </span>            :   &amp;nsGkAtoms::target,
<span class="lineNum">     245 </span>            :   &amp;nsGkAtoms::title,
<span class="lineNum">     246 </span>            :   &amp;nsGkAtoms::type,
<span class="lineNum">     247 </span>            :   &amp;nsGkAtoms::usemap,
<span class="lineNum">     248 </span>            :   &amp;nsGkAtoms::value,
<span class="lineNum">     249 </span>            :   &amp;nsGkAtoms::width,
<span class="lineNum">     250 </span>            :   &amp;nsGkAtoms::wrap,
<span class="lineNum">     251 </span>            :   nullptr
<span class="lineNum">     252 </span>            : };
<span class="lineNum">     253 </span>            : 
<span class="lineNum">     254 </span>            : nsIAtom** const kPresAttributesHTML[] = {
<span class="lineNum">     255 </span>            :   &amp;nsGkAtoms::align,
<span class="lineNum">     256 </span>            :   &amp;nsGkAtoms::background,
<span class="lineNum">     257 </span>            :   &amp;nsGkAtoms::bgcolor,
<span class="lineNum">     258 </span>            :   &amp;nsGkAtoms::border,
<span class="lineNum">     259 </span>            :   &amp;nsGkAtoms::cellpadding,
<span class="lineNum">     260 </span>            :   &amp;nsGkAtoms::cellspacing,
<span class="lineNum">     261 </span>            :   &amp;nsGkAtoms::color,
<span class="lineNum">     262 </span>            :   &amp;nsGkAtoms::compact,
<span class="lineNum">     263 </span>            :   &amp;nsGkAtoms::clear,
<span class="lineNum">     264 </span>            :   &amp;nsGkAtoms::hspace,
<span class="lineNum">     265 </span>            :   &amp;nsGkAtoms::noshade,
<span class="lineNum">     266 </span>            :   &amp;nsGkAtoms::pointSize,
<span class="lineNum">     267 </span>            :   &amp;nsGkAtoms::size,
<span class="lineNum">     268 </span>            :   &amp;nsGkAtoms::valign,
<span class="lineNum">     269 </span>            :   &amp;nsGkAtoms::vspace,
<span class="lineNum">     270 </span>            :   nullptr
<span class="lineNum">     271 </span>            : };
<span class="lineNum">     272 </span>            : 
<span class="lineNum">     273 </span>            : nsIAtom** const kURLAttributesHTML[] = {
<span class="lineNum">     274 </span>            :   &amp;nsGkAtoms::action,
<span class="lineNum">     275 </span>            :   &amp;nsGkAtoms::href,
<span class="lineNum">     276 </span>            :   &amp;nsGkAtoms::src,
<span class="lineNum">     277 </span>            :   &amp;nsGkAtoms::longdesc,
<span class="lineNum">     278 </span>            :   &amp;nsGkAtoms::cite,
<span class="lineNum">     279 </span>            :   &amp;nsGkAtoms::background,
<span class="lineNum">     280 </span>            :   nullptr
<span class="lineNum">     281 </span>            : };
<span class="lineNum">     282 </span>            : 
<span class="lineNum">     283 </span>            : nsIAtom** const kElementsSVG[] = {
<span class="lineNum">     284 </span>            :   &amp;nsGkAtoms::a, // a
<span class="lineNum">     285 </span>            :   &amp;nsGkAtoms::circle, // circle
<span class="lineNum">     286 </span>            :   &amp;nsGkAtoms::clipPath, // clipPath
<span class="lineNum">     287 </span>            :   &amp;nsGkAtoms::colorProfile, // color-profile
<span class="lineNum">     288 </span>            :   &amp;nsGkAtoms::cursor, // cursor
<span class="lineNum">     289 </span>            :   &amp;nsGkAtoms::defs, // defs
<span class="lineNum">     290 </span>            :   &amp;nsGkAtoms::desc, // desc
<span class="lineNum">     291 </span>            :   &amp;nsGkAtoms::ellipse, // ellipse
<span class="lineNum">     292 </span>            :   &amp;nsGkAtoms::elevation, // elevation
<span class="lineNum">     293 </span>            :   &amp;nsGkAtoms::erode, // erode
<span class="lineNum">     294 </span>            :   &amp;nsGkAtoms::ex, // ex
<span class="lineNum">     295 </span>            :   &amp;nsGkAtoms::exact, // exact
<span class="lineNum">     296 </span>            :   &amp;nsGkAtoms::exponent, // exponent
<span class="lineNum">     297 </span>            :   &amp;nsGkAtoms::feBlend, // feBlend
<span class="lineNum">     298 </span>            :   &amp;nsGkAtoms::feColorMatrix, // feColorMatrix
<span class="lineNum">     299 </span>            :   &amp;nsGkAtoms::feComponentTransfer, // feComponentTransfer
<span class="lineNum">     300 </span>            :   &amp;nsGkAtoms::feComposite, // feComposite
<span class="lineNum">     301 </span>            :   &amp;nsGkAtoms::feConvolveMatrix, // feConvolveMatrix
<span class="lineNum">     302 </span>            :   &amp;nsGkAtoms::feDiffuseLighting, // feDiffuseLighting
<span class="lineNum">     303 </span>            :   &amp;nsGkAtoms::feDisplacementMap, // feDisplacementMap
<span class="lineNum">     304 </span>            :   &amp;nsGkAtoms::feDistantLight, // feDistantLight
<span class="lineNum">     305 </span>            :   &amp;nsGkAtoms::feDropShadow, // feDropShadow
<span class="lineNum">     306 </span>            :   &amp;nsGkAtoms::feFlood, // feFlood
<span class="lineNum">     307 </span>            :   &amp;nsGkAtoms::feFuncA, // feFuncA
<span class="lineNum">     308 </span>            :   &amp;nsGkAtoms::feFuncB, // feFuncB
<span class="lineNum">     309 </span>            :   &amp;nsGkAtoms::feFuncG, // feFuncG
<span class="lineNum">     310 </span>            :   &amp;nsGkAtoms::feFuncR, // feFuncR
<span class="lineNum">     311 </span>            :   &amp;nsGkAtoms::feGaussianBlur, // feGaussianBlur
<span class="lineNum">     312 </span>            :   &amp;nsGkAtoms::feImage, // feImage
<span class="lineNum">     313 </span>            :   &amp;nsGkAtoms::feMerge, // feMerge
<span class="lineNum">     314 </span>            :   &amp;nsGkAtoms::feMergeNode, // feMergeNode
<span class="lineNum">     315 </span>            :   &amp;nsGkAtoms::feMorphology, // feMorphology
<span class="lineNum">     316 </span>            :   &amp;nsGkAtoms::feOffset, // feOffset
<span class="lineNum">     317 </span>            :   &amp;nsGkAtoms::fePointLight, // fePointLight
<span class="lineNum">     318 </span>            :   &amp;nsGkAtoms::feSpecularLighting, // feSpecularLighting
<span class="lineNum">     319 </span>            :   &amp;nsGkAtoms::feSpotLight, // feSpotLight
<span class="lineNum">     320 </span>            :   &amp;nsGkAtoms::feTile, // feTile
<span class="lineNum">     321 </span>            :   &amp;nsGkAtoms::feTurbulence, // feTurbulence
<span class="lineNum">     322 </span>            :   &amp;nsGkAtoms::filter, // filter
<span class="lineNum">     323 </span>            :   &amp;nsGkAtoms::font, // font
<span class="lineNum">     324 </span>            :   &amp;nsGkAtoms::font_face, // font-face
<span class="lineNum">     325 </span>            :   &amp;nsGkAtoms::font_face_format, // font-face-format
<span class="lineNum">     326 </span>            :   &amp;nsGkAtoms::font_face_name, // font-face-name
<span class="lineNum">     327 </span>            :   &amp;nsGkAtoms::font_face_src, // font-face-src
<span class="lineNum">     328 </span>            :   &amp;nsGkAtoms::font_face_uri, // font-face-uri
<span class="lineNum">     329 </span>            :   &amp;nsGkAtoms::foreignObject, // foreignObject
<span class="lineNum">     330 </span>            :   &amp;nsGkAtoms::g, // g
<span class="lineNum">     331 </span>            :   // glyph
<span class="lineNum">     332 </span>            :   &amp;nsGkAtoms::glyphRef, // glyphRef
<span class="lineNum">     333 </span>            :   // hkern
<span class="lineNum">     334 </span>            :   &amp;nsGkAtoms::image, // image
<span class="lineNum">     335 </span>            :   &amp;nsGkAtoms::line, // line
<span class="lineNum">     336 </span>            :   &amp;nsGkAtoms::linearGradient, // linearGradient
<span class="lineNum">     337 </span>            :   &amp;nsGkAtoms::marker, // marker
<span class="lineNum">     338 </span>            :   &amp;nsGkAtoms::mask, // mask
<span class="lineNum">     339 </span>            :   &amp;nsGkAtoms::metadata, // metadata
<span class="lineNum">     340 </span>            :   &amp;nsGkAtoms::missingGlyph, // missingGlyph
<span class="lineNum">     341 </span>            :   &amp;nsGkAtoms::mpath, // mpath
<span class="lineNum">     342 </span>            :   &amp;nsGkAtoms::path, // path
<span class="lineNum">     343 </span>            :   &amp;nsGkAtoms::pattern, // pattern
<span class="lineNum">     344 </span>            :   &amp;nsGkAtoms::polygon, // polygon
<span class="lineNum">     345 </span>            :   &amp;nsGkAtoms::polyline, // polyline
<span class="lineNum">     346 </span>            :   &amp;nsGkAtoms::radialGradient, // radialGradient
<span class="lineNum">     347 </span>            :   &amp;nsGkAtoms::rect, // rect
<span class="lineNum">     348 </span>            :   &amp;nsGkAtoms::stop, // stop
<span class="lineNum">     349 </span>            :   &amp;nsGkAtoms::svg, // svg
<span class="lineNum">     350 </span>            :   &amp;nsGkAtoms::svgSwitch, // switch
<span class="lineNum">     351 </span>            :   &amp;nsGkAtoms::symbol, // symbol
<span class="lineNum">     352 </span>            :   &amp;nsGkAtoms::text, // text
<span class="lineNum">     353 </span>            :   &amp;nsGkAtoms::textPath, // textPath
<span class="lineNum">     354 </span>            :   &amp;nsGkAtoms::title, // title
<span class="lineNum">     355 </span>            :   &amp;nsGkAtoms::tref, // tref
<span class="lineNum">     356 </span>            :   &amp;nsGkAtoms::tspan, // tspan
<span class="lineNum">     357 </span>            :   &amp;nsGkAtoms::use, // use
<span class="lineNum">     358 </span>            :   &amp;nsGkAtoms::view, // view
<span class="lineNum">     359 </span>            :   // vkern
<span class="lineNum">     360 </span>            :   nullptr
<span class="lineNum">     361 </span>            : };
<span class="lineNum">     362 </span>            : 
<span class="lineNum">     363 </span>            : nsIAtom** const kAttributesSVG[] = {
<span class="lineNum">     364 </span>            :   // accent-height
<span class="lineNum">     365 </span>            :   &amp;nsGkAtoms::accumulate, // accumulate
<span class="lineNum">     366 </span>            :   &amp;nsGkAtoms::additive, // additive
<span class="lineNum">     367 </span>            :   &amp;nsGkAtoms::alignment_baseline, // alignment-baseline
<span class="lineNum">     368 </span>            :   // alphabetic
<span class="lineNum">     369 </span>            :   &amp;nsGkAtoms::amplitude, // amplitude
<span class="lineNum">     370 </span>            :   // arabic-form
<span class="lineNum">     371 </span>            :   // ascent
<span class="lineNum">     372 </span>            :   &amp;nsGkAtoms::attributeName, // attributeName
<span class="lineNum">     373 </span>            :   &amp;nsGkAtoms::attributeType, // attributeType
<span class="lineNum">     374 </span>            :   &amp;nsGkAtoms::azimuth, // azimuth
<span class="lineNum">     375 </span>            :   &amp;nsGkAtoms::baseFrequency, // baseFrequency
<span class="lineNum">     376 </span>            :   &amp;nsGkAtoms::baseline_shift, // baseline-shift
<span class="lineNum">     377 </span>            :   // baseProfile
<span class="lineNum">     378 </span>            :   // bbox
<span class="lineNum">     379 </span>            :   &amp;nsGkAtoms::begin, // begin
<span class="lineNum">     380 </span>            :   &amp;nsGkAtoms::bias, // bias
<span class="lineNum">     381 </span>            :   &amp;nsGkAtoms::by, // by
<span class="lineNum">     382 </span>            :   &amp;nsGkAtoms::calcMode, // calcMode
<span class="lineNum">     383 </span>            :   // cap-height
<span class="lineNum">     384 </span>            :   &amp;nsGkAtoms::_class, // class
<span class="lineNum">     385 </span>            :   &amp;nsGkAtoms::clip_path, // clip-path
<span class="lineNum">     386 </span>            :   &amp;nsGkAtoms::clip_rule, // clip-rule
<span class="lineNum">     387 </span>            :   &amp;nsGkAtoms::clipPathUnits, // clipPathUnits
<span class="lineNum">     388 </span>            :   &amp;nsGkAtoms::color, // color
<span class="lineNum">     389 </span>            :   &amp;nsGkAtoms::colorInterpolation, // color-interpolation
<span class="lineNum">     390 </span>            :   &amp;nsGkAtoms::colorInterpolationFilters, // color-interpolation-filters
<span class="lineNum">     391 </span>            :   &amp;nsGkAtoms::cursor, // cursor
<span class="lineNum">     392 </span>            :   &amp;nsGkAtoms::cx, // cx
<span class="lineNum">     393 </span>            :   &amp;nsGkAtoms::cy, // cy
<span class="lineNum">     394 </span>            :   &amp;nsGkAtoms::d, // d
<span class="lineNum">     395 </span>            :   // descent
<span class="lineNum">     396 </span>            :   &amp;nsGkAtoms::diffuseConstant, // diffuseConstant
<span class="lineNum">     397 </span>            :   &amp;nsGkAtoms::direction, // direction
<span class="lineNum">     398 </span>            :   &amp;nsGkAtoms::display, // display
<span class="lineNum">     399 </span>            :   &amp;nsGkAtoms::divisor, // divisor
<span class="lineNum">     400 </span>            :   &amp;nsGkAtoms::dominant_baseline, // dominant-baseline
<span class="lineNum">     401 </span>            :   &amp;nsGkAtoms::dur, // dur
<span class="lineNum">     402 </span>            :   &amp;nsGkAtoms::dx, // dx
<span class="lineNum">     403 </span>            :   &amp;nsGkAtoms::dy, // dy
<span class="lineNum">     404 </span>            :   &amp;nsGkAtoms::edgeMode, // edgeMode
<span class="lineNum">     405 </span>            :   &amp;nsGkAtoms::elevation, // elevation
<span class="lineNum">     406 </span>            :   // enable-background
<span class="lineNum">     407 </span>            :   &amp;nsGkAtoms::end, // end
<span class="lineNum">     408 </span>            :   &amp;nsGkAtoms::fill, // fill
<span class="lineNum">     409 </span>            :   &amp;nsGkAtoms::fill_opacity, // fill-opacity
<span class="lineNum">     410 </span>            :   &amp;nsGkAtoms::fill_rule, // fill-rule
<span class="lineNum">     411 </span>            :   &amp;nsGkAtoms::filter, // filter
<span class="lineNum">     412 </span>            :   &amp;nsGkAtoms::filterUnits, // filterUnits
<span class="lineNum">     413 </span>            :   &amp;nsGkAtoms::flood_color, // flood-color
<span class="lineNum">     414 </span>            :   &amp;nsGkAtoms::flood_opacity, // flood-opacity
<span class="lineNum">     415 </span>            :   // XXX focusable
<span class="lineNum">     416 </span>            :   &amp;nsGkAtoms::font, // font
<span class="lineNum">     417 </span>            :   &amp;nsGkAtoms::font_family, // font-family
<span class="lineNum">     418 </span>            :   &amp;nsGkAtoms::font_size, // font-size
<span class="lineNum">     419 </span>            :   &amp;nsGkAtoms::font_size_adjust, // font-size-adjust
<span class="lineNum">     420 </span>            :   &amp;nsGkAtoms::font_stretch, // font-stretch
<span class="lineNum">     421 </span>            :   &amp;nsGkAtoms::font_style, // font-style
<span class="lineNum">     422 </span>            :   &amp;nsGkAtoms::font_variant, // font-variant
<span class="lineNum">     423 </span>            :   &amp;nsGkAtoms::fontWeight, // font-weight
<span class="lineNum">     424 </span>            :   &amp;nsGkAtoms::format, // format
<span class="lineNum">     425 </span>            :   &amp;nsGkAtoms::from, // from
<span class="lineNum">     426 </span>            :   &amp;nsGkAtoms::fx, // fx
<span class="lineNum">     427 </span>            :   &amp;nsGkAtoms::fy, // fy
<span class="lineNum">     428 </span>            :   // g1
<span class="lineNum">     429 </span>            :   // g2
<span class="lineNum">     430 </span>            :   // glyph-name
<span class="lineNum">     431 </span>            :   // glyphRef
<span class="lineNum">     432 </span>            :   // glyph-orientation-horizontal
<span class="lineNum">     433 </span>            :   // glyph-orientation-vertical
<span class="lineNum">     434 </span>            :   &amp;nsGkAtoms::gradientTransform, // gradientTransform
<span class="lineNum">     435 </span>            :   &amp;nsGkAtoms::gradientUnits, // gradientUnits
<span class="lineNum">     436 </span>            :   &amp;nsGkAtoms::height, // height
<span class="lineNum">     437 </span>            :   // horiz-adv-x
<span class="lineNum">     438 </span>            :   // horiz-origin-x
<span class="lineNum">     439 </span>            :   // horiz-origin-y
<span class="lineNum">     440 </span>            :   &amp;nsGkAtoms::id, // id
<span class="lineNum">     441 </span>            :   // ideographic
<span class="lineNum">     442 </span>            :   &amp;nsGkAtoms::image_rendering, // image-rendering
<span class="lineNum">     443 </span>            :   &amp;nsGkAtoms::in, // in
<span class="lineNum">     444 </span>            :   &amp;nsGkAtoms::in2, // in2
<span class="lineNum">     445 </span>            :   &amp;nsGkAtoms::intercept, // intercept
<span class="lineNum">     446 </span>            :   // k
<span class="lineNum">     447 </span>            :   &amp;nsGkAtoms::k1, // k1
<span class="lineNum">     448 </span>            :   &amp;nsGkAtoms::k2, // k2
<span class="lineNum">     449 </span>            :   &amp;nsGkAtoms::k3, // k3
<span class="lineNum">     450 </span>            :   &amp;nsGkAtoms::k4, // k4
<span class="lineNum">     451 </span>            :   // kerning
<span class="lineNum">     452 </span>            :   &amp;nsGkAtoms::kernelMatrix, // kernelMatrix
<span class="lineNum">     453 </span>            :   &amp;nsGkAtoms::kernelUnitLength, // kernelUnitLength
<span class="lineNum">     454 </span>            :   &amp;nsGkAtoms::keyPoints, // keyPoints
<span class="lineNum">     455 </span>            :   &amp;nsGkAtoms::keySplines, // keySplines
<span class="lineNum">     456 </span>            :   &amp;nsGkAtoms::keyTimes, // keyTimes
<span class="lineNum">     457 </span>            :   &amp;nsGkAtoms::lang, // lang
<span class="lineNum">     458 </span>            :   // lengthAdjust
<span class="lineNum">     459 </span>            :   &amp;nsGkAtoms::letter_spacing, // letter-spacing
<span class="lineNum">     460 </span>            :   &amp;nsGkAtoms::lighting_color, // lighting-color
<span class="lineNum">     461 </span>            :   &amp;nsGkAtoms::limitingConeAngle, // limitingConeAngle
<span class="lineNum">     462 </span>            :   // local
<span class="lineNum">     463 </span>            :   &amp;nsGkAtoms::marker, // marker
<span class="lineNum">     464 </span>            :   &amp;nsGkAtoms::marker_end, // marker-end
<span class="lineNum">     465 </span>            :   &amp;nsGkAtoms::marker_mid, // marker-mid
<span class="lineNum">     466 </span>            :   &amp;nsGkAtoms::marker_start, // marker-start
<span class="lineNum">     467 </span>            :   &amp;nsGkAtoms::markerHeight, // markerHeight
<span class="lineNum">     468 </span>            :   &amp;nsGkAtoms::markerUnits, // markerUnits
<span class="lineNum">     469 </span>            :   &amp;nsGkAtoms::markerWidth, // markerWidth
<span class="lineNum">     470 </span>            :   &amp;nsGkAtoms::mask, // mask
<span class="lineNum">     471 </span>            :   &amp;nsGkAtoms::maskContentUnits, // maskContentUnits
<span class="lineNum">     472 </span>            :   &amp;nsGkAtoms::maskUnits, // maskUnits
<span class="lineNum">     473 </span>            :   // mathematical
<span class="lineNum">     474 </span>            :   &amp;nsGkAtoms::max, // max
<span class="lineNum">     475 </span>            :   &amp;nsGkAtoms::media, // media
<span class="lineNum">     476 </span>            :   &amp;nsGkAtoms::method, // method
<span class="lineNum">     477 </span>            :   &amp;nsGkAtoms::min, // min
<span class="lineNum">     478 </span>            :   &amp;nsGkAtoms::mode, // mode
<span class="lineNum">     479 </span>            :   &amp;nsGkAtoms::name, // name
<span class="lineNum">     480 </span>            :   &amp;nsGkAtoms::numOctaves, // numOctaves
<span class="lineNum">     481 </span>            :   &amp;nsGkAtoms::offset, // offset
<span class="lineNum">     482 </span>            :   &amp;nsGkAtoms::opacity, // opacity
<span class="lineNum">     483 </span>            :   &amp;nsGkAtoms::_operator, // operator
<span class="lineNum">     484 </span>            :   &amp;nsGkAtoms::order, // order
<span class="lineNum">     485 </span>            :   &amp;nsGkAtoms::orient, // orient
<span class="lineNum">     486 </span>            :   &amp;nsGkAtoms::orientation, // orientation
<span class="lineNum">     487 </span>            :   // origin
<span class="lineNum">     488 </span>            :   // overline-position
<span class="lineNum">     489 </span>            :   // overline-thickness
<span class="lineNum">     490 </span>            :   &amp;nsGkAtoms::overflow, // overflow
<span class="lineNum">     491 </span>            :   // panose-1
<span class="lineNum">     492 </span>            :   &amp;nsGkAtoms::path, // path
<span class="lineNum">     493 </span>            :   &amp;nsGkAtoms::pathLength, // pathLength
<span class="lineNum">     494 </span>            :   &amp;nsGkAtoms::patternContentUnits, // patternContentUnits
<span class="lineNum">     495 </span>            :   &amp;nsGkAtoms::patternTransform, // patternTransform
<span class="lineNum">     496 </span>            :   &amp;nsGkAtoms::patternUnits, // patternUnits
<span class="lineNum">     497 </span>            :   &amp;nsGkAtoms::pointer_events, // pointer-events XXX is this safe?
<span class="lineNum">     498 </span>            :   &amp;nsGkAtoms::points, // points
<span class="lineNum">     499 </span>            :   &amp;nsGkAtoms::pointsAtX, // pointsAtX
<span class="lineNum">     500 </span>            :   &amp;nsGkAtoms::pointsAtY, // pointsAtY
<span class="lineNum">     501 </span>            :   &amp;nsGkAtoms::pointsAtZ, // pointsAtZ
<span class="lineNum">     502 </span>            :   &amp;nsGkAtoms::preserveAlpha, // preserveAlpha
<span class="lineNum">     503 </span>            :   &amp;nsGkAtoms::preserveAspectRatio, // preserveAspectRatio
<span class="lineNum">     504 </span>            :   &amp;nsGkAtoms::primitiveUnits, // primitiveUnits
<span class="lineNum">     505 </span>            :   &amp;nsGkAtoms::r, // r
<span class="lineNum">     506 </span>            :   &amp;nsGkAtoms::radius, // radius
<span class="lineNum">     507 </span>            :   &amp;nsGkAtoms::refX, // refX
<span class="lineNum">     508 </span>            :   &amp;nsGkAtoms::refY, // refY
<span class="lineNum">     509 </span>            :   &amp;nsGkAtoms::repeatCount, // repeatCount
<span class="lineNum">     510 </span>            :   &amp;nsGkAtoms::repeatDur, // repeatDur
<span class="lineNum">     511 </span>            :   &amp;nsGkAtoms::requiredExtensions, // requiredExtensions
<span class="lineNum">     512 </span>            :   &amp;nsGkAtoms::requiredFeatures, // requiredFeatures
<span class="lineNum">     513 </span>            :   &amp;nsGkAtoms::restart, // restart
<span class="lineNum">     514 </span>            :   &amp;nsGkAtoms::result, // result
<span class="lineNum">     515 </span>            :   &amp;nsGkAtoms::rotate, // rotate
<span class="lineNum">     516 </span>            :   &amp;nsGkAtoms::rx, // rx
<span class="lineNum">     517 </span>            :   &amp;nsGkAtoms::ry, // ry
<span class="lineNum">     518 </span>            :   &amp;nsGkAtoms::scale, // scale
<span class="lineNum">     519 </span>            :   &amp;nsGkAtoms::seed, // seed
<span class="lineNum">     520 </span>            :   &amp;nsGkAtoms::shape_rendering, // shape-rendering
<span class="lineNum">     521 </span>            :   &amp;nsGkAtoms::slope, // slope
<span class="lineNum">     522 </span>            :   &amp;nsGkAtoms::spacing, // spacing
<span class="lineNum">     523 </span>            :   &amp;nsGkAtoms::specularConstant, // specularConstant
<span class="lineNum">     524 </span>            :   &amp;nsGkAtoms::specularExponent, // specularExponent
<span class="lineNum">     525 </span>            :   &amp;nsGkAtoms::spreadMethod, // spreadMethod
<span class="lineNum">     526 </span>            :   &amp;nsGkAtoms::startOffset, // startOffset
<span class="lineNum">     527 </span>            :   &amp;nsGkAtoms::stdDeviation, // stdDeviation
<span class="lineNum">     528 </span>            :   // stemh
<span class="lineNum">     529 </span>            :   // stemv
<span class="lineNum">     530 </span>            :   &amp;nsGkAtoms::stitchTiles, // stitchTiles
<span class="lineNum">     531 </span>            :   &amp;nsGkAtoms::stop_color, // stop-color
<span class="lineNum">     532 </span>            :   &amp;nsGkAtoms::stop_opacity, // stop-opacity
<span class="lineNum">     533 </span>            :   // strikethrough-position
<span class="lineNum">     534 </span>            :   // strikethrough-thickness
<span class="lineNum">     535 </span>            :   &amp;nsGkAtoms::string, // string
<span class="lineNum">     536 </span>            :   &amp;nsGkAtoms::stroke, // stroke
<span class="lineNum">     537 </span>            :   &amp;nsGkAtoms::stroke_dasharray, // stroke-dasharray
<span class="lineNum">     538 </span>            :   &amp;nsGkAtoms::stroke_dashoffset, // stroke-dashoffset
<span class="lineNum">     539 </span>            :   &amp;nsGkAtoms::stroke_linecap, // stroke-linecap
<span class="lineNum">     540 </span>            :   &amp;nsGkAtoms::stroke_linejoin, // stroke-linejoin
<span class="lineNum">     541 </span>            :   &amp;nsGkAtoms::stroke_miterlimit, // stroke-miterlimit
<span class="lineNum">     542 </span>            :   &amp;nsGkAtoms::stroke_opacity, // stroke-opacity
<span class="lineNum">     543 </span>            :   &amp;nsGkAtoms::stroke_width, // stroke-width
<span class="lineNum">     544 </span>            :   &amp;nsGkAtoms::surfaceScale, // surfaceScale
<span class="lineNum">     545 </span>            :   &amp;nsGkAtoms::systemLanguage, // systemLanguage
<span class="lineNum">     546 </span>            :   &amp;nsGkAtoms::tableValues, // tableValues
<span class="lineNum">     547 </span>            :   &amp;nsGkAtoms::target, // target
<span class="lineNum">     548 </span>            :   &amp;nsGkAtoms::targetX, // targetX
<span class="lineNum">     549 </span>            :   &amp;nsGkAtoms::targetY, // targetY
<span class="lineNum">     550 </span>            :   &amp;nsGkAtoms::text_anchor, // text-anchor
<span class="lineNum">     551 </span>            :   &amp;nsGkAtoms::text_decoration, // text-decoration
<span class="lineNum">     552 </span>            :   // textLength
<span class="lineNum">     553 </span>            :   &amp;nsGkAtoms::text_rendering, // text-rendering
<span class="lineNum">     554 </span>            :   &amp;nsGkAtoms::title, // title
<span class="lineNum">     555 </span>            :   &amp;nsGkAtoms::to, // to
<span class="lineNum">     556 </span>            :   &amp;nsGkAtoms::transform, // transform
<span class="lineNum">     557 </span>            :   &amp;nsGkAtoms::type, // type
<span class="lineNum">     558 </span>            :   // u1
<span class="lineNum">     559 </span>            :   // u2
<span class="lineNum">     560 </span>            :   // underline-position
<span class="lineNum">     561 </span>            :   // underline-thickness
<span class="lineNum">     562 </span>            :   // unicode
<span class="lineNum">     563 </span>            :   &amp;nsGkAtoms::unicode_bidi, // unicode-bidi
<span class="lineNum">     564 </span>            :   // unicode-range
<span class="lineNum">     565 </span>            :   // units-per-em
<span class="lineNum">     566 </span>            :   // v-alphabetic
<span class="lineNum">     567 </span>            :   // v-hanging
<span class="lineNum">     568 </span>            :   // v-ideographic
<span class="lineNum">     569 </span>            :   // v-mathematical
<span class="lineNum">     570 </span>            :   &amp;nsGkAtoms::values, // values
<span class="lineNum">     571 </span>            :   &amp;nsGkAtoms::vector_effect, // vector-effect
<span class="lineNum">     572 </span>            :   // vert-adv-y
<span class="lineNum">     573 </span>            :   // vert-origin-x
<span class="lineNum">     574 </span>            :   // vert-origin-y
<span class="lineNum">     575 </span>            :   &amp;nsGkAtoms::viewBox, // viewBox
<span class="lineNum">     576 </span>            :   &amp;nsGkAtoms::viewTarget, // viewTarget
<span class="lineNum">     577 </span>            :   &amp;nsGkAtoms::visibility, // visibility
<span class="lineNum">     578 </span>            :   &amp;nsGkAtoms::width, // width
<span class="lineNum">     579 </span>            :   // widths
<span class="lineNum">     580 </span>            :   &amp;nsGkAtoms::word_spacing, // word-spacing
<span class="lineNum">     581 </span>            :   &amp;nsGkAtoms::writing_mode, // writing-mode
<span class="lineNum">     582 </span>            :   &amp;nsGkAtoms::x, // x
<span class="lineNum">     583 </span>            :   // x-height
<span class="lineNum">     584 </span>            :   &amp;nsGkAtoms::x1, // x1
<span class="lineNum">     585 </span>            :   &amp;nsGkAtoms::x2, // x2
<span class="lineNum">     586 </span>            :   &amp;nsGkAtoms::xChannelSelector, // xChannelSelector
<span class="lineNum">     587 </span>            :   &amp;nsGkAtoms::y, // y
<span class="lineNum">     588 </span>            :   &amp;nsGkAtoms::y1, // y1
<span class="lineNum">     589 </span>            :   &amp;nsGkAtoms::y2, // y2
<span class="lineNum">     590 </span>            :   &amp;nsGkAtoms::yChannelSelector, // yChannelSelector
<span class="lineNum">     591 </span>            :   &amp;nsGkAtoms::z, // z
<span class="lineNum">     592 </span>            :   &amp;nsGkAtoms::zoomAndPan, // zoomAndPan
<span class="lineNum">     593 </span>            :   nullptr
<span class="lineNum">     594 </span>            : };
<span class="lineNum">     595 </span>            : 
<span class="lineNum">     596 </span>            : nsIAtom** const kURLAttributesSVG[] = {
<span class="lineNum">     597 </span>            :   &amp;nsGkAtoms::href,
<span class="lineNum">     598 </span>            :   nullptr
<span class="lineNum">     599 </span>            : };
<span class="lineNum">     600 </span>            : 
<span class="lineNum">     601 </span>            : nsIAtom** const kElementsMathML[] = {
<span class="lineNum">     602 </span>            :    &amp;nsGkAtoms::abs_, // abs
<span class="lineNum">     603 </span>            :    &amp;nsGkAtoms::_and, // and
<span class="lineNum">     604 </span>            :    &amp;nsGkAtoms::annotation_, // annotation
<span class="lineNum">     605 </span>            :    &amp;nsGkAtoms::annotation_xml_, // annotation-xml
<span class="lineNum">     606 </span>            :    &amp;nsGkAtoms::apply_, // apply
<span class="lineNum">     607 </span>            :    &amp;nsGkAtoms::approx_, // approx
<span class="lineNum">     608 </span>            :    &amp;nsGkAtoms::arccos_, // arccos
<span class="lineNum">     609 </span>            :    &amp;nsGkAtoms::arccosh_, // arccosh
<span class="lineNum">     610 </span>            :    &amp;nsGkAtoms::arccot_, // arccot
<span class="lineNum">     611 </span>            :    &amp;nsGkAtoms::arccoth_, // arccoth
<span class="lineNum">     612 </span>            :    &amp;nsGkAtoms::arccsc_, // arccsc
<span class="lineNum">     613 </span>            :    &amp;nsGkAtoms::arccsch_, // arccsch
<span class="lineNum">     614 </span>            :    &amp;nsGkAtoms::arcsec_, // arcsec
<span class="lineNum">     615 </span>            :    &amp;nsGkAtoms::arcsech_, // arcsech
<span class="lineNum">     616 </span>            :    &amp;nsGkAtoms::arcsin_, // arcsin
<span class="lineNum">     617 </span>            :    &amp;nsGkAtoms::arcsinh_, // arcsinh
<span class="lineNum">     618 </span>            :    &amp;nsGkAtoms::arctan_, // arctan
<span class="lineNum">     619 </span>            :    &amp;nsGkAtoms::arctanh_, // arctanh
<span class="lineNum">     620 </span>            :    &amp;nsGkAtoms::arg_, // arg
<span class="lineNum">     621 </span>            :    &amp;nsGkAtoms::bind_, // bind
<span class="lineNum">     622 </span>            :    &amp;nsGkAtoms::bvar_, // bvar
<span class="lineNum">     623 </span>            :    &amp;nsGkAtoms::card_, // card
<span class="lineNum">     624 </span>            :    &amp;nsGkAtoms::cartesianproduct_, // cartesianproduct
<span class="lineNum">     625 </span>            :    &amp;nsGkAtoms::cbytes_, // cbytes
<span class="lineNum">     626 </span>            :    &amp;nsGkAtoms::ceiling, // ceiling
<span class="lineNum">     627 </span>            :    &amp;nsGkAtoms::cerror_, // cerror
<span class="lineNum">     628 </span>            :    &amp;nsGkAtoms::ci_, // ci
<span class="lineNum">     629 </span>            :    &amp;nsGkAtoms::cn_, // cn
<span class="lineNum">     630 </span>            :    &amp;nsGkAtoms::codomain_, // codomain
<span class="lineNum">     631 </span>            :    &amp;nsGkAtoms::complexes_, // complexes
<span class="lineNum">     632 </span>            :    &amp;nsGkAtoms::compose_, // compose
<span class="lineNum">     633 </span>            :    &amp;nsGkAtoms::condition_, // condition
<span class="lineNum">     634 </span>            :    &amp;nsGkAtoms::conjugate_, // conjugate
<span class="lineNum">     635 </span>            :    &amp;nsGkAtoms::cos_, // cos
<span class="lineNum">     636 </span>            :    &amp;nsGkAtoms::cosh_, // cosh
<span class="lineNum">     637 </span>            :    &amp;nsGkAtoms::cot_, // cot
<span class="lineNum">     638 </span>            :    &amp;nsGkAtoms::coth_, // coth
<span class="lineNum">     639 </span>            :    &amp;nsGkAtoms::cs_, // cs
<span class="lineNum">     640 </span>            :    &amp;nsGkAtoms::csc_, // csc
<span class="lineNum">     641 </span>            :    &amp;nsGkAtoms::csch_, // csch
<span class="lineNum">     642 </span>            :    &amp;nsGkAtoms::csymbol_, // csymbol
<span class="lineNum">     643 </span>            :    &amp;nsGkAtoms::curl_, // curl
<span class="lineNum">     644 </span>            :    &amp;nsGkAtoms::declare, // declare
<span class="lineNum">     645 </span>            :    &amp;nsGkAtoms::degree_, // degree
<span class="lineNum">     646 </span>            :    &amp;nsGkAtoms::determinant_, // determinant
<span class="lineNum">     647 </span>            :    &amp;nsGkAtoms::diff_, // diff
<span class="lineNum">     648 </span>            :    &amp;nsGkAtoms::divergence_, // divergence
<span class="lineNum">     649 </span>            :    &amp;nsGkAtoms::divide_, // divide
<span class="lineNum">     650 </span>            :    &amp;nsGkAtoms::domain_, // domain
<span class="lineNum">     651 </span>            :    &amp;nsGkAtoms::domainofapplication_, // domainofapplication
<span class="lineNum">     652 </span>            :    &amp;nsGkAtoms::el_, // el
<span class="lineNum">     653 </span>            :    &amp;nsGkAtoms::emptyset_, // emptyset
<span class="lineNum">     654 </span>            :    &amp;nsGkAtoms::eq_, // eq
<span class="lineNum">     655 </span>            :    &amp;nsGkAtoms::equivalent_, // equivalent
<span class="lineNum">     656 </span>            :    &amp;nsGkAtoms::eulergamma_, // eulergamma
<span class="lineNum">     657 </span>            :    &amp;nsGkAtoms::exists_, // exists
<span class="lineNum">     658 </span>            :    &amp;nsGkAtoms::exp_, // exp
<span class="lineNum">     659 </span>            :    &amp;nsGkAtoms::exponentiale_, // exponentiale
<span class="lineNum">     660 </span>            :    &amp;nsGkAtoms::factorial_, // factorial
<span class="lineNum">     661 </span>            :    &amp;nsGkAtoms::factorof_, // factorof
<span class="lineNum">     662 </span>            :    &amp;nsGkAtoms::_false, // false
<span class="lineNum">     663 </span>            :    &amp;nsGkAtoms::floor, // floor
<span class="lineNum">     664 </span>            :    &amp;nsGkAtoms::fn_, // fn
<span class="lineNum">     665 </span>            :    &amp;nsGkAtoms::forall_, // forall
<span class="lineNum">     666 </span>            :    &amp;nsGkAtoms::gcd_, // gcd
<span class="lineNum">     667 </span>            :    &amp;nsGkAtoms::geq_, // geq
<span class="lineNum">     668 </span>            :    &amp;nsGkAtoms::grad, // grad
<span class="lineNum">     669 </span>            :    &amp;nsGkAtoms::gt_, // gt
<span class="lineNum">     670 </span>            :    &amp;nsGkAtoms::ident_, // ident
<span class="lineNum">     671 </span>            :    &amp;nsGkAtoms::image, // image
<span class="lineNum">     672 </span>            :    &amp;nsGkAtoms::imaginary_, // imaginary
<span class="lineNum">     673 </span>            :    &amp;nsGkAtoms::imaginaryi_, // imaginaryi
<span class="lineNum">     674 </span>            :    &amp;nsGkAtoms::implies_, // implies
<span class="lineNum">     675 </span>            :    &amp;nsGkAtoms::in, // in
<span class="lineNum">     676 </span>            :    &amp;nsGkAtoms::infinity, // infinity
<span class="lineNum">     677 </span>            :    &amp;nsGkAtoms::int_, // int
<span class="lineNum">     678 </span>            :    &amp;nsGkAtoms::integers_, // integers
<span class="lineNum">     679 </span>            :    &amp;nsGkAtoms::intersect_, // intersect
<span class="lineNum">     680 </span>            :    &amp;nsGkAtoms::interval_, // interval
<span class="lineNum">     681 </span>            :    &amp;nsGkAtoms::inverse_, // inverse
<span class="lineNum">     682 </span>            :    &amp;nsGkAtoms::lambda_, // lambda
<span class="lineNum">     683 </span>            :    &amp;nsGkAtoms::laplacian_, // laplacian
<span class="lineNum">     684 </span>            :    &amp;nsGkAtoms::lcm_, // lcm
<span class="lineNum">     685 </span>            :    &amp;nsGkAtoms::leq_, // leq
<span class="lineNum">     686 </span>            :    &amp;nsGkAtoms::limit_, // limit
<span class="lineNum">     687 </span>            :    &amp;nsGkAtoms::list_, // list
<span class="lineNum">     688 </span>            :    &amp;nsGkAtoms::ln_, // ln
<span class="lineNum">     689 </span>            :    &amp;nsGkAtoms::log_, // log
<span class="lineNum">     690 </span>            :    &amp;nsGkAtoms::logbase_, // logbase
<span class="lineNum">     691 </span>            :    &amp;nsGkAtoms::lowlimit_, // lowlimit
<span class="lineNum">     692 </span>            :    &amp;nsGkAtoms::lt_, // lt
<span class="lineNum">     693 </span>            :    &amp;nsGkAtoms::maction_, // maction
<span class="lineNum">     694 </span>            :    &amp;nsGkAtoms::maligngroup_, // maligngroup
<span class="lineNum">     695 </span>            :    &amp;nsGkAtoms::malignmark_, // malignmark
<span class="lineNum">     696 </span>            :    &amp;nsGkAtoms::math, // math
<span class="lineNum">     697 </span>            :    &amp;nsGkAtoms::matrix, // matrix
<span class="lineNum">     698 </span>            :    &amp;nsGkAtoms::matrixrow_, // matrixrow
<span class="lineNum">     699 </span>            :    &amp;nsGkAtoms::max, // max
<span class="lineNum">     700 </span>            :    &amp;nsGkAtoms::mean_, // mean
<span class="lineNum">     701 </span>            :    &amp;nsGkAtoms::median_, // median
<span class="lineNum">     702 </span>            :    &amp;nsGkAtoms::menclose_, // menclose
<span class="lineNum">     703 </span>            :    &amp;nsGkAtoms::merror_, // merror
<span class="lineNum">     704 </span>            :    &amp;nsGkAtoms::mfenced_, // mfenced
<span class="lineNum">     705 </span>            :    &amp;nsGkAtoms::mfrac_, // mfrac
<span class="lineNum">     706 </span>            :    &amp;nsGkAtoms::mglyph_, // mglyph
<span class="lineNum">     707 </span>            :    &amp;nsGkAtoms::mi_, // mi
<span class="lineNum">     708 </span>            :    &amp;nsGkAtoms::min, // min
<span class="lineNum">     709 </span>            :    &amp;nsGkAtoms::minus_, // minus
<span class="lineNum">     710 </span>            :    &amp;nsGkAtoms::mlabeledtr_, // mlabeledtr
<span class="lineNum">     711 </span>            :    &amp;nsGkAtoms::mlongdiv_, // mlongdiv
<span class="lineNum">     712 </span>            :    &amp;nsGkAtoms::mmultiscripts_, // mmultiscripts
<span class="lineNum">     713 </span>            :    &amp;nsGkAtoms::mn_, // mn
<span class="lineNum">     714 </span>            :    &amp;nsGkAtoms::mo_, // mo
<span class="lineNum">     715 </span>            :    &amp;nsGkAtoms::mode, // mode
<span class="lineNum">     716 </span>            :    &amp;nsGkAtoms::moment_, // moment
<span class="lineNum">     717 </span>            :    &amp;nsGkAtoms::momentabout_, // momentabout
<span class="lineNum">     718 </span>            :    &amp;nsGkAtoms::mover_, // mover
<span class="lineNum">     719 </span>            :    &amp;nsGkAtoms::mpadded_, // mpadded
<span class="lineNum">     720 </span>            :    &amp;nsGkAtoms::mphantom_, // mphantom
<span class="lineNum">     721 </span>            :    &amp;nsGkAtoms::mprescripts_, // mprescripts
<span class="lineNum">     722 </span>            :    &amp;nsGkAtoms::mroot_, // mroot
<span class="lineNum">     723 </span>            :    &amp;nsGkAtoms::mrow_, // mrow
<span class="lineNum">     724 </span>            :    &amp;nsGkAtoms::ms_, // ms
<span class="lineNum">     725 </span>            :    &amp;nsGkAtoms::mscarries_, // mscarries
<span class="lineNum">     726 </span>            :    &amp;nsGkAtoms::mscarry_, // mscarry
<span class="lineNum">     727 </span>            :    &amp;nsGkAtoms::msgroup_, // msgroup
<span class="lineNum">     728 </span>            :    &amp;nsGkAtoms::msline_, // msline
<span class="lineNum">     729 </span>            :    &amp;nsGkAtoms::mspace_, // mspace
<span class="lineNum">     730 </span>            :    &amp;nsGkAtoms::msqrt_, // msqrt
<span class="lineNum">     731 </span>            :    &amp;nsGkAtoms::msrow_, // msrow
<span class="lineNum">     732 </span>            :    &amp;nsGkAtoms::mstack_, // mstack
<span class="lineNum">     733 </span>            :    &amp;nsGkAtoms::mstyle_, // mstyle
<span class="lineNum">     734 </span>            :    &amp;nsGkAtoms::msub_, // msub
<span class="lineNum">     735 </span>            :    &amp;nsGkAtoms::msubsup_, // msubsup
<span class="lineNum">     736 </span>            :    &amp;nsGkAtoms::msup_, // msup
<span class="lineNum">     737 </span>            :    &amp;nsGkAtoms::mtable_, // mtable
<span class="lineNum">     738 </span>            :    &amp;nsGkAtoms::mtd_, // mtd
<span class="lineNum">     739 </span>            :    &amp;nsGkAtoms::mtext_, // mtext
<span class="lineNum">     740 </span>            :    &amp;nsGkAtoms::mtr_, // mtr
<span class="lineNum">     741 </span>            :    &amp;nsGkAtoms::munder_, // munder
<span class="lineNum">     742 </span>            :    &amp;nsGkAtoms::munderover_, // munderover
<span class="lineNum">     743 </span>            :    &amp;nsGkAtoms::naturalnumbers_, // naturalnumbers
<span class="lineNum">     744 </span>            :    &amp;nsGkAtoms::neq_, // neq
<span class="lineNum">     745 </span>            :    &amp;nsGkAtoms::none, // none
<span class="lineNum">     746 </span>            :    &amp;nsGkAtoms::_not, // not
<span class="lineNum">     747 </span>            :    &amp;nsGkAtoms::notanumber_, // notanumber
<span class="lineNum">     748 </span>            :    &amp;nsGkAtoms::note_, // note
<span class="lineNum">     749 </span>            :    &amp;nsGkAtoms::notin_, // notin
<span class="lineNum">     750 </span>            :    &amp;nsGkAtoms::notprsubset_, // notprsubset
<span class="lineNum">     751 </span>            :    &amp;nsGkAtoms::notsubset_, // notsubset
<span class="lineNum">     752 </span>            :    &amp;nsGkAtoms::_or, // or
<span class="lineNum">     753 </span>            :    &amp;nsGkAtoms::otherwise, // otherwise
<span class="lineNum">     754 </span>            :    &amp;nsGkAtoms::outerproduct_, // outerproduct
<span class="lineNum">     755 </span>            :    &amp;nsGkAtoms::partialdiff_, // partialdiff
<span class="lineNum">     756 </span>            :    &amp;nsGkAtoms::pi_, // pi
<span class="lineNum">     757 </span>            :    &amp;nsGkAtoms::piece_, // piece
<span class="lineNum">     758 </span>            :    &amp;nsGkAtoms::piecewise_, // piecewise
<span class="lineNum">     759 </span>            :    &amp;nsGkAtoms::plus_, // plus
<span class="lineNum">     760 </span>            :    &amp;nsGkAtoms::power_, // power
<span class="lineNum">     761 </span>            :    &amp;nsGkAtoms::primes_, // primes
<span class="lineNum">     762 </span>            :    &amp;nsGkAtoms::product_, // product
<span class="lineNum">     763 </span>            :    &amp;nsGkAtoms::prsubset_, // prsubset
<span class="lineNum">     764 </span>            :    &amp;nsGkAtoms::quotient_, // quotient
<span class="lineNum">     765 </span>            :    &amp;nsGkAtoms::rationals_, // rationals
<span class="lineNum">     766 </span>            :    &amp;nsGkAtoms::real_, // real
<span class="lineNum">     767 </span>            :    &amp;nsGkAtoms::reals_, // reals
<span class="lineNum">     768 </span>            :    &amp;nsGkAtoms::reln_, // reln
<span class="lineNum">     769 </span>            :    &amp;nsGkAtoms::rem, // rem
<span class="lineNum">     770 </span>            :    &amp;nsGkAtoms::root_, // root
<span class="lineNum">     771 </span>            :    &amp;nsGkAtoms::scalarproduct_, // scalarproduct
<span class="lineNum">     772 </span>            :    &amp;nsGkAtoms::sdev_, // sdev
<span class="lineNum">     773 </span>            :    &amp;nsGkAtoms::sec_, // sec
<span class="lineNum">     774 </span>            :    &amp;nsGkAtoms::sech_, // sech
<span class="lineNum">     775 </span>            :    &amp;nsGkAtoms::selector_, // selector
<span class="lineNum">     776 </span>            :    &amp;nsGkAtoms::semantics_, // semantics
<span class="lineNum">     777 </span>            :    &amp;nsGkAtoms::sep_, // sep
<span class="lineNum">     778 </span>            :    &amp;nsGkAtoms::set_, // set
<span class="lineNum">     779 </span>            :    &amp;nsGkAtoms::setdiff_, // setdiff
<span class="lineNum">     780 </span>            :    &amp;nsGkAtoms::share_, // share
<span class="lineNum">     781 </span>            :    &amp;nsGkAtoms::sin_, // sin
<span class="lineNum">     782 </span>            :    &amp;nsGkAtoms::sinh_, // sinh
<span class="lineNum">     783 </span>            :    &amp;nsGkAtoms::subset_, // subset
<span class="lineNum">     784 </span>            :    &amp;nsGkAtoms::sum, // sum
<span class="lineNum">     785 </span>            :    &amp;nsGkAtoms::tan_, // tan
<span class="lineNum">     786 </span>            :    &amp;nsGkAtoms::tanh_, // tanh
<span class="lineNum">     787 </span>            :    &amp;nsGkAtoms::tendsto_, // tendsto
<span class="lineNum">     788 </span>            :    &amp;nsGkAtoms::times_, // times
<span class="lineNum">     789 </span>            :    &amp;nsGkAtoms::transpose_, // transpose
<span class="lineNum">     790 </span>            :    &amp;nsGkAtoms::_true, // true
<span class="lineNum">     791 </span>            :    &amp;nsGkAtoms::union_, // union
<span class="lineNum">     792 </span>            :    &amp;nsGkAtoms::uplimit_, // uplimit
<span class="lineNum">     793 </span>            :    &amp;nsGkAtoms::variance_, // variance
<span class="lineNum">     794 </span>            :    &amp;nsGkAtoms::vector_, // vector
<span class="lineNum">     795 </span>            :    &amp;nsGkAtoms::vectorproduct_, // vectorproduct
<span class="lineNum">     796 </span>            :    &amp;nsGkAtoms::xor_, // xor
<span class="lineNum">     797 </span>            :   nullptr
<span class="lineNum">     798 </span>            : };
<span class="lineNum">     799 </span>            : 
<span class="lineNum">     800 </span>            : nsIAtom** const kAttributesMathML[] = {
<span class="lineNum">     801 </span>            :    &amp;nsGkAtoms::accent_, // accent
<span class="lineNum">     802 </span>            :    &amp;nsGkAtoms::accentunder_, // accentunder
<span class="lineNum">     803 </span>            :    &amp;nsGkAtoms::actiontype_, // actiontype
<span class="lineNum">     804 </span>            :    &amp;nsGkAtoms::align, // align
<span class="lineNum">     805 </span>            :    &amp;nsGkAtoms::alignmentscope_, // alignmentscope
<span class="lineNum">     806 </span>            :    &amp;nsGkAtoms::alt, // alt
<span class="lineNum">     807 </span>            :    &amp;nsGkAtoms::altimg_, // altimg
<span class="lineNum">     808 </span>            :    &amp;nsGkAtoms::altimg_height_, // altimg-height
<span class="lineNum">     809 </span>            :    &amp;nsGkAtoms::altimg_valign_, // altimg-valign
<span class="lineNum">     810 </span>            :    &amp;nsGkAtoms::altimg_width_, // altimg-width
<span class="lineNum">     811 </span>            :    &amp;nsGkAtoms::background, // background
<span class="lineNum">     812 </span>            :    &amp;nsGkAtoms::base, // base
<span class="lineNum">     813 </span>            :    &amp;nsGkAtoms::bevelled_, // bevelled
<span class="lineNum">     814 </span>            :    &amp;nsGkAtoms::cd_, // cd
<span class="lineNum">     815 </span>            :    &amp;nsGkAtoms::cdgroup_, // cdgroup
<span class="lineNum">     816 </span>            :    &amp;nsGkAtoms::charalign_, // charalign
<span class="lineNum">     817 </span>            :    &amp;nsGkAtoms::close, // close
<span class="lineNum">     818 </span>            :    &amp;nsGkAtoms::closure_, // closure
<span class="lineNum">     819 </span>            :    &amp;nsGkAtoms::color, // color
<span class="lineNum">     820 </span>            :    &amp;nsGkAtoms::columnalign_, // columnalign
<span class="lineNum">     821 </span>            :    &amp;nsGkAtoms::columnalignment_, // columnalignment
<span class="lineNum">     822 </span>            :    &amp;nsGkAtoms::columnlines_, // columnlines
<span class="lineNum">     823 </span>            :    &amp;nsGkAtoms::columnspacing_, // columnspacing
<span class="lineNum">     824 </span>            :    &amp;nsGkAtoms::columnspan_, // columnspan
<span class="lineNum">     825 </span>            :    &amp;nsGkAtoms::columnwidth_, // columnwidth
<span class="lineNum">     826 </span>            :    &amp;nsGkAtoms::crossout_, // crossout
<span class="lineNum">     827 </span>            :    &amp;nsGkAtoms::decimalpoint_, // decimalpoint
<span class="lineNum">     828 </span>            :    &amp;nsGkAtoms::definitionURL_, // definitionURL
<span class="lineNum">     829 </span>            :    &amp;nsGkAtoms::denomalign_, // denomalign
<span class="lineNum">     830 </span>            :    &amp;nsGkAtoms::depth_, // depth
<span class="lineNum">     831 </span>            :    &amp;nsGkAtoms::dir, // dir
<span class="lineNum">     832 </span>            :    &amp;nsGkAtoms::display, // display
<span class="lineNum">     833 </span>            :    &amp;nsGkAtoms::displaystyle_, // displaystyle
<span class="lineNum">     834 </span>            :    &amp;nsGkAtoms::edge_, // edge
<span class="lineNum">     835 </span>            :    &amp;nsGkAtoms::encoding, // encoding
<span class="lineNum">     836 </span>            :    &amp;nsGkAtoms::equalcolumns_, // equalcolumns
<span class="lineNum">     837 </span>            :    &amp;nsGkAtoms::equalrows_, // equalrows
<span class="lineNum">     838 </span>            :    &amp;nsGkAtoms::fence_, // fence
<span class="lineNum">     839 </span>            :    &amp;nsGkAtoms::fontfamily_, // fontfamily
<span class="lineNum">     840 </span>            :    &amp;nsGkAtoms::fontsize_, // fontsize
<span class="lineNum">     841 </span>            :    &amp;nsGkAtoms::fontstyle_, // fontstyle
<span class="lineNum">     842 </span>            :    &amp;nsGkAtoms::fontweight_, // fontweight
<span class="lineNum">     843 </span>            :    &amp;nsGkAtoms::form, // form
<span class="lineNum">     844 </span>            :    &amp;nsGkAtoms::frame, // frame
<span class="lineNum">     845 </span>            :    &amp;nsGkAtoms::framespacing_, // framespacing
<span class="lineNum">     846 </span>            :    &amp;nsGkAtoms::groupalign_, // groupalign
<span class="lineNum">     847 </span>            :    &amp;nsGkAtoms::height, // height
<span class="lineNum">     848 </span>            :    &amp;nsGkAtoms::href, // href
<span class="lineNum">     849 </span>            :    &amp;nsGkAtoms::id, // id
<span class="lineNum">     850 </span>            :    &amp;nsGkAtoms::indentalign_, // indentalign
<span class="lineNum">     851 </span>            :    &amp;nsGkAtoms::indentalignfirst_, // indentalignfirst
<span class="lineNum">     852 </span>            :    &amp;nsGkAtoms::indentalignlast_, // indentalignlast
<span class="lineNum">     853 </span>            :    &amp;nsGkAtoms::indentshift_, // indentshift
<span class="lineNum">     854 </span>            :    &amp;nsGkAtoms::indentshiftfirst_, // indentshiftfirst
<span class="lineNum">     855 </span>            :    &amp;nsGkAtoms::indenttarget_, // indenttarget
<span class="lineNum">     856 </span>            :    &amp;nsGkAtoms::index, // index
<span class="lineNum">     857 </span>            :    &amp;nsGkAtoms::integer, // integer
<span class="lineNum">     858 </span>            :    &amp;nsGkAtoms::largeop_, // largeop
<span class="lineNum">     859 </span>            :    &amp;nsGkAtoms::length, // length
<span class="lineNum">     860 </span>            :    &amp;nsGkAtoms::linebreak_, // linebreak
<span class="lineNum">     861 </span>            :    &amp;nsGkAtoms::linebreakmultchar_, // linebreakmultchar
<span class="lineNum">     862 </span>            :    &amp;nsGkAtoms::linebreakstyle_, // linebreakstyle
<span class="lineNum">     863 </span>            :    &amp;nsGkAtoms::linethickness_, // linethickness
<span class="lineNum">     864 </span>            :    &amp;nsGkAtoms::location_, // location
<span class="lineNum">     865 </span>            :    &amp;nsGkAtoms::longdivstyle_, // longdivstyle
<span class="lineNum">     866 </span>            :    &amp;nsGkAtoms::lquote_, // lquote
<span class="lineNum">     867 </span>            :    &amp;nsGkAtoms::lspace_, // lspace
<span class="lineNum">     868 </span>            :    &amp;nsGkAtoms::ltr, // ltr
<span class="lineNum">     869 </span>            :    &amp;nsGkAtoms::mathbackground_, // mathbackground
<span class="lineNum">     870 </span>            :    &amp;nsGkAtoms::mathcolor_, // mathcolor
<span class="lineNum">     871 </span>            :    &amp;nsGkAtoms::mathsize_, // mathsize
<span class="lineNum">     872 </span>            :    &amp;nsGkAtoms::mathvariant_, // mathvariant
<span class="lineNum">     873 </span>            :    &amp;nsGkAtoms::maxsize_, // maxsize
<span class="lineNum">     874 </span>            :    &amp;nsGkAtoms::minlabelspacing_, // minlabelspacing
<span class="lineNum">     875 </span>            :    &amp;nsGkAtoms::minsize_, // minsize
<span class="lineNum">     876 </span>            :    &amp;nsGkAtoms::movablelimits_, // movablelimits
<span class="lineNum">     877 </span>            :    &amp;nsGkAtoms::msgroup_, // msgroup
<span class="lineNum">     878 </span>            :    &amp;nsGkAtoms::name, // name
<span class="lineNum">     879 </span>            :    &amp;nsGkAtoms::newline, // newline
<span class="lineNum">     880 </span>            :    &amp;nsGkAtoms::notation_, // notation
<span class="lineNum">     881 </span>            :    &amp;nsGkAtoms::numalign_, // numalign
<span class="lineNum">     882 </span>            :    &amp;nsGkAtoms::number, // number
<span class="lineNum">     883 </span>            :    &amp;nsGkAtoms::open, // open
<span class="lineNum">     884 </span>            :    &amp;nsGkAtoms::order, // order
<span class="lineNum">     885 </span>            :    &amp;nsGkAtoms::other_, // other
<span class="lineNum">     886 </span>            :    &amp;nsGkAtoms::overflow, // overflow
<span class="lineNum">     887 </span>            :    &amp;nsGkAtoms::position, // position
<span class="lineNum">     888 </span>            :    &amp;nsGkAtoms::role, // role
<span class="lineNum">     889 </span>            :    &amp;nsGkAtoms::rowalign_, // rowalign
<span class="lineNum">     890 </span>            :    &amp;nsGkAtoms::rowlines_, // rowlines
<span class="lineNum">     891 </span>            :    &amp;nsGkAtoms::rowspacing_, // rowspacing
<span class="lineNum">     892 </span>            :    &amp;nsGkAtoms::rowspan, // rowspan
<span class="lineNum">     893 </span>            :    &amp;nsGkAtoms::rquote_, // rquote
<span class="lineNum">     894 </span>            :    &amp;nsGkAtoms::rspace_, // rspace
<span class="lineNum">     895 </span>            :    &amp;nsGkAtoms::schemaLocation_, // schemaLocation
<span class="lineNum">     896 </span>            :    &amp;nsGkAtoms::scriptlevel_, // scriptlevel
<span class="lineNum">     897 </span>            :    &amp;nsGkAtoms::scriptminsize_, // scriptminsize
<span class="lineNum">     898 </span>            :    &amp;nsGkAtoms::scriptsize_, // scriptsize
<span class="lineNum">     899 </span>            :    &amp;nsGkAtoms::scriptsizemultiplier_, // scriptsizemultiplier
<span class="lineNum">     900 </span>            :    &amp;nsGkAtoms::selection_, // selection
<span class="lineNum">     901 </span>            :    &amp;nsGkAtoms::separator_, // separator
<span class="lineNum">     902 </span>            :    &amp;nsGkAtoms::separators_, // separators
<span class="lineNum">     903 </span>            :    &amp;nsGkAtoms::shift_, // shift
<span class="lineNum">     904 </span>            :    &amp;nsGkAtoms::side_, // side
<span class="lineNum">     905 </span>            :    &amp;nsGkAtoms::src, // src
<span class="lineNum">     906 </span>            :    &amp;nsGkAtoms::stackalign_, // stackalign
<span class="lineNum">     907 </span>            :    &amp;nsGkAtoms::stretchy_, // stretchy
<span class="lineNum">     908 </span>            :    &amp;nsGkAtoms::subscriptshift_, // subscriptshift
<span class="lineNum">     909 </span>            :    &amp;nsGkAtoms::superscriptshift_, // superscriptshift
<span class="lineNum">     910 </span>            :    &amp;nsGkAtoms::symmetric_, // symmetric
<span class="lineNum">     911 </span>            :    &amp;nsGkAtoms::type, // type
<span class="lineNum">     912 </span>            :    &amp;nsGkAtoms::voffset_, // voffset
<span class="lineNum">     913 </span>            :    &amp;nsGkAtoms::width, // width
<span class="lineNum">     914 </span>            :    &amp;nsGkAtoms::xref_, // xref
<span class="lineNum">     915 </span>            :   nullptr
<span class="lineNum">     916 </span>            : };
<span class="lineNum">     917 </span>            : 
<span class="lineNum">     918 </span>            : nsIAtom** const kURLAttributesMathML[] = {
<span class="lineNum">     919 </span>            :   &amp;nsGkAtoms::href,
<span class="lineNum">     920 </span>            :   &amp;nsGkAtoms::src,
<span class="lineNum">     921 </span>            :   &amp;nsGkAtoms::cdgroup_,
<span class="lineNum">     922 </span>            :   &amp;nsGkAtoms::altimg_,
<span class="lineNum">     923 </span>            :   &amp;nsGkAtoms::definitionURL_,
<span class="lineNum">     924 </span>            :   nullptr
<span class="lineNum">     925 </span>            : };
<span class="lineNum">     926 </span>            : 
<span class="lineNum">     927 </span>            : nsTHashtable&lt;nsISupportsHashKey&gt;* nsTreeSanitizer::sElementsHTML = nullptr;
<span class="lineNum">     928 </span>            : nsTHashtable&lt;nsISupportsHashKey&gt;* nsTreeSanitizer::sAttributesHTML = nullptr;
<span class="lineNum">     929 </span>            : nsTHashtable&lt;nsISupportsHashKey&gt;* nsTreeSanitizer::sPresAttributesHTML = nullptr;
<span class="lineNum">     930 </span>            : nsTHashtable&lt;nsISupportsHashKey&gt;* nsTreeSanitizer::sElementsSVG = nullptr;
<span class="lineNum">     931 </span>            : nsTHashtable&lt;nsISupportsHashKey&gt;* nsTreeSanitizer::sAttributesSVG = nullptr;
<span class="lineNum">     932 </span>            : nsTHashtable&lt;nsISupportsHashKey&gt;* nsTreeSanitizer::sElementsMathML = nullptr;
<span class="lineNum">     933 </span>            : nsTHashtable&lt;nsISupportsHashKey&gt;* nsTreeSanitizer::sAttributesMathML = nullptr;
<a name="934"><span class="lineNum">     934 </span>            : nsIPrincipal* nsTreeSanitizer::sNullPrincipal = nullptr;</a>
<span class="lineNum">     935 </span>            : 
<span class="lineNum">     936 </span><span class="lineNoCov">          0 : nsTreeSanitizer::nsTreeSanitizer(uint32_t aFlags)</span>
<span class="lineNum">     937 </span><span class="lineNoCov">          0 :  : mAllowStyles(aFlags &amp; nsIParserUtils::SanitizerAllowStyle)</span>
<span class="lineNum">     938 </span><span class="lineNoCov">          0 :  , mAllowComments(aFlags &amp; nsIParserUtils::SanitizerAllowComments)</span>
<span class="lineNum">     939 </span><span class="lineNoCov">          0 :  , mDropNonCSSPresentation(aFlags &amp;</span>
<span class="lineNum">     940 </span>            :      nsIParserUtils::SanitizerDropNonCSSPresentation)
<span class="lineNum">     941 </span><span class="lineNoCov">          0 :  , mDropForms(aFlags &amp; nsIParserUtils::SanitizerDropForms)</span>
<span class="lineNum">     942 </span><span class="lineNoCov">          0 :  , mCidEmbedsOnly(aFlags &amp;</span>
<span class="lineNum">     943 </span>            :      nsIParserUtils::SanitizerCidEmbedsOnly)
<span class="lineNum">     944 </span><span class="lineNoCov">          0 :  , mDropMedia(aFlags &amp; nsIParserUtils::SanitizerDropMedia)</span>
<span class="lineNum">     945 </span><span class="lineNoCov">          0 :  , mFullDocument(false)</span>
<span class="lineNum">     946 </span>            : {
<span class="lineNum">     947 </span><span class="lineNoCov">          0 :   if (mCidEmbedsOnly) {</span>
<span class="lineNum">     948 </span>            :     // Sanitizing styles for external references is not supported.
<span class="lineNum">     949 </span><span class="lineNoCov">          0 :     mAllowStyles = false;</span>
<span class="lineNum">     950 </span>            :   }
<span class="lineNum">     951 </span><span class="lineNoCov">          0 :   if (!sElementsHTML) {</span>
<span class="lineNum">     952 </span>            :     // Initialize lazily to avoid having to initialize at all if the user
<span class="lineNum">     953 </span>            :     // doesn't paste HTML or load feeds.
<span class="lineNum">     954 </span><span class="lineNoCov">          0 :     InitializeStatics();</span>
<span class="lineNum">     955 </span>            :   }
<span class="lineNum">     956 </span><span class="lineNoCov">          0 : }</span>
<a name="957"><span class="lineNum">     957 </span>            : </a>
<span class="lineNum">     958 </span>            : bool
<span class="lineNum">     959 </span><span class="lineNoCov">          0 : nsTreeSanitizer::MustFlatten(int32_t aNamespace, nsIAtom* aLocal)</span>
<span class="lineNum">     960 </span>            : {
<span class="lineNum">     961 </span><span class="lineNoCov">          0 :   if (aNamespace == kNameSpaceID_XHTML) {</span>
<span class="lineNum">     962 </span><span class="lineNoCov">          0 :     if (mDropNonCSSPresentation &amp;&amp; (nsGkAtoms::font == aLocal ||</span>
<span class="lineNum">     963 </span><span class="lineNoCov">          0 :                                     nsGkAtoms::center == aLocal)) {</span>
<span class="lineNum">     964 </span><span class="lineNoCov">          0 :       return true;</span>
<span class="lineNum">     965 </span>            :     }
<span class="lineNum">     966 </span><span class="lineNoCov">          0 :     if (mDropForms &amp;&amp; (nsGkAtoms::form == aLocal ||</span>
<span class="lineNum">     967 </span><span class="lineNoCov">          0 :                        nsGkAtoms::input == aLocal ||</span>
<span class="lineNum">     968 </span><span class="lineNoCov">          0 :                        nsGkAtoms::keygen == aLocal ||</span>
<span class="lineNum">     969 </span><span class="lineNoCov">          0 :                        nsGkAtoms::option == aLocal ||</span>
<span class="lineNum">     970 </span><span class="lineNoCov">          0 :                        nsGkAtoms::optgroup == aLocal)) {</span>
<span class="lineNum">     971 </span><span class="lineNoCov">          0 :       return true;</span>
<span class="lineNum">     972 </span>            :     }
<span class="lineNum">     973 </span><span class="lineNoCov">          0 :     if (mFullDocument &amp;&amp; (nsGkAtoms::title == aLocal ||</span>
<span class="lineNum">     974 </span><span class="lineNoCov">          0 :                           nsGkAtoms::html == aLocal ||</span>
<span class="lineNum">     975 </span><span class="lineNoCov">          0 :                           nsGkAtoms::head == aLocal ||</span>
<span class="lineNum">     976 </span><span class="lineNoCov">          0 :                           nsGkAtoms::body == aLocal)) {</span>
<span class="lineNum">     977 </span><span class="lineNoCov">          0 :       return false;</span>
<span class="lineNum">     978 </span>            :     }
<span class="lineNum">     979 </span><span class="lineNoCov">          0 :     return !sElementsHTML-&gt;GetEntry(aLocal);</span>
<span class="lineNum">     980 </span>            :   }
<span class="lineNum">     981 </span><span class="lineNoCov">          0 :   if (aNamespace == kNameSpaceID_SVG) {</span>
<span class="lineNum">     982 </span><span class="lineNoCov">          0 :     if (mCidEmbedsOnly || mDropMedia) {</span>
<span class="lineNum">     983 </span>            :       // Sanitizing CSS-based URL references inside SVG presentational
<span class="lineNum">     984 </span>            :       // attributes is not supported, so flattening for cid: embed case.
<span class="lineNum">     985 </span><span class="lineNoCov">          0 :       return true;</span>
<span class="lineNum">     986 </span>            :     }
<span class="lineNum">     987 </span><span class="lineNoCov">          0 :     return !sElementsSVG-&gt;GetEntry(aLocal);</span>
<span class="lineNum">     988 </span>            :   }
<span class="lineNum">     989 </span><span class="lineNoCov">          0 :   if (aNamespace == kNameSpaceID_MathML) {</span>
<span class="lineNum">     990 </span><span class="lineNoCov">          0 :     return !sElementsMathML-&gt;GetEntry(aLocal);</span>
<span class="lineNum">     991 </span>            :   }
<span class="lineNum">     992 </span><span class="lineNoCov">          0 :   return true;</span>
<span class="lineNum">     993 </span>            : }
<a name="994"><span class="lineNum">     994 </span>            : </a>
<span class="lineNum">     995 </span>            : bool
<span class="lineNum">     996 </span><span class="lineNoCov">          0 : nsTreeSanitizer::IsURL(nsIAtom*** aURLs, nsIAtom* aLocalName)</span>
<span class="lineNum">     997 </span>            : {
<span class="lineNum">     998 </span>            :   nsIAtom** atomPtrPtr;
<span class="lineNum">     999 </span><span class="lineNoCov">          0 :   while ((atomPtrPtr = *aURLs)) {</span>
<span class="lineNum">    1000 </span><span class="lineNoCov">          0 :     if (*atomPtrPtr == aLocalName) {</span>
<span class="lineNum">    1001 </span><span class="lineNoCov">          0 :       return true;</span>
<span class="lineNum">    1002 </span>            :     }
<span class="lineNum">    1003 </span><span class="lineNoCov">          0 :     ++aURLs;</span>
<span class="lineNum">    1004 </span>            :   }
<span class="lineNum">    1005 </span><span class="lineNoCov">          0 :   return false;</span>
<span class="lineNum">    1006 </span>            : }
<a name="1007"><span class="lineNum">    1007 </span>            : </a>
<span class="lineNum">    1008 </span>            : bool
<span class="lineNum">    1009 </span><span class="lineNoCov">          0 : nsTreeSanitizer::MustPrune(int32_t aNamespace,</span>
<span class="lineNum">    1010 </span>            :                            nsIAtom* aLocal,
<span class="lineNum">    1011 </span>            :                            mozilla::dom::Element* aElement)
<span class="lineNum">    1012 </span>            : {
<span class="lineNum">    1013 </span>            :   // To avoid attacks where a MathML script becomes something that gets
<span class="lineNum">    1014 </span>            :   // serialized in a way that it parses back as an HTML script, let's just
<span class="lineNum">    1015 </span>            :   // drop elements with the local name 'script' regardless of namespace.
<span class="lineNum">    1016 </span><span class="lineNoCov">          0 :   if (nsGkAtoms::script == aLocal) {</span>
<span class="lineNum">    1017 </span><span class="lineNoCov">          0 :     return true;</span>
<span class="lineNum">    1018 </span>            :   }
<span class="lineNum">    1019 </span><span class="lineNoCov">          0 :   if (aNamespace == kNameSpaceID_XHTML) {</span>
<span class="lineNum">    1020 </span><span class="lineNoCov">          0 :     if (nsGkAtoms::title == aLocal &amp;&amp; !mFullDocument) {</span>
<span class="lineNum">    1021 </span>            :       // emulate the quirks of the old parser
<span class="lineNum">    1022 </span><span class="lineNoCov">          0 :       return true;</span>
<span class="lineNum">    1023 </span>            :     }
<span class="lineNum">    1024 </span><span class="lineNoCov">          0 :     if (mDropForms &amp;&amp; (nsGkAtoms::select == aLocal ||</span>
<span class="lineNum">    1025 </span><span class="lineNoCov">          0 :                        nsGkAtoms::button == aLocal ||</span>
<span class="lineNum">    1026 </span><span class="lineNoCov">          0 :                        nsGkAtoms::datalist == aLocal)) {</span>
<span class="lineNum">    1027 </span><span class="lineNoCov">          0 :       return true;</span>
<span class="lineNum">    1028 </span>            :     }
<span class="lineNum">    1029 </span><span class="lineNoCov">          0 :     if (mDropMedia &amp;&amp; (nsGkAtoms::img == aLocal ||</span>
<span class="lineNum">    1030 </span><span class="lineNoCov">          0 :                        nsGkAtoms::video == aLocal ||</span>
<span class="lineNum">    1031 </span><span class="lineNoCov">          0 :                        nsGkAtoms::audio == aLocal ||</span>
<span class="lineNum">    1032 </span><span class="lineNoCov">          0 :                        nsGkAtoms::source == aLocal)) {</span>
<span class="lineNum">    1033 </span><span class="lineNoCov">          0 :       return true;</span>
<span class="lineNum">    1034 </span>            :     }
<span class="lineNum">    1035 </span><span class="lineNoCov">          0 :     if (nsGkAtoms::meta == aLocal &amp;&amp;</span>
<span class="lineNum">    1036 </span><span class="lineNoCov">          0 :         (aElement-&gt;HasAttr(kNameSpaceID_None, nsGkAtoms::charset) ||</span>
<span class="lineNum">    1037 </span><span class="lineNoCov">          0 :          aElement-&gt;HasAttr(kNameSpaceID_None, nsGkAtoms::httpEquiv))) {</span>
<span class="lineNum">    1038 </span>            :       // Throw away charset declarations even if they also have microdata
<span class="lineNum">    1039 </span>            :       // which they can't validly have.
<span class="lineNum">    1040 </span><span class="lineNoCov">          0 :       return true;</span>
<span class="lineNum">    1041 </span>            :     }
<span class="lineNum">    1042 </span><span class="lineNoCov">          0 :     if (((!mFullDocument &amp;&amp; nsGkAtoms::meta == aLocal) ||</span>
<span class="lineNum">    1043 </span><span class="lineNoCov">          0 :         nsGkAtoms::link == aLocal) &amp;&amp;</span>
<span class="lineNum">    1044 </span><span class="lineNoCov">          0 :         !(aElement-&gt;HasAttr(kNameSpaceID_None, nsGkAtoms::itemprop) ||</span>
<span class="lineNum">    1045 </span><span class="lineNoCov">          0 :           aElement-&gt;HasAttr(kNameSpaceID_None, nsGkAtoms::itemscope))) {</span>
<span class="lineNum">    1046 </span>            :       // emulate old behavior for non-Microdata &lt;meta&gt; and &lt;link&gt; presumably
<span class="lineNum">    1047 </span>            :       // in &lt;head&gt;. &lt;meta&gt; and &lt;link&gt; are whitelisted in order to avoid
<span class="lineNum">    1048 </span>            :       // corrupting Microdata when they appear in &lt;body&gt;. Note that
<span class="lineNum">    1049 </span>            :       // SanitizeAttributes() will remove the rel attribute from &lt;link&gt; and
<span class="lineNum">    1050 </span>            :       // the name attribute from &lt;meta&gt;.
<span class="lineNum">    1051 </span><span class="lineNoCov">          0 :       return true;</span>
<span class="lineNum">    1052 </span>            :     }
<span class="lineNum">    1053 </span>            :   }
<span class="lineNum">    1054 </span><span class="lineNoCov">          0 :   if (mAllowStyles) {</span>
<span class="lineNum">    1055 </span><span class="lineNoCov">          0 :     if (nsGkAtoms::style == aLocal &amp;&amp; !(aNamespace == kNameSpaceID_XHTML</span>
<span class="lineNum">    1056 </span>            :         || aNamespace == kNameSpaceID_SVG)) {
<span class="lineNum">    1057 </span><span class="lineNoCov">          0 :       return true;</span>
<span class="lineNum">    1058 </span>            :     }
<span class="lineNum">    1059 </span><span class="lineNoCov">          0 :     return false;</span>
<span class="lineNum">    1060 </span>            :   }
<span class="lineNum">    1061 </span><span class="lineNoCov">          0 :   if (nsGkAtoms::style == aLocal) {</span>
<span class="lineNum">    1062 </span><span class="lineNoCov">          0 :     return true;</span>
<span class="lineNum">    1063 </span>            :   }
<span class="lineNum">    1064 </span><span class="lineNoCov">          0 :   return false;</span>
<span class="lineNum">    1065 </span>            : }
<a name="1066"><span class="lineNum">    1066 </span>            : </a>
<span class="lineNum">    1067 </span>            : bool
<span class="lineNum">    1068 </span><span class="lineNoCov">          0 : nsTreeSanitizer::SanitizeStyleDeclaration(mozilla::css::Declaration* aDeclaration,</span>
<span class="lineNum">    1069 </span>            :                                           nsAutoString&amp; aRuleText)
<span class="lineNum">    1070 </span>            : {
<span class="lineNum">    1071 </span><span class="lineNoCov">          0 :   bool didSanitize = aDeclaration-&gt;HasProperty(eCSSProperty__moz_binding);</span>
<span class="lineNum">    1072 </span><span class="lineNoCov">          0 :   aDeclaration-&gt;RemovePropertyByID(eCSSProperty__moz_binding);</span>
<span class="lineNum">    1073 </span><span class="lineNoCov">          0 :   aDeclaration-&gt;ToString(aRuleText);</span>
<span class="lineNum">    1074 </span><span class="lineNoCov">          0 :   return didSanitize;</span>
<span class="lineNum">    1075 </span>            : }
<a name="1076"><span class="lineNum">    1076 </span>            : </a>
<span class="lineNum">    1077 </span>            : bool
<span class="lineNum">    1078 </span><span class="lineNoCov">          0 : nsTreeSanitizer::SanitizeStyleSheet(const nsAString&amp; aOriginal,</span>
<span class="lineNum">    1079 </span>            :                                     nsAString&amp; aSanitized,
<span class="lineNum">    1080 </span>            :                                     nsIDocument* aDocument,
<span class="lineNum">    1081 </span>            :                                     nsIURI* aBaseURI)
<span class="lineNum">    1082 </span>            : {
<span class="lineNum">    1083 </span>            :   nsresult rv;
<span class="lineNum">    1084 </span><span class="lineNoCov">          0 :   aSanitized.Truncate();</span>
<span class="lineNum">    1085 </span>            :   // aSanitized will hold the permitted CSS text.
<span class="lineNum">    1086 </span>            :   // -moz-binding is blacklisted.
<span class="lineNum">    1087 </span><span class="lineNoCov">          0 :   bool didSanitize = false;</span>
<span class="lineNum">    1088 </span>            :   // Create a sheet to hold the parsed CSS
<span class="lineNum">    1089 </span>            :   RefPtr&lt;CSSStyleSheet&gt; sheet =
<span class="lineNum">    1090 </span>            :     new CSSStyleSheet(mozilla::css::eAuthorSheetFeatures,
<span class="lineNum">    1091 </span><span class="lineNoCov">          0 :                       CORS_NONE, aDocument-&gt;GetReferrerPolicy());</span>
<span class="lineNum">    1092 </span><span class="lineNoCov">          0 :   sheet-&gt;SetURIs(aDocument-&gt;GetDocumentURI(), nullptr, aBaseURI);</span>
<span class="lineNum">    1093 </span><span class="lineNoCov">          0 :   sheet-&gt;SetPrincipal(aDocument-&gt;NodePrincipal());</span>
<span class="lineNum">    1094 </span>            :   // Create the CSS parser, and parse the CSS text.
<span class="lineNum">    1095 </span><span class="lineNoCov">          0 :   nsCSSParser parser(nullptr, sheet);</span>
<span class="lineNum">    1096 </span><span class="lineNoCov">          0 :   rv = parser.ParseSheet(aOriginal, aDocument-&gt;GetDocumentURI(), aBaseURI,</span>
<span class="lineNum">    1097 </span><span class="lineNoCov">          0 :                          aDocument-&gt;NodePrincipal(), 0);</span>
<span class="lineNum">    1098 </span><span class="lineNoCov">          0 :   NS_ENSURE_SUCCESS(rv, true);</span>
<span class="lineNum">    1099 </span>            :   // Mark the sheet as complete.
<span class="lineNum">    1100 </span><span class="lineNoCov">          0 :   MOZ_ASSERT(!sheet-&gt;IsModified(),</span>
<span class="lineNum">    1101 </span>            :              &quot;should not get marked modified during parsing&quot;);
<span class="lineNum">    1102 </span><span class="lineNoCov">          0 :   sheet-&gt;SetComplete();</span>
<span class="lineNum">    1103 </span>            :   // Loop through all the rules found in the CSS text
<span class="lineNum">    1104 </span><span class="lineNoCov">          0 :   int32_t ruleCount = sheet-&gt;StyleRuleCount();</span>
<span class="lineNum">    1105 </span><span class="lineNoCov">          0 :   for (int32_t i = 0; i &lt; ruleCount; ++i) {</span>
<span class="lineNum">    1106 </span><span class="lineNoCov">          0 :     mozilla::css::Rule* rule = sheet-&gt;GetStyleRuleAt(i);</span>
<span class="lineNum">    1107 </span><span class="lineNoCov">          0 :     if (!rule)</span>
<span class="lineNum">    1108 </span><span class="lineNoCov">          0 :       continue;</span>
<span class="lineNum">    1109 </span><span class="lineNoCov">          0 :     switch (rule-&gt;GetType()) {</span>
<span class="lineNum">    1110 </span>            :       default:
<span class="lineNum">    1111 </span><span class="lineNoCov">          0 :         didSanitize = true;</span>
<span class="lineNum">    1112 </span>            :         // Ignore these rule types.
<span class="lineNum">    1113 </span><span class="lineNoCov">          0 :         break;</span>
<span class="lineNum">    1114 </span>            :       case mozilla::css::Rule::NAMESPACE_RULE:
<span class="lineNum">    1115 </span>            :       case mozilla::css::Rule::FONT_FACE_RULE: {
<span class="lineNum">    1116 </span>            :         // Append @namespace and @font-face rules verbatim.
<span class="lineNum">    1117 </span><span class="lineNoCov">          0 :         nsAutoString cssText;</span>
<span class="lineNum">    1118 </span><span class="lineNoCov">          0 :         nsCOMPtr&lt;nsIDOMCSSRule&gt; styleRule = do_QueryInterface(rule);</span>
<span class="lineNum">    1119 </span><span class="lineNoCov">          0 :         if (styleRule) {</span>
<span class="lineNum">    1120 </span><span class="lineNoCov">          0 :           rv = styleRule-&gt;GetCssText(cssText);</span>
<span class="lineNum">    1121 </span><span class="lineNoCov">          0 :           if (NS_SUCCEEDED(rv)) {</span>
<span class="lineNum">    1122 </span><span class="lineNoCov">          0 :             aSanitized.Append(cssText);</span>
<span class="lineNum">    1123 </span>            :           }
<span class="lineNum">    1124 </span>            :         }
<span class="lineNum">    1125 </span><span class="lineNoCov">          0 :         break;</span>
<span class="lineNum">    1126 </span>            :       }
<span class="lineNum">    1127 </span>            :       case mozilla::css::Rule::STYLE_RULE: {
<span class="lineNum">    1128 </span>            :         // For style rules, we will just look for and remove the
<span class="lineNum">    1129 </span>            :         // -moz-binding properties.
<span class="lineNum">    1130 </span><span class="lineNoCov">          0 :         RefPtr&lt;mozilla::css::StyleRule&gt; styleRule = do_QueryObject(rule);</span>
<span class="lineNum">    1131 </span><span class="lineNoCov">          0 :         NS_ASSERTION(styleRule, &quot;Must be a style rule&quot;);</span>
<span class="lineNum">    1132 </span><span class="lineNoCov">          0 :         nsAutoString decl;</span>
<span class="lineNum">    1133 </span>            :         bool sanitized =
<span class="lineNum">    1134 </span><span class="lineNoCov">          0 :           SanitizeStyleDeclaration(styleRule-&gt;GetDeclaration(), decl);</span>
<span class="lineNum">    1135 </span><span class="lineNoCov">          0 :         didSanitize = sanitized || didSanitize;</span>
<span class="lineNum">    1136 </span><span class="lineNoCov">          0 :         if (!sanitized) {</span>
<span class="lineNum">    1137 </span><span class="lineNoCov">          0 :           styleRule-&gt;GetCssText(decl);</span>
<span class="lineNum">    1138 </span>            :         }
<span class="lineNum">    1139 </span><span class="lineNoCov">          0 :         aSanitized.Append(decl);</span>
<span class="lineNum">    1140 </span>            :       }
<span class="lineNum">    1141 </span>            :     }
<span class="lineNum">    1142 </span>            :   }
<span class="lineNum">    1143 </span><span class="lineNoCov">          0 :   return didSanitize;</span>
<span class="lineNum">    1144 </span>            : }
<a name="1145"><span class="lineNum">    1145 </span>            : </a>
<span class="lineNum">    1146 </span>            : void
<span class="lineNum">    1147 </span><span class="lineNoCov">          0 : nsTreeSanitizer::SanitizeAttributes(mozilla::dom::Element* aElement,</span>
<span class="lineNum">    1148 </span>            :                                     nsTHashtable&lt;nsISupportsHashKey&gt;* aAllowed,
<span class="lineNum">    1149 </span>            :                                     nsIAtom*** aURLs,
<span class="lineNum">    1150 </span>            :                                     bool aAllowXLink,
<span class="lineNum">    1151 </span>            :                                     bool aAllowStyle,
<span class="lineNum">    1152 </span>            :                                     bool aAllowDangerousSrc)
<span class="lineNum">    1153 </span>            : {
<span class="lineNum">    1154 </span><span class="lineNoCov">          0 :   uint32_t ac = aElement-&gt;GetAttrCount();</span>
<span class="lineNum">    1155 </span>            : 
<span class="lineNum">    1156 </span><span class="lineNoCov">          0 :   for (int32_t i = ac - 1; i &gt;= 0; --i) {</span>
<span class="lineNum">    1157 </span><span class="lineNoCov">          0 :     const nsAttrName* attrName = aElement-&gt;GetAttrNameAt(i);</span>
<span class="lineNum">    1158 </span><span class="lineNoCov">          0 :     int32_t attrNs = attrName-&gt;NamespaceID();</span>
<span class="lineNum">    1159 </span><span class="lineNoCov">          0 :     nsCOMPtr&lt;nsIAtom&gt; attrLocal = attrName-&gt;LocalName();</span>
<span class="lineNum">    1160 </span>            : 
<span class="lineNum">    1161 </span><span class="lineNoCov">          0 :     if (kNameSpaceID_None == attrNs) {</span>
<span class="lineNum">    1162 </span><span class="lineNoCov">          0 :       if (aAllowStyle &amp;&amp; nsGkAtoms::style == attrLocal) {</span>
<span class="lineNum">    1163 </span><span class="lineNoCov">          0 :         nsCOMPtr&lt;nsIURI&gt; baseURI = aElement-&gt;GetBaseURI();</span>
<span class="lineNum">    1164 </span><span class="lineNoCov">          0 :         nsIDocument* document = aElement-&gt;OwnerDoc();</span>
<span class="lineNum">    1165 </span>            :         // Pass the CSS Loader object to the parser, to allow parser error
<span class="lineNum">    1166 </span>            :         // reports to include the outer window ID.
<span class="lineNum">    1167 </span><span class="lineNoCov">          0 :         nsCSSParser parser(document-&gt;CSSLoader());</span>
<span class="lineNum">    1168 </span><span class="lineNoCov">          0 :         nsAutoString value;</span>
<span class="lineNum">    1169 </span><span class="lineNoCov">          0 :         aElement-&gt;GetAttr(attrNs, attrLocal, value);</span>
<span class="lineNum">    1170 </span>            :         RefPtr&lt;mozilla::css::Declaration&gt; decl =
<span class="lineNum">    1171 </span><span class="lineNoCov">          0 :           parser.ParseStyleAttribute(value, document-&gt;GetDocumentURI(),</span>
<span class="lineNum">    1172 </span><span class="lineNoCov">          0 :                                      baseURI, document-&gt;NodePrincipal());</span>
<span class="lineNum">    1173 </span><span class="lineNoCov">          0 :         if (decl) {</span>
<span class="lineNum">    1174 </span><span class="lineNoCov">          0 :           nsAutoString cleanValue;</span>
<span class="lineNum">    1175 </span><span class="lineNoCov">          0 :           if (SanitizeStyleDeclaration(decl, cleanValue)) {</span>
<span class="lineNum">    1176 </span>            :             aElement-&gt;SetAttr(kNameSpaceID_None,
<span class="lineNum">    1177 </span>            :                               nsGkAtoms::style,
<span class="lineNum">    1178 </span>            :                               cleanValue,
<span class="lineNum">    1179 </span><span class="lineNoCov">          0 :                               false);</span>
<span class="lineNum">    1180 </span>            :           }
<span class="lineNum">    1181 </span>            :         }
<span class="lineNum">    1182 </span><span class="lineNoCov">          0 :         continue;</span>
<span class="lineNum">    1183 </span>            :       }
<span class="lineNum">    1184 </span><span class="lineNoCov">          0 :       if (aAllowDangerousSrc &amp;&amp; nsGkAtoms::src == attrLocal) {</span>
<span class="lineNum">    1185 </span><span class="lineNoCov">          0 :         continue;</span>
<span class="lineNum">    1186 </span>            :       }
<span class="lineNum">    1187 </span><span class="lineNoCov">          0 :       if (IsURL(aURLs, attrLocal)) {</span>
<span class="lineNum">    1188 </span><span class="lineNoCov">          0 :         if (SanitizeURL(aElement, attrNs, attrLocal)) {</span>
<span class="lineNum">    1189 </span>            :           // in case the attribute removal shuffled the attribute order, start
<span class="lineNum">    1190 </span>            :           // the loop again.
<span class="lineNum">    1191 </span><span class="lineNoCov">          0 :           --ac;</span>
<span class="lineNum">    1192 </span><span class="lineNoCov">          0 :           i = ac; // i will be decremented immediately thanks to the for loop</span>
<span class="lineNum">    1193 </span><span class="lineNoCov">          0 :           continue;</span>
<span class="lineNum">    1194 </span>            :         }
<span class="lineNum">    1195 </span>            :         // else fall through to see if there's another reason to drop this
<span class="lineNum">    1196 </span>            :         // attribute (in particular if the attribute is background=&quot;&quot; on an
<span class="lineNum">    1197 </span>            :         // HTML element)
<span class="lineNum">    1198 </span>            :       }
<span class="lineNum">    1199 </span><span class="lineNoCov">          0 :       if (!mDropNonCSSPresentation &amp;&amp;</span>
<span class="lineNum">    1200 </span><span class="lineNoCov">          0 :           (aAllowed == sAttributesHTML) &amp;&amp; // element is HTML</span>
<span class="lineNum">    1201 </span><span class="lineNoCov">          0 :           sPresAttributesHTML-&gt;GetEntry(attrLocal)) {</span>
<span class="lineNum">    1202 </span><span class="lineNoCov">          0 :         continue;</span>
<span class="lineNum">    1203 </span>            :       }
<span class="lineNum">    1204 </span><span class="lineNoCov">          0 :       if (aAllowed-&gt;GetEntry(attrLocal) &amp;&amp;</span>
<span class="lineNum">    1205 </span><span class="lineNoCov">          0 :           !((attrLocal == nsGkAtoms::rel &amp;&amp;</span>
<span class="lineNum">    1206 </span><span class="lineNoCov">          0 :              aElement-&gt;IsHTMLElement(nsGkAtoms::link)) ||</span>
<span class="lineNum">    1207 </span><span class="lineNoCov">          0 :             (!mFullDocument &amp;&amp;</span>
<span class="lineNum">    1208 </span><span class="lineNoCov">          0 :              attrLocal == nsGkAtoms::name &amp;&amp;</span>
<span class="lineNum">    1209 </span><span class="lineNoCov">          0 :              aElement-&gt;IsHTMLElement(nsGkAtoms::meta)))) {</span>
<span class="lineNum">    1210 </span>            :         // name=&quot;&quot; and rel=&quot;&quot; are whitelisted, but treat them as blacklisted
<span class="lineNum">    1211 </span>            :         // for &lt;meta name&gt; (fragment case) and &lt;link rel&gt; (all cases) to avoid
<span class="lineNum">    1212 </span>            :         // document-wide metadata or styling overrides with non-conforming
<span class="lineNum">    1213 </span>            :         // &lt;meta name itemprop&gt; or
<span class="lineNum">    1214 </span>            :         // &lt;link rel itemprop&gt;
<span class="lineNum">    1215 </span><span class="lineNoCov">          0 :         continue;</span>
<span class="lineNum">    1216 </span>            :       }
<span class="lineNum">    1217 </span><span class="lineNoCov">          0 :       const char16_t* localStr = attrLocal-&gt;GetUTF16String();</span>
<span class="lineNum">    1218 </span>            :       // Allow underscore to cater to the MCE editor library.
<span class="lineNum">    1219 </span>            :       // Allow data-* on SVG and MathML, too, as a forward-compat measure.
<span class="lineNum">    1220 </span><span class="lineNoCov">          0 :       if (*localStr == '_' || (attrLocal-&gt;GetLength() &gt; 5 &amp;&amp; localStr[0] == 'd'</span>
<span class="lineNum">    1221 </span><span class="lineNoCov">          0 :           &amp;&amp; localStr[1] == 'a' &amp;&amp; localStr[2] == 't' &amp;&amp; localStr[3] == 'a'</span>
<span class="lineNum">    1222 </span><span class="lineNoCov">          0 :           &amp;&amp; localStr[4] == '-')) {</span>
<span class="lineNum">    1223 </span><span class="lineNoCov">          0 :         continue;</span>
<span class="lineNum">    1224 </span>            :       }
<span class="lineNum">    1225 </span>            :       // else not allowed
<span class="lineNum">    1226 </span><span class="lineNoCov">          0 :     } else if (kNameSpaceID_XML == attrNs) {</span>
<span class="lineNum">    1227 </span><span class="lineNoCov">          0 :       if (nsGkAtoms::base == attrLocal) {</span>
<span class="lineNum">    1228 </span><span class="lineNoCov">          0 :         if (SanitizeURL(aElement, attrNs, attrLocal)) {</span>
<span class="lineNum">    1229 </span>            :           // in case the attribute removal shuffled the attribute order, start
<span class="lineNum">    1230 </span>            :           // the loop again.
<span class="lineNum">    1231 </span><span class="lineNoCov">          0 :           --ac;</span>
<span class="lineNum">    1232 </span><span class="lineNoCov">          0 :           i = ac; // i will be decremented immediately thanks to the for loop</span>
<span class="lineNum">    1233 </span>            :         }
<span class="lineNum">    1234 </span><span class="lineNoCov">          0 :         continue;</span>
<span class="lineNum">    1235 </span>            :       }
<span class="lineNum">    1236 </span><span class="lineNoCov">          0 :       if (nsGkAtoms::lang == attrLocal || nsGkAtoms::space == attrLocal) {</span>
<span class="lineNum">    1237 </span><span class="lineNoCov">          0 :         continue;</span>
<span class="lineNum">    1238 </span>            :       }
<span class="lineNum">    1239 </span>            :       // else not allowed
<span class="lineNum">    1240 </span><span class="lineNoCov">          0 :     } else if (aAllowXLink &amp;&amp; kNameSpaceID_XLink == attrNs) {</span>
<span class="lineNum">    1241 </span><span class="lineNoCov">          0 :       if (nsGkAtoms::href == attrLocal) {</span>
<span class="lineNum">    1242 </span><span class="lineNoCov">          0 :         if (SanitizeURL(aElement, attrNs, attrLocal)) {</span>
<span class="lineNum">    1243 </span>            :           // in case the attribute removal shuffled the attribute order, start
<span class="lineNum">    1244 </span>            :           // the loop again.
<span class="lineNum">    1245 </span><span class="lineNoCov">          0 :           --ac;</span>
<span class="lineNum">    1246 </span><span class="lineNoCov">          0 :           i = ac; // i will be decremented immediately thanks to the for loop</span>
<span class="lineNum">    1247 </span>            :         }
<span class="lineNum">    1248 </span><span class="lineNoCov">          0 :         continue;</span>
<span class="lineNum">    1249 </span>            :       }
<span class="lineNum">    1250 </span><span class="lineNoCov">          0 :       if (nsGkAtoms::type == attrLocal || nsGkAtoms::title == attrLocal</span>
<span class="lineNum">    1251 </span><span class="lineNoCov">          0 :           || nsGkAtoms::show == attrLocal || nsGkAtoms::actuate == attrLocal) {</span>
<span class="lineNum">    1252 </span><span class="lineNoCov">          0 :         continue;</span>
<span class="lineNum">    1253 </span>            :       }
<span class="lineNum">    1254 </span>            :       // else not allowed
<span class="lineNum">    1255 </span>            :     }
<span class="lineNum">    1256 </span><span class="lineNoCov">          0 :     aElement-&gt;UnsetAttr(kNameSpaceID_None, attrLocal, false);</span>
<span class="lineNum">    1257 </span>            :     // in case the attribute removal shuffled the attribute order, start the
<span class="lineNum">    1258 </span>            :     // loop again.
<span class="lineNum">    1259 </span><span class="lineNoCov">          0 :     --ac;</span>
<span class="lineNum">    1260 </span><span class="lineNoCov">          0 :     i = ac; // i will be decremented immediately thanks to the for loop</span>
<span class="lineNum">    1261 </span>            :   }
<span class="lineNum">    1262 </span>            : 
<span class="lineNum">    1263 </span>            :   // If we've got HTML audio or video, add the controls attribute, because
<span class="lineNum">    1264 </span>            :   // otherwise the content is unplayable with scripts removed.
<span class="lineNum">    1265 </span><span class="lineNoCov">          0 :   if (aElement-&gt;IsAnyOfHTMLElements(nsGkAtoms::video, nsGkAtoms::audio)) {</span>
<span class="lineNum">    1266 </span><span class="lineNoCov">          0 :     aElement-&gt;SetAttr(kNameSpaceID_None,</span>
<span class="lineNum">    1267 </span>            :                       nsGkAtoms::controls,
<span class="lineNum">    1268 </span><span class="lineNoCov">          0 :                       EmptyString(),</span>
<span class="lineNum">    1269 </span><span class="lineNoCov">          0 :                       false);</span>
<span class="lineNum">    1270 </span>            :   }
<span class="lineNum">    1271 </span><span class="lineNoCov">          0 : }</span>
<a name="1272"><span class="lineNum">    1272 </span>            : </a>
<span class="lineNum">    1273 </span>            : bool
<span class="lineNum">    1274 </span><span class="lineNoCov">          0 : nsTreeSanitizer::SanitizeURL(mozilla::dom::Element* aElement,</span>
<span class="lineNum">    1275 </span>            :                              int32_t aNamespace,
<span class="lineNum">    1276 </span>            :                              nsIAtom* aLocalName)
<span class="lineNum">    1277 </span>            : {
<span class="lineNum">    1278 </span><span class="lineNoCov">          0 :   nsAutoString value;</span>
<span class="lineNum">    1279 </span><span class="lineNoCov">          0 :   aElement-&gt;GetAttr(aNamespace, aLocalName, value);</span>
<span class="lineNum">    1280 </span>            : 
<span class="lineNum">    1281 </span>            :   // Get value and remove mandatory quotes
<span class="lineNum">    1282 </span>            :   static const char* kWhitespace = &quot;\n\r\t\b&quot;;
<span class="lineNum">    1283 </span>            :   const nsAString&amp; v =
<span class="lineNum">    1284 </span><span class="lineNoCov">          0 :     nsContentUtils::TrimCharsInSet(kWhitespace, value);</span>
<span class="lineNum">    1285 </span>            :   // Fragment-only url cannot be harmful.
<span class="lineNum">    1286 </span><span class="lineNoCov">          0 :   if (!v.IsEmpty() &amp;&amp; v.First() == u'#') {</span>
<span class="lineNum">    1287 </span><span class="lineNoCov">          0 :     return false;</span>
<span class="lineNum">    1288 </span>            :   }
<span class="lineNum">    1289 </span>            : 
<span class="lineNum">    1290 </span><span class="lineNoCov">          0 :   nsIScriptSecurityManager* secMan = nsContentUtils::GetSecurityManager();</span>
<span class="lineNum">    1291 </span><span class="lineNoCov">          0 :   uint32_t flags = nsIScriptSecurityManager::DISALLOW_INHERIT_PRINCIPAL;</span>
<span class="lineNum">    1292 </span>            : 
<span class="lineNum">    1293 </span><span class="lineNoCov">          0 :   nsCOMPtr&lt;nsIURI&gt; baseURI = aElement-&gt;GetBaseURI();</span>
<span class="lineNum">    1294 </span><span class="lineNoCov">          0 :   nsCOMPtr&lt;nsIURI&gt; attrURI;</span>
<span class="lineNum">    1295 </span><span class="lineNoCov">          0 :   nsresult rv = NS_NewURI(getter_AddRefs(attrURI), v, nullptr, baseURI);</span>
<span class="lineNum">    1296 </span><span class="lineNoCov">          0 :   if (NS_SUCCEEDED(rv)) {</span>
<span class="lineNum">    1297 </span><span class="lineNoCov">          0 :     if (mCidEmbedsOnly &amp;&amp;</span>
<span class="lineNum">    1298 </span>            :         kNameSpaceID_None == aNamespace) {
<span class="lineNum">    1299 </span><span class="lineNoCov">          0 :       if (nsGkAtoms::src == aLocalName || nsGkAtoms::background == aLocalName) {</span>
<span class="lineNum">    1300 </span>            :         // comm-central uses a hack that makes nsIURIs created with cid: specs
<span class="lineNum">    1301 </span>            :         // actually have an about:blank spec. Therefore, nsIURI facilities are
<span class="lineNum">    1302 </span>            :         // useless for cid: when comm-central code is participating.
<span class="lineNum">    1303 </span><span class="lineNoCov">          0 :         if (!(v.Length() &gt; 4 &amp;&amp;</span>
<span class="lineNum">    1304 </span><span class="lineNoCov">          0 :               (v[0] == 'c' || v[0] == 'C') &amp;&amp;</span>
<span class="lineNum">    1305 </span><span class="lineNoCov">          0 :               (v[1] == 'i' || v[1] == 'I') &amp;&amp;</span>
<span class="lineNum">    1306 </span><span class="lineNoCov">          0 :               (v[2] == 'd' || v[2] == 'D') &amp;&amp;</span>
<span class="lineNum">    1307 </span><span class="lineNoCov">          0 :               v[3] == ':')) {</span>
<span class="lineNum">    1308 </span><span class="lineNoCov">          0 :           rv = NS_ERROR_FAILURE;</span>
<span class="lineNum">    1309 </span>            :         }
<span class="lineNum">    1310 </span><span class="lineNoCov">          0 :       } else if (nsGkAtoms::cdgroup_ == aLocalName ||</span>
<span class="lineNum">    1311 </span><span class="lineNoCov">          0 :                  nsGkAtoms::altimg_ == aLocalName ||</span>
<span class="lineNum">    1312 </span><span class="lineNoCov">          0 :                  nsGkAtoms::definitionURL_ == aLocalName) {</span>
<span class="lineNum">    1313 </span>            :         // Gecko doesn't fetch these now and shouldn't in the future, but
<span class="lineNum">    1314 </span>            :         // in case someone goofs with these in the future, let's drop them.
<span class="lineNum">    1315 </span><span class="lineNoCov">          0 :         rv = NS_ERROR_FAILURE;</span>
<span class="lineNum">    1316 </span>            :       } else {
<span class="lineNum">    1317 </span><span class="lineNoCov">          0 :         rv = secMan-&gt;CheckLoadURIWithPrincipal(sNullPrincipal, attrURI, flags);</span>
<span class="lineNum">    1318 </span>            :       }
<span class="lineNum">    1319 </span>            :     } else {
<span class="lineNum">    1320 </span><span class="lineNoCov">          0 :       rv = secMan-&gt;CheckLoadURIWithPrincipal(sNullPrincipal, attrURI, flags);</span>
<span class="lineNum">    1321 </span>            :     }
<span class="lineNum">    1322 </span>            :   }
<span class="lineNum">    1323 </span><span class="lineNoCov">          0 :   if (NS_FAILED(rv)) {</span>
<span class="lineNum">    1324 </span><span class="lineNoCov">          0 :     aElement-&gt;UnsetAttr(aNamespace, aLocalName, false);</span>
<span class="lineNum">    1325 </span><span class="lineNoCov">          0 :     return true;</span>
<span class="lineNum">    1326 </span>            :   }
<span class="lineNum">    1327 </span><span class="lineNoCov">          0 :   return false;</span>
<span class="lineNum">    1328 </span>            : }
<a name="1329"><span class="lineNum">    1329 </span>            : </a>
<span class="lineNum">    1330 </span>            : void
<span class="lineNum">    1331 </span><span class="lineNoCov">          0 : nsTreeSanitizer::Sanitize(nsIContent* aFragment)</span>
<span class="lineNum">    1332 </span>            : {
<span class="lineNum">    1333 </span>            :   // If you want to relax these preconditions, be sure to check the code in
<span class="lineNum">    1334 </span>            :   // here that notifies / does not notify or that fires mutation events if
<span class="lineNum">    1335 </span>            :   // in tree.
<span class="lineNum">    1336 </span><span class="lineNoCov">          0 :   NS_PRECONDITION(aFragment-&gt;IsNodeOfType(nsINode::eDOCUMENT_FRAGMENT),</span>
<span class="lineNum">    1337 </span>            :       &quot;Argument was not DOM fragment.&quot;);
<span class="lineNum">    1338 </span><span class="lineNoCov">          0 :   NS_PRECONDITION(!aFragment-&gt;IsInUncomposedDoc(), &quot;The fragment is in doc?&quot;);</span>
<span class="lineNum">    1339 </span>            : 
<span class="lineNum">    1340 </span><span class="lineNoCov">          0 :   mFullDocument = false;</span>
<span class="lineNum">    1341 </span><span class="lineNoCov">          0 :   SanitizeChildren(aFragment);</span>
<span class="lineNum">    1342 </span><span class="lineNoCov">          0 : }</span>
<a name="1343"><span class="lineNum">    1343 </span>            : </a>
<span class="lineNum">    1344 </span>            : void
<span class="lineNum">    1345 </span><span class="lineNoCov">          0 : nsTreeSanitizer::Sanitize(nsIDocument* aDocument)</span>
<span class="lineNum">    1346 </span>            : {
<span class="lineNum">    1347 </span>            :   // If you want to relax these preconditions, be sure to check the code in
<span class="lineNum">    1348 </span>            :   // here that notifies / does not notify or that fires mutation events if
<span class="lineNum">    1349 </span>            :   // in tree.
<span class="lineNum">    1350 </span>            : #ifdef DEBUG
<span class="lineNum">    1351 </span><span class="lineNoCov">          0 :   NS_PRECONDITION(!aDocument-&gt;GetContainer(), &quot;The document is in a shell.&quot;);</span>
<span class="lineNum">    1352 </span><span class="lineNoCov">          0 :   RefPtr&lt;mozilla::dom::Element&gt; root = aDocument-&gt;GetRootElement();</span>
<span class="lineNum">    1353 </span><span class="lineNoCov">          0 :   NS_PRECONDITION(root-&gt;IsHTMLElement(nsGkAtoms::html), &quot;Not HTML root.&quot;);</span>
<span class="lineNum">    1354 </span>            : #endif
<span class="lineNum">    1355 </span>            : 
<span class="lineNum">    1356 </span><span class="lineNoCov">          0 :   mFullDocument = true;</span>
<span class="lineNum">    1357 </span><span class="lineNoCov">          0 :   SanitizeChildren(aDocument);</span>
<span class="lineNum">    1358 </span><span class="lineNoCov">          0 : }</span>
<a name="1359"><span class="lineNum">    1359 </span>            : </a>
<span class="lineNum">    1360 </span>            : void
<span class="lineNum">    1361 </span><span class="lineNoCov">          0 : nsTreeSanitizer::SanitizeChildren(nsINode* aRoot)</span>
<span class="lineNum">    1362 </span>            : {
<span class="lineNum">    1363 </span><span class="lineNoCov">          0 :   nsIContent* node = aRoot-&gt;GetFirstChild();</span>
<span class="lineNum">    1364 </span><span class="lineNoCov">          0 :   while (node) {</span>
<span class="lineNum">    1365 </span><span class="lineNoCov">          0 :     if (node-&gt;IsElement()) {</span>
<span class="lineNum">    1366 </span><span class="lineNoCov">          0 :       mozilla::dom::Element* elt = node-&gt;AsElement();</span>
<span class="lineNum">    1367 </span><span class="lineNoCov">          0 :       mozilla::dom::NodeInfo* nodeInfo = node-&gt;NodeInfo();</span>
<span class="lineNum">    1368 </span><span class="lineNoCov">          0 :       nsIAtom* localName = nodeInfo-&gt;NameAtom();</span>
<span class="lineNum">    1369 </span><span class="lineNoCov">          0 :       int32_t ns = nodeInfo-&gt;NamespaceID();</span>
<span class="lineNum">    1370 </span>            : 
<span class="lineNum">    1371 </span><span class="lineNoCov">          0 :       if (MustPrune(ns, localName, elt)) {</span>
<span class="lineNum">    1372 </span><span class="lineNoCov">          0 :         RemoveAllAttributes(node);</span>
<span class="lineNum">    1373 </span><span class="lineNoCov">          0 :         nsIContent* descendant = node;</span>
<span class="lineNum">    1374 </span><span class="lineNoCov">          0 :         while ((descendant = descendant-&gt;GetNextNode(node))) {</span>
<span class="lineNum">    1375 </span><span class="lineNoCov">          0 :           RemoveAllAttributes(descendant);</span>
<span class="lineNum">    1376 </span>            :         }
<span class="lineNum">    1377 </span><span class="lineNoCov">          0 :         nsIContent* next = node-&gt;GetNextNonChildNode(aRoot);</span>
<span class="lineNum">    1378 </span><span class="lineNoCov">          0 :         node-&gt;RemoveFromParent();</span>
<span class="lineNum">    1379 </span><span class="lineNoCov">          0 :         node = next;</span>
<span class="lineNum">    1380 </span><span class="lineNoCov">          0 :         continue;</span>
<span class="lineNum">    1381 </span>            :       }
<span class="lineNum">    1382 </span><span class="lineNoCov">          0 :       if (nsGkAtoms::style == localName) {</span>
<span class="lineNum">    1383 </span>            :         // If styles aren't allowed, style elements got pruned above. Even
<span class="lineNum">    1384 </span>            :         // if styles are allowed, non-HTML, non-SVG style elements got pruned
<span class="lineNum">    1385 </span>            :         // above.
<span class="lineNum">    1386 </span><span class="lineNoCov">          0 :         NS_ASSERTION(ns == kNameSpaceID_XHTML || ns == kNameSpaceID_SVG,</span>
<span class="lineNum">    1387 </span>            :             &quot;Should have only HTML or SVG here!&quot;);
<span class="lineNum">    1388 </span><span class="lineNoCov">          0 :         nsAutoString styleText;</span>
<span class="lineNum">    1389 </span><span class="lineNoCov">          0 :         nsContentUtils::GetNodeTextContent(node, false, styleText);</span>
<span class="lineNum">    1390 </span>            : 
<span class="lineNum">    1391 </span><span class="lineNoCov">          0 :         nsAutoString sanitizedStyle;</span>
<span class="lineNum">    1392 </span><span class="lineNoCov">          0 :         nsCOMPtr&lt;nsIURI&gt; baseURI = node-&gt;GetBaseURI();</span>
<span class="lineNum">    1393 </span><span class="lineNoCov">          0 :         if (SanitizeStyleSheet(styleText,</span>
<span class="lineNum">    1394 </span>            :                                sanitizedStyle,
<span class="lineNum">    1395 </span>            :                                aRoot-&gt;OwnerDoc(),
<span class="lineNum">    1396 </span>            :                                baseURI)) {
<span class="lineNum">    1397 </span><span class="lineNoCov">          0 :           nsContentUtils::SetNodeTextContent(node, sanitizedStyle, true);</span>
<span class="lineNum">    1398 </span>            :         } else {
<span class="lineNum">    1399 </span>            :           // If the node had non-text child nodes, this operation zaps those.
<span class="lineNum">    1400 </span><span class="lineNoCov">          0 :           nsContentUtils::SetNodeTextContent(node, styleText, true);</span>
<span class="lineNum">    1401 </span>            :         }
<span class="lineNum">    1402 </span><span class="lineNoCov">          0 :         if (ns == kNameSpaceID_XHTML) {</span>
<span class="lineNum">    1403 </span><span class="lineNoCov">          0 :           SanitizeAttributes(elt,</span>
<span class="lineNum">    1404 </span>            :                              sAttributesHTML,
<span class="lineNum">    1405 </span>            :                              (nsIAtom***)kURLAttributesHTML,
<span class="lineNum">    1406 </span>            :                              false,
<span class="lineNum">    1407 </span><span class="lineNoCov">          0 :                              mAllowStyles,</span>
<span class="lineNum">    1408 </span><span class="lineNoCov">          0 :                              false);</span>
<span class="lineNum">    1409 </span>            :         } else {
<span class="lineNum">    1410 </span><span class="lineNoCov">          0 :           SanitizeAttributes(elt,</span>
<span class="lineNum">    1411 </span>            :                              sAttributesSVG,
<span class="lineNum">    1412 </span>            :                              (nsIAtom***)kURLAttributesSVG,
<span class="lineNum">    1413 </span>            :                              true,
<span class="lineNum">    1414 </span><span class="lineNoCov">          0 :                              mAllowStyles,</span>
<span class="lineNum">    1415 </span><span class="lineNoCov">          0 :                              false);</span>
<span class="lineNum">    1416 </span>            :         }
<span class="lineNum">    1417 </span><span class="lineNoCov">          0 :         node = node-&gt;GetNextNonChildNode(aRoot);</span>
<span class="lineNum">    1418 </span><span class="lineNoCov">          0 :         continue;</span>
<span class="lineNum">    1419 </span>            :       }
<span class="lineNum">    1420 </span><span class="lineNoCov">          0 :       if (MustFlatten(ns, localName)) {</span>
<span class="lineNum">    1421 </span><span class="lineNoCov">          0 :         RemoveAllAttributes(node);</span>
<span class="lineNum">    1422 </span><span class="lineNoCov">          0 :         nsCOMPtr&lt;nsIContent&gt; next = node-&gt;GetNextNode(aRoot);</span>
<span class="lineNum">    1423 </span><span class="lineNoCov">          0 :         nsCOMPtr&lt;nsIContent&gt; parent = node-&gt;GetParent();</span>
<span class="lineNum">    1424 </span><span class="lineNoCov">          0 :         nsCOMPtr&lt;nsIContent&gt; child; // Must keep the child alive during move</span>
<span class="lineNum">    1425 </span><span class="lineNoCov">          0 :         ErrorResult rv;</span>
<span class="lineNum">    1426 </span><span class="lineNoCov">          0 :         while ((child = node-&gt;GetFirstChild())) {</span>
<span class="lineNum">    1427 </span><span class="lineNoCov">          0 :           nsCOMPtr&lt;nsINode&gt; refNode = node;</span>
<span class="lineNum">    1428 </span><span class="lineNoCov">          0 :           parent-&gt;InsertBefore(*child, refNode, rv);</span>
<span class="lineNum">    1429 </span><span class="lineNoCov">          0 :           if (rv.Failed()) {</span>
<span class="lineNum">    1430 </span><span class="lineNoCov">          0 :             break;</span>
<span class="lineNum">    1431 </span>            :           }
<span class="lineNum">    1432 </span>            :         }
<span class="lineNum">    1433 </span><span class="lineNoCov">          0 :         node-&gt;RemoveFromParent();</span>
<span class="lineNum">    1434 </span><span class="lineNoCov">          0 :         node = next;</span>
<span class="lineNum">    1435 </span><span class="lineNoCov">          0 :         continue;</span>
<span class="lineNum">    1436 </span>            :       }
<span class="lineNum">    1437 </span><span class="lineNoCov">          0 :       NS_ASSERTION(ns == kNameSpaceID_XHTML ||</span>
<span class="lineNum">    1438 </span>            :                    ns == kNameSpaceID_SVG ||
<span class="lineNum">    1439 </span>            :                    ns == kNameSpaceID_MathML,
<span class="lineNum">    1440 </span>            :           &quot;Should have only HTML, MathML or SVG here!&quot;);
<span class="lineNum">    1441 </span><span class="lineNoCov">          0 :       if (ns == kNameSpaceID_XHTML) {</span>
<span class="lineNum">    1442 </span><span class="lineNoCov">          0 :         SanitizeAttributes(elt,</span>
<span class="lineNum">    1443 </span>            :                            sAttributesHTML,
<span class="lineNum">    1444 </span>            :                            (nsIAtom***)kURLAttributesHTML,
<span class="lineNum">    1445 </span><span class="lineNoCov">          0 :                            false, mAllowStyles,</span>
<span class="lineNum">    1446 </span><span class="lineNoCov">          0 :                            (nsGkAtoms::img == localName) &amp;&amp;</span>
<span class="lineNum">    1447 </span><span class="lineNoCov">          0 :                            !mCidEmbedsOnly);</span>
<span class="lineNum">    1448 </span><span class="lineNoCov">          0 :       } else if (ns == kNameSpaceID_SVG) {</span>
<span class="lineNum">    1449 </span><span class="lineNoCov">          0 :         SanitizeAttributes(elt,</span>
<span class="lineNum">    1450 </span>            :                            sAttributesSVG,
<span class="lineNum">    1451 </span>            :                            (nsIAtom***)kURLAttributesSVG,
<span class="lineNum">    1452 </span>            :                            true,
<span class="lineNum">    1453 </span><span class="lineNoCov">          0 :                            mAllowStyles,</span>
<span class="lineNum">    1454 </span><span class="lineNoCov">          0 :                            false);</span>
<span class="lineNum">    1455 </span>            :       } else {
<span class="lineNum">    1456 </span>            :         SanitizeAttributes(elt,
<span class="lineNum">    1457 </span>            :                            sAttributesMathML,
<span class="lineNum">    1458 </span>            :                            (nsIAtom***)kURLAttributesMathML,
<span class="lineNum">    1459 </span>            :                            true,
<span class="lineNum">    1460 </span>            :                            false,
<span class="lineNum">    1461 </span><span class="lineNoCov">          0 :                            false);</span>
<span class="lineNum">    1462 </span>            :       }
<span class="lineNum">    1463 </span><span class="lineNoCov">          0 :       node = node-&gt;GetNextNode(aRoot);</span>
<span class="lineNum">    1464 </span><span class="lineNoCov">          0 :       continue;</span>
<span class="lineNum">    1465 </span>            :     }
<span class="lineNum">    1466 </span><span class="lineNoCov">          0 :     NS_ASSERTION(!node-&gt;GetFirstChild(), &quot;How come non-element node had kids?&quot;);</span>
<span class="lineNum">    1467 </span><span class="lineNoCov">          0 :     nsIContent* next = node-&gt;GetNextNonChildNode(aRoot);</span>
<span class="lineNum">    1468 </span><span class="lineNoCov">          0 :     if (!mAllowComments &amp;&amp; node-&gt;IsNodeOfType(nsINode::eCOMMENT)) {</span>
<span class="lineNum">    1469 </span><span class="lineNoCov">          0 :       node-&gt;RemoveFromParent();</span>
<span class="lineNum">    1470 </span>            :     }
<span class="lineNum">    1471 </span><span class="lineNoCov">          0 :     node = next;</span>
<span class="lineNum">    1472 </span>            :   }
<span class="lineNum">    1473 </span><span class="lineNoCov">          0 : }</span>
<a name="1474"><span class="lineNum">    1474 </span>            : </a>
<span class="lineNum">    1475 </span>            : void
<span class="lineNum">    1476 </span><span class="lineNoCov">          0 : nsTreeSanitizer::RemoveAllAttributes(nsIContent* aElement)</span>
<span class="lineNum">    1477 </span>            : {
<span class="lineNum">    1478 </span>            :   const nsAttrName* attrName;
<span class="lineNum">    1479 </span><span class="lineNoCov">          0 :   while ((attrName = aElement-&gt;GetAttrNameAt(0))) {</span>
<span class="lineNum">    1480 </span><span class="lineNoCov">          0 :     int32_t attrNs = attrName-&gt;NamespaceID();</span>
<span class="lineNum">    1481 </span><span class="lineNoCov">          0 :     nsCOMPtr&lt;nsIAtom&gt; attrLocal = attrName-&gt;LocalName();</span>
<span class="lineNum">    1482 </span><span class="lineNoCov">          0 :     aElement-&gt;UnsetAttr(attrNs, attrLocal, false);</span>
<span class="lineNum">    1483 </span>            :   }
<span class="lineNum">    1484 </span><span class="lineNoCov">          0 : }</span>
<a name="1485"><span class="lineNum">    1485 </span>            : </a>
<span class="lineNum">    1486 </span>            : void
<span class="lineNum">    1487 </span><span class="lineNoCov">          0 : nsTreeSanitizer::InitializeStatics()</span>
<span class="lineNum">    1488 </span>            : {
<span class="lineNum">    1489 </span><span class="lineNoCov">          0 :   NS_PRECONDITION(!sElementsHTML, &quot;Initializing a second time.&quot;);</span>
<span class="lineNum">    1490 </span>            : 
<span class="lineNum">    1491 </span><span class="lineNoCov">          0 :   sElementsHTML = new nsTHashtable&lt;nsISupportsHashKey&gt;(ArrayLength(kElementsHTML));</span>
<span class="lineNum">    1492 </span><span class="lineNoCov">          0 :   for (uint32_t i = 0; kElementsHTML[i]; i++) {</span>
<span class="lineNum">    1493 </span><span class="lineNoCov">          0 :     sElementsHTML-&gt;PutEntry(*kElementsHTML[i]);</span>
<span class="lineNum">    1494 </span>            :   }
<span class="lineNum">    1495 </span>            : 
<span class="lineNum">    1496 </span><span class="lineNoCov">          0 :   sAttributesHTML = new nsTHashtable&lt;nsISupportsHashKey&gt;(ArrayLength(kAttributesHTML));</span>
<span class="lineNum">    1497 </span><span class="lineNoCov">          0 :   for (uint32_t i = 0; kAttributesHTML[i]; i++) {</span>
<span class="lineNum">    1498 </span><span class="lineNoCov">          0 :     sAttributesHTML-&gt;PutEntry(*kAttributesHTML[i]);</span>
<span class="lineNum">    1499 </span>            :   }
<span class="lineNum">    1500 </span>            : 
<span class="lineNum">    1501 </span><span class="lineNoCov">          0 :   sPresAttributesHTML = new nsTHashtable&lt;nsISupportsHashKey&gt;(ArrayLength(kPresAttributesHTML));</span>
<span class="lineNum">    1502 </span><span class="lineNoCov">          0 :   for (uint32_t i = 0; kPresAttributesHTML[i]; i++) {</span>
<span class="lineNum">    1503 </span><span class="lineNoCov">          0 :     sPresAttributesHTML-&gt;PutEntry(*kPresAttributesHTML[i]);</span>
<span class="lineNum">    1504 </span>            :   }
<span class="lineNum">    1505 </span>            : 
<span class="lineNum">    1506 </span><span class="lineNoCov">          0 :   sElementsSVG = new nsTHashtable&lt;nsISupportsHashKey&gt;(ArrayLength(kElementsSVG));</span>
<span class="lineNum">    1507 </span><span class="lineNoCov">          0 :   for (uint32_t i = 0; kElementsSVG[i]; i++) {</span>
<span class="lineNum">    1508 </span><span class="lineNoCov">          0 :     sElementsSVG-&gt;PutEntry(*kElementsSVG[i]);</span>
<span class="lineNum">    1509 </span>            :   }
<span class="lineNum">    1510 </span>            : 
<span class="lineNum">    1511 </span><span class="lineNoCov">          0 :   sAttributesSVG = new nsTHashtable&lt;nsISupportsHashKey&gt;(ArrayLength(kAttributesSVG));</span>
<span class="lineNum">    1512 </span><span class="lineNoCov">          0 :   for (uint32_t i = 0; kAttributesSVG[i]; i++) {</span>
<span class="lineNum">    1513 </span><span class="lineNoCov">          0 :     sAttributesSVG-&gt;PutEntry(*kAttributesSVG[i]);</span>
<span class="lineNum">    1514 </span>            :   }
<span class="lineNum">    1515 </span>            : 
<span class="lineNum">    1516 </span><span class="lineNoCov">          0 :   sElementsMathML = new nsTHashtable&lt;nsISupportsHashKey&gt;(ArrayLength(kElementsMathML));</span>
<span class="lineNum">    1517 </span><span class="lineNoCov">          0 :   for (uint32_t i = 0; kElementsMathML[i]; i++) {</span>
<span class="lineNum">    1518 </span><span class="lineNoCov">          0 :     sElementsMathML-&gt;PutEntry(*kElementsMathML[i]);</span>
<span class="lineNum">    1519 </span>            :   }
<span class="lineNum">    1520 </span>            : 
<span class="lineNum">    1521 </span><span class="lineNoCov">          0 :   sAttributesMathML = new nsTHashtable&lt;nsISupportsHashKey&gt;(ArrayLength(kAttributesMathML));</span>
<span class="lineNum">    1522 </span><span class="lineNoCov">          0 :   for (uint32_t i = 0; kAttributesMathML[i]; i++) {</span>
<span class="lineNum">    1523 </span><span class="lineNoCov">          0 :     sAttributesMathML-&gt;PutEntry(*kAttributesMathML[i]);</span>
<span class="lineNum">    1524 </span>            :   }
<span class="lineNum">    1525 </span>            : 
<span class="lineNum">    1526 </span><span class="lineNoCov">          0 :   nsCOMPtr&lt;nsIPrincipal&gt; principal = NullPrincipal::Create();</span>
<span class="lineNum">    1527 </span><span class="lineNoCov">          0 :   principal.forget(&amp;sNullPrincipal);</span>
<span class="lineNum">    1528 </span><span class="lineNoCov">          0 : }</span>
<a name="1529"><span class="lineNum">    1529 </span>            : </a>
<span class="lineNum">    1530 </span>            : void
<span class="lineNum">    1531 </span><span class="lineNoCov">          0 : nsTreeSanitizer::ReleaseStatics()</span>
<span class="lineNum">    1532 </span>            : {
<span class="lineNum">    1533 </span><span class="lineNoCov">          0 :   delete sElementsHTML;</span>
<span class="lineNum">    1534 </span><span class="lineNoCov">          0 :   sElementsHTML = nullptr;</span>
<span class="lineNum">    1535 </span>            : 
<span class="lineNum">    1536 </span><span class="lineNoCov">          0 :   delete sAttributesHTML;</span>
<span class="lineNum">    1537 </span><span class="lineNoCov">          0 :   sAttributesHTML = nullptr;</span>
<span class="lineNum">    1538 </span>            : 
<span class="lineNum">    1539 </span><span class="lineNoCov">          0 :   delete sPresAttributesHTML;</span>
<span class="lineNum">    1540 </span><span class="lineNoCov">          0 :   sPresAttributesHTML = nullptr;</span>
<span class="lineNum">    1541 </span>            : 
<span class="lineNum">    1542 </span><span class="lineNoCov">          0 :   delete sElementsSVG;</span>
<span class="lineNum">    1543 </span><span class="lineNoCov">          0 :   sElementsSVG = nullptr;</span>
<span class="lineNum">    1544 </span>            : 
<span class="lineNum">    1545 </span><span class="lineNoCov">          0 :   delete sAttributesSVG;</span>
<span class="lineNum">    1546 </span><span class="lineNoCov">          0 :   sAttributesSVG = nullptr;</span>
<span class="lineNum">    1547 </span>            : 
<span class="lineNum">    1548 </span><span class="lineNoCov">          0 :   delete sElementsMathML;</span>
<span class="lineNum">    1549 </span><span class="lineNoCov">          0 :   sElementsMathML = nullptr;</span>
<span class="lineNum">    1550 </span>            : 
<span class="lineNum">    1551 </span><span class="lineNoCov">          0 :   delete sAttributesMathML;</span>
<span class="lineNum">    1552 </span><span class="lineNoCov">          0 :   sAttributesMathML = nullptr;</span>
<span class="lineNum">    1553 </span>            : 
<span class="lineNum">    1554 </span><span class="lineNoCov">          0 :   NS_IF_RELEASE(sNullPrincipal);</span>
<span class="lineNum">    1555 </span><span class="lineNoCov">          0 : }</span>
</pre>
      </td>
    </tr>
  </table>
  <br>

  <table width="100%" border=0 cellspacing=0 cellpadding=0>
    <tr><td class="ruler"><img src="../../glass.png" width=3 height=3 alt=""></td></tr>
    <tr><td class="versionInfo">Generated by: <a href="http://ltp.sourceforge.net/coverage/lcov.php" target="_parent">LCOV version 1.13</a></td></tr>
  </table>
  <br>

</body>
</html>
