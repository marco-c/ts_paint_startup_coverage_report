<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">

<html lang="en">

<head>
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
  <title>LCOV - output.info - intl/icu/source/common/resbund.cpp</title>
  <link rel="stylesheet" type="text/css" href="../../../../gcov.css">
</head>

<body>

  <table width="100%" border=0 cellspacing=0 cellpadding=0>
    <tr><td class="title">LCOV - code coverage report</td></tr>
    <tr><td class="ruler"><img src="../../../../glass.png" width=3 height=3 alt=""></td></tr>

    <tr>
      <td width="100%">
        <table cellpadding=1 border=0 width="100%">
          <tr>
            <td width="10%" class="headerItem">Current view:</td>
            <td width="35%" class="headerValue"><a href="../../../../index.html">top level</a> - <a href="index.html">intl/icu/source/common</a> - resbund.cpp<span style="font-size: 80%;"> (source / <a href="resbund.cpp.func-sort-c.html">functions</a>)</span></td>
            <td width="5%"></td>
            <td width="15%"></td>
            <td width="10%" class="headerCovTableHead">Hit</td>
            <td width="10%" class="headerCovTableHead">Total</td>
            <td width="15%" class="headerCovTableHead">Coverage</td>
          </tr>
          <tr>
            <td class="headerItem">Test:</td>
            <td class="headerValue">output.info</td>
            <td></td>
            <td class="headerItem">Lines:</td>
            <td class="headerCovTableEntry">0</td>
            <td class="headerCovTableEntry">129</td>
            <td class="headerCovTableEntryLo">0.0 %</td>
          </tr>
          <tr>
            <td class="headerItem">Date:</td>
            <td class="headerValue">2017-07-14 16:53:18</td>
            <td></td>
            <td class="headerItem">Functions:</td>
            <td class="headerCovTableEntry">0</td>
            <td class="headerCovTableEntry">33</td>
            <td class="headerCovTableEntryLo">0.0 %</td>
          </tr>
          <tr>
            <td class="headerItem">Legend:</td>
            <td class="headerValueLeg">            Lines:
            <span class="coverLegendCov">hit</span>
            <span class="coverLegendNoCov">not hit</span>
</td>
            <td></td>
          </tr>
          <tr><td><img src="../../../../glass.png" width=3 height=3 alt=""></td></tr>
        </table>
      </td>
    </tr>

    <tr><td class="ruler"><img src="../../../../glass.png" width=3 height=3 alt=""></td></tr>
  </table>

  <table cellpadding=0 cellspacing=0 border=0>
    <tr>
      <td><br></td>
    </tr>
    <tr>
      <td>
<pre class="sourceHeading">          Line data    Source code</pre>
<pre class="source">
<a name="1"><span class="lineNum">       1 </span>            : // Â© 2016 and later: Unicode, Inc. and others.</a>
<span class="lineNum">       2 </span>            : // License &amp; terms of use: http://www.unicode.org/copyright.html
<span class="lineNum">       3 </span>            : /*
<span class="lineNum">       4 </span>            : **********************************************************************
<span class="lineNum">       5 </span>            : *   Copyright (C) 1997-2013, International Business Machines
<span class="lineNum">       6 </span>            : *   Corporation and others.  All Rights Reserved.
<span class="lineNum">       7 </span>            : **********************************************************************
<span class="lineNum">       8 </span>            : *
<span class="lineNum">       9 </span>            : * File resbund.cpp
<span class="lineNum">      10 </span>            : *
<span class="lineNum">      11 </span>            : * Modification History:
<span class="lineNum">      12 </span>            : *
<span class="lineNum">      13 </span>            : *   Date        Name        Description
<span class="lineNum">      14 </span>            : *   02/05/97    aliu        Fixed bug in chopLocale.  Added scanForLocaleInFile
<span class="lineNum">      15 </span>            : *                           based on code taken from scanForLocale.  Added
<span class="lineNum">      16 </span>            : *                           constructor which attempts to read resource bundle
<span class="lineNum">      17 </span>            : *                           from a specific file, without searching other files.
<span class="lineNum">      18 </span>            : *   02/11/97    aliu        Added UErrorCode return values to constructors. Fixed
<span class="lineNum">      19 </span>            : *                           infinite loops in scanForFile and scanForLocale.
<span class="lineNum">      20 </span>            : *                           Modified getRawResourceData to not delete storage in
<span class="lineNum">      21 </span>            : *                           localeData and resourceData which it doesn't own.
<span class="lineNum">      22 </span>            : *                           Added Mac compatibility #ifdefs for tellp() and
<span class="lineNum">      23 </span>            : *                           ios::nocreate.
<span class="lineNum">      24 </span>            : *   03/04/97    aliu        Modified to use ExpandingDataSink objects instead of
<span class="lineNum">      25 </span>            : *                           the highly inefficient ostrstream objects.
<span class="lineNum">      26 </span>            : *   03/13/97    aliu        Rewrote to load in entire resource bundle and store
<span class="lineNum">      27 </span>            : *                           it as a Hashtable of ResourceBundleData objects.
<span class="lineNum">      28 </span>            : *                           Added state table to govern parsing of files.
<span class="lineNum">      29 </span>            : *                           Modified to load locale index out of new file distinct
<span class="lineNum">      30 </span>            : *                           from default.txt.
<span class="lineNum">      31 </span>            : *   03/25/97    aliu        Modified to support 2-d arrays, needed for timezone data.
<span class="lineNum">      32 </span>            : *                           Added support for custom file suffixes.  Again, needed
<span class="lineNum">      33 </span>            : *                           to support timezone data.  Improved error handling to
<span class="lineNum">      34 </span>            : *                           detect duplicate tags and subtags.
<span class="lineNum">      35 </span>            : *   04/07/97    aliu        Fixed bug in getHashtableForLocale().  Fixed handling
<span class="lineNum">      36 </span>            : *                           of failing UErrorCode values on entry to API methods.
<span class="lineNum">      37 </span>            : *                           Fixed bugs in getArrayItem() for negative indices.
<span class="lineNum">      38 </span>            : *   04/29/97    aliu        Update to use new Hashtable deletion protocol.
<span class="lineNum">      39 </span>            : *   05/06/97    aliu        Flattened kTransitionTable for HP compiler.
<span class="lineNum">      40 </span>            : *                           Fixed usage of CharString.
<span class="lineNum">      41 </span>            : * 06/11/99      stephen     Removed parsing of .txt files.
<span class="lineNum">      42 </span>            : *                           Reworked to use new binary format.
<span class="lineNum">      43 </span>            : *                           Cleaned up.
<span class="lineNum">      44 </span>            : * 06/14/99      stephen     Removed methods taking a filename suffix.
<span class="lineNum">      45 </span>            : * 06/22/99      stephen     Added missing T_FileStream_close in parse()
<span class="lineNum">      46 </span>            : * 11/09/99      weiv        Added getLocale(), rewritten constructForLocale()
<span class="lineNum">      47 </span>            : * March 2000    weiv        complete overhaul.
<span class="lineNum">      48 </span>            : ******************************************************************************
<span class="lineNum">      49 </span>            : */
<span class="lineNum">      50 </span>            : 
<span class="lineNum">      51 </span>            : #include &quot;unicode/utypes.h&quot;
<span class="lineNum">      52 </span>            : #include &quot;unicode/resbund.h&quot;
<span class="lineNum">      53 </span>            : 
<span class="lineNum">      54 </span>            : #include &quot;mutex.h&quot;
<span class="lineNum">      55 </span>            : #include &quot;uassert.h&quot;
<span class="lineNum">      56 </span>            : #include &quot;umutex.h&quot;
<span class="lineNum">      57 </span>            : 
<span class="lineNum">      58 </span>            : #include &quot;uresimp.h&quot;
<span class="lineNum">      59 </span>            : 
<span class="lineNum">      60 </span>            : U_NAMESPACE_BEGIN
<span class="lineNum">      61 </span>            : 
<span class="lineNum">      62 </span>            : /*-----------------------------------------------------------------------------
<span class="lineNum">      63 </span>            :  * Implementation Notes
<span class="lineNum">      64 </span>            :  *
<span class="lineNum">      65 </span>            :  * Resource bundles are read in once, and thereafter cached.
<span class="lineNum">      66 </span>            :  * ResourceBundle statically keeps track of which files have been
<span class="lineNum">      67 </span>            :  * read, so we are guaranteed that each file is read at most once.
<span class="lineNum">      68 </span>            :  * Resource bundles can be loaded from different data directories and
<span class="lineNum">      69 </span>            :  * will be treated as distinct, even if they are for the same locale.
<span class="lineNum">      70 </span>            :  *
<span class="lineNum">      71 </span>            :  * Resource bundles are lightweight objects, which have pointers to
<span class="lineNum">      72 </span>            :  * one or more shared Hashtable objects containing all the data.
<span class="lineNum">      73 </span>            :  * Copying would be cheap, but there is no copy constructor, since
<span class="lineNum">      74 </span>            :  * there wasn't one in the original API.
<span class="lineNum">      75 </span>            :  *
<span class="lineNum">      76 </span>            :  * The ResourceBundle parsing mechanism is implemented as a transition
<span class="lineNum">      77 </span>            :  * network, for easy maintenance and modification.  The network is
<span class="lineNum">      78 </span>            :  * implemented as a matrix (instead of in code) to make this even
<span class="lineNum">      79 </span>            :  * easier.  The matrix contains Transition objects.  Each Transition
<span class="lineNum">      80 </span>            :  * object describes a destination node and an action to take before
<span class="lineNum">      81 </span>            :  * moving to the destination node.  The source node is encoded by the
<span class="lineNum">      82 </span>            :  * index of the object in the array that contains it.  The pieces
<span class="lineNum">      83 </span>            :  * needed to understand the transition network are the enums for node
<span class="lineNum">      84 </span>            :  * IDs and actions, the parse() method, which walks through the
<span class="lineNum">      85 </span>            :  * network and implements the actions, and the network itself.  The
<span class="lineNum">      86 </span>            :  * network guarantees certain conditions, for example, that a new
<span class="lineNum">      87 </span>            :  * resource will not be closed until one has been opened first; or
<span class="lineNum">      88 </span>            :  * that data will not be stored into a TaggedList until a TaggedList
<span class="lineNum">      89 </span>            :  * has been created.  Nonetheless, the code in parse() does some
<span class="lineNum">      90 </span>            :  * consistency checks as it runs the network, and fails with an
<span class="lineNum">      91 </span>            :  * U_INTERNAL_PROGRAM_ERROR if one of these checks fails.  If the input
<span class="lineNum">      92 </span>            :  * data has a bad format, an U_INVALID_FORMAT_ERROR is returned.  If you
<span class="lineNum">      93 </span>            :  * see an U_INTERNAL_PROGRAM_ERROR the transition matrix has a bug in
<span class="lineNum">      94 </span>            :  * it.
<span class="lineNum">      95 </span>            :  *
<span class="lineNum">      96 </span>            :  * Old functionality of multiple locales in a single file is still
<span class="lineNum">      97 </span>            :  * supported.  For this reason, LOCALE names override FILE names.  If
<span class="lineNum">      98 </span>            :  * data for en_US is located in the en.txt file, once it is loaded,
<span class="lineNum">      99 </span>            :  * the code will not care where it came from (other than remembering
<span class="lineNum">     100 </span>            :  * which directory it came from).  However, if there is an en_US
<span class="lineNum">     101 </span>            :  * resource in en_US.txt, that will take precedence.  There is no
<span class="lineNum">     102 </span>            :  * limit to the number or type of resources that can be stored in a
<span class="lineNum">     103 </span>            :  * file, however, files are only searched in a specific way.  If
<span class="lineNum">     104 </span>            :  * en_US_CA is requested, then first en_US_CA.txt is searched, then
<span class="lineNum">     105 </span>            :  * en_US.txt, then en.txt, then default.txt.  So it only makes sense
<span class="lineNum">     106 </span>            :  * to put certain locales in certain files.  In this example, it would
<span class="lineNum">     107 </span>            :  * be logical to put en_US_CA, en_US, and en into the en.txt file,
<span class="lineNum">     108 </span>            :  * since they would be found there if asked for.  The extreme example
<span class="lineNum">     109 </span>            :  * is to place all locale resources into default.txt, which should
<span class="lineNum">     110 </span>            :  * also work.
<span class="lineNum">     111 </span>            :  *
<span class="lineNum">     112 </span>            :  * Inheritance is implemented.  For example, xx_YY_zz inherits as
<span class="lineNum">     113 </span>            :  * follows: xx_YY_zz, xx_YY, xx, default.  Inheritance is implemented
<span class="lineNum">     114 </span>            :  * as an array of hashtables.  There will be from 1 to 4 hashtables in
<span class="lineNum">     115 </span>            :  * the array.
<span class="lineNum">     116 </span>            :  *
<span class="lineNum">     117 </span>            :  * Fallback files are implemented.  The fallback pattern is Language
<span class="lineNum">     118 </span>            :  * Country Variant (LCV) -&gt; LC -&gt; L.  Fallback is first done for the
<span class="lineNum">     119 </span>            :  * requested locale.  Then it is done for the default locale, as
<span class="lineNum">     120 </span>            :  * returned by Locale::getDefault().  Then the special file
<span class="lineNum">     121 </span>            :  * default.txt is searched for the default locale.  The overall FILE
<span class="lineNum">     122 </span>            :  * fallback path is LCV -&gt; LC -&gt; L -&gt; dLCV -&gt; dLC -&gt; dL -&gt; default.
<span class="lineNum">     123 </span>            :  *
<span class="lineNum">     124 </span>            :  * Note that although file name searching includes the default locale,
<span class="lineNum">     125 </span>            :  * once a ResourceBundle object is constructed, the inheritance path
<span class="lineNum">     126 </span>            :  * no longer includes the default locale.  The path is LCV -&gt; LC -&gt; L
<span class="lineNum">     127 </span>            :  * -&gt; default.
<span class="lineNum">     128 </span>            :  *
<span class="lineNum">     129 </span>            :  * File parsing is lazy.  Nothing is parsed unless it is called for by
<span class="lineNum">     130 </span>            :  * someone.  So when a ResourceBundle for xx_YY_zz is constructed,
<span class="lineNum">     131 </span>            :  * only that locale is parsed (along with anything else in the same
<span class="lineNum">     132 </span>            :  * file).  Later, if the FooBar tag is asked for, and if it isn't
<span class="lineNum">     133 </span>            :  * found in xx_YY_zz, then xx_YY.txt will be parsed and checked, and
<span class="lineNum">     134 </span>            :  * so forth, until the chain is exhausted or the tag is found.
<span class="lineNum">     135 </span>            :  *
<span class="lineNum">     136 </span>            :  * Thread-safety is implemented around caches, both the cache that
<span class="lineNum">     137 </span>            :  * stores all the resouce data, and the cache that stores flags
<span class="lineNum">     138 </span>            :  * indicating whether or not a file has been visited.  These caches
<span class="lineNum">     139 </span>            :  * delete their storage at static cleanup time, when the process
<span class="lineNum">     140 </span>            :  * quits.
<span class="lineNum">     141 </span>            :  *
<span class="lineNum">     142 </span>            :  * ResourceBundle supports TableCollation as a special case.  This
<span class="lineNum">     143 </span>            :  * involves having special ResourceBundle objects which DO own their
<span class="lineNum">     144 </span>            :  * data, since we don't want large collation rule strings in the
<span class="lineNum">     145 </span>            :  * ResourceBundle cache (these are already cached in the
<span class="lineNum">     146 </span>            :  * TableCollation cache).  TableCollation files (.ctx files) have the
<span class="lineNum">     147 </span>            :  * same format as normal resource data files, with a different
<span class="lineNum">     148 </span>            :  * interpretation, from the standpoint of ResourceBundle.  .ctx files
<span class="lineNum">     149 </span>            :  * are loaded into otherwise ordinary ResourceBundle objects.  They
<span class="lineNum">     150 </span>            :  * don't inherit (that's implemented by TableCollation) and they own
<span class="lineNum">     151 </span>            :  * their data (as mentioned above).  However, they still support
<span class="lineNum">     152 </span>            :  * possible multiple locales in a single .ctx file.  (This is in
<span class="lineNum">     153 </span>            :  * practice a bad idea, since you only want the one locale you're
<span class="lineNum">     154 </span>            :  * looking for, and only one tag will be present
<span class="lineNum">     155 </span>            :  * (&quot;CollationElements&quot;), so you don't need an inheritance chain of
<span class="lineNum">     156 </span>            :  * multiple locales.)  Up to 4 locale resources will be loaded from a
<span class="lineNum">     157 </span>            :  * .ctx file; everything after the first 4 is ignored (parsed and
<span class="lineNum">     158 </span>            :  * deleted).  (Normal .txt files have no limit.)  Instead of being
<span class="lineNum">     159 </span>            :  * loaded into the cache, and then looked up as needed, the locale
<span class="lineNum">     160 </span>            :  * resources are read straight into the ResourceBundle object.
<span class="lineNum">     161 </span>            :  *
<span class="lineNum">     162 </span>            :  * The Index, which used to reside in default.txt, has been moved to a
<span class="lineNum">     163 </span>            :  * new file, index.txt.  This file contains a slightly modified format
<span class="lineNum">     164 </span>            :  * with the addition of the &quot;InstalledLocales&quot; tag; it looks like:
<span class="lineNum">     165 </span>            :  *
<span class="lineNum">     166 </span>            :  * Index {
<span class="lineNum">     167 </span>            :  *   InstalledLocales {
<span class="lineNum">     168 </span>            :  *     ar
<span class="lineNum">     169 </span>            :  *     ..
<span class="lineNum">     170 </span>            :  *     zh_TW
<span class="lineNum">     171 </span>            :  *   }
<span class="lineNum">     172 </span>            :  * }
<span class="lineNum">     173 </span>            :  */
<a name="174"><span class="lineNum">     174 </span>            : //-----------------------------------------------------------------------------</a>
<span class="lineNum">     175 </span>            : 
<a name="176"><span class="lineNum">     176 </span><span class="lineNoCov">          0 : UOBJECT_DEFINE_RTTI_IMPLEMENTATION(ResourceBundle)</span></a>
<span class="lineNum">     177 </span>            : 
<span class="lineNum">     178 </span><span class="lineNoCov">          0 : ResourceBundle::ResourceBundle(UErrorCode &amp;err)</span>
<span class="lineNum">     179 </span><span class="lineNoCov">          0 :                                 :UObject(), fLocale(NULL)</span>
<span class="lineNum">     180 </span>            : {
<span class="lineNum">     181 </span><span class="lineNoCov">          0 :     fResource = ures_open(0, Locale::getDefault().getName(), &amp;err);</span>
<a name="182"><span class="lineNum">     182 </span><span class="lineNoCov">          0 : }</span></a>
<span class="lineNum">     183 </span>            : 
<span class="lineNum">     184 </span><span class="lineNoCov">          0 : ResourceBundle::ResourceBundle(const ResourceBundle &amp;other)</span>
<span class="lineNum">     185 </span><span class="lineNoCov">          0 :                               :UObject(other), fLocale(NULL)</span>
<span class="lineNum">     186 </span>            : {
<span class="lineNum">     187 </span><span class="lineNoCov">          0 :     UErrorCode status = U_ZERO_ERROR;</span>
<span class="lineNum">     188 </span>            : 
<span class="lineNum">     189 </span><span class="lineNoCov">          0 :     if (other.fResource) {</span>
<span class="lineNum">     190 </span><span class="lineNoCov">          0 :         fResource = ures_copyResb(0, other.fResource, &amp;status);</span>
<span class="lineNum">     191 </span>            :     } else {
<span class="lineNum">     192 </span>            :         /* Copying a bad resource bundle */
<span class="lineNum">     193 </span><span class="lineNoCov">          0 :         fResource = NULL;</span>
<span class="lineNum">     194 </span>            :     }
<a name="195"><span class="lineNum">     195 </span><span class="lineNoCov">          0 : }</span></a>
<span class="lineNum">     196 </span>            : 
<span class="lineNum">     197 </span><span class="lineNoCov">          0 : ResourceBundle::ResourceBundle(UResourceBundle *res, UErrorCode&amp; err)</span>
<span class="lineNum">     198 </span><span class="lineNoCov">          0 :                                :UObject(), fLocale(NULL)</span>
<span class="lineNum">     199 </span>            : {
<span class="lineNum">     200 </span><span class="lineNoCov">          0 :     if (res) {</span>
<span class="lineNum">     201 </span><span class="lineNoCov">          0 :         fResource = ures_copyResb(0, res, &amp;err);</span>
<span class="lineNum">     202 </span>            :     } else {
<span class="lineNum">     203 </span>            :         /* Copying a bad resource bundle */
<span class="lineNum">     204 </span><span class="lineNoCov">          0 :         fResource = NULL;</span>
<span class="lineNum">     205 </span>            :     }
<a name="206"><span class="lineNum">     206 </span><span class="lineNoCov">          0 : }</span></a>
<span class="lineNum">     207 </span>            : 
<span class="lineNum">     208 </span><span class="lineNoCov">          0 : ResourceBundle::ResourceBundle(const char* path, const Locale&amp; locale, UErrorCode&amp; err) </span>
<span class="lineNum">     209 </span><span class="lineNoCov">          0 :                                :UObject(), fLocale(NULL)</span>
<span class="lineNum">     210 </span>            : {
<span class="lineNum">     211 </span><span class="lineNoCov">          0 :     fResource = ures_open(path, locale.getName(), &amp;err);</span>
<span class="lineNum">     212 </span><span class="lineNoCov">          0 : }</span>
<a name="213"><span class="lineNum">     213 </span>            : </a>
<span class="lineNum">     214 </span>            : 
<span class="lineNum">     215 </span><span class="lineNoCov">          0 : ResourceBundle&amp; ResourceBundle::operator=(const ResourceBundle&amp; other)</span>
<span class="lineNum">     216 </span>            : {
<span class="lineNum">     217 </span><span class="lineNoCov">          0 :     if(this == &amp;other) {</span>
<span class="lineNum">     218 </span><span class="lineNoCov">          0 :         return *this;</span>
<span class="lineNum">     219 </span>            :     }
<span class="lineNum">     220 </span><span class="lineNoCov">          0 :     if(fResource != 0) {</span>
<span class="lineNum">     221 </span><span class="lineNoCov">          0 :         ures_close(fResource);</span>
<span class="lineNum">     222 </span><span class="lineNoCov">          0 :         fResource = NULL;</span>
<span class="lineNum">     223 </span>            :     }
<span class="lineNum">     224 </span><span class="lineNoCov">          0 :     if (fLocale != NULL) {</span>
<span class="lineNum">     225 </span><span class="lineNoCov">          0 :         delete fLocale;</span>
<span class="lineNum">     226 </span><span class="lineNoCov">          0 :         fLocale = NULL;</span>
<span class="lineNum">     227 </span>            :     }
<span class="lineNum">     228 </span><span class="lineNoCov">          0 :     UErrorCode status = U_ZERO_ERROR;</span>
<span class="lineNum">     229 </span><span class="lineNoCov">          0 :     if (other.fResource) {</span>
<span class="lineNum">     230 </span><span class="lineNoCov">          0 :         fResource = ures_copyResb(0, other.fResource, &amp;status);</span>
<span class="lineNum">     231 </span>            :     } else {
<span class="lineNum">     232 </span>            :         /* Copying a bad resource bundle */
<span class="lineNum">     233 </span><span class="lineNoCov">          0 :         fResource = NULL;</span>
<span class="lineNum">     234 </span>            :     }
<span class="lineNum">     235 </span><span class="lineNoCov">          0 :     return *this;</span>
<a name="236"><span class="lineNum">     236 </span>            : }</a>
<span class="lineNum">     237 </span>            : 
<span class="lineNum">     238 </span><span class="lineNoCov">          0 : ResourceBundle::~ResourceBundle()</span>
<span class="lineNum">     239 </span>            : {
<span class="lineNum">     240 </span><span class="lineNoCov">          0 :     if(fResource != 0) {</span>
<span class="lineNum">     241 </span><span class="lineNoCov">          0 :         ures_close(fResource);</span>
<span class="lineNum">     242 </span>            :     }
<span class="lineNum">     243 </span><span class="lineNoCov">          0 :     if(fLocale != NULL) {</span>
<span class="lineNum">     244 </span><span class="lineNoCov">          0 :       delete(fLocale);</span>
<span class="lineNum">     245 </span>            :     }
<span class="lineNum">     246 </span><span class="lineNoCov">          0 : }</span>
<a name="247"><span class="lineNum">     247 </span>            : </a>
<span class="lineNum">     248 </span>            : ResourceBundle *
<span class="lineNum">     249 </span><span class="lineNoCov">          0 : ResourceBundle::clone() const {</span>
<span class="lineNum">     250 </span><span class="lineNoCov">          0 :     return new ResourceBundle(*this);</span>
<a name="251"><span class="lineNum">     251 </span>            : }</a>
<span class="lineNum">     252 </span>            : 
<span class="lineNum">     253 </span><span class="lineNoCov">          0 : UnicodeString ResourceBundle::getString(UErrorCode&amp; status) const {</span>
<span class="lineNum">     254 </span><span class="lineNoCov">          0 :     int32_t len = 0;</span>
<span class="lineNum">     255 </span><span class="lineNoCov">          0 :     const UChar *r = ures_getString(fResource, &amp;len, &amp;status);</span>
<span class="lineNum">     256 </span><span class="lineNoCov">          0 :     return UnicodeString(TRUE, r, len);</span>
<a name="257"><span class="lineNum">     257 </span>            : }</a>
<span class="lineNum">     258 </span>            : 
<span class="lineNum">     259 </span><span class="lineNoCov">          0 : const uint8_t *ResourceBundle::getBinary(int32_t&amp; len, UErrorCode&amp; status) const {</span>
<span class="lineNum">     260 </span><span class="lineNoCov">          0 :     return ures_getBinary(fResource, &amp;len, &amp;status);</span>
<a name="261"><span class="lineNum">     261 </span>            : }</a>
<span class="lineNum">     262 </span>            : 
<span class="lineNum">     263 </span><span class="lineNoCov">          0 : const int32_t *ResourceBundle::getIntVector(int32_t&amp; len, UErrorCode&amp; status) const {</span>
<span class="lineNum">     264 </span><span class="lineNoCov">          0 :     return ures_getIntVector(fResource, &amp;len, &amp;status);</span>
<a name="265"><span class="lineNum">     265 </span>            : }</a>
<span class="lineNum">     266 </span>            : 
<span class="lineNum">     267 </span><span class="lineNoCov">          0 : uint32_t ResourceBundle::getUInt(UErrorCode&amp; status) const {</span>
<span class="lineNum">     268 </span><span class="lineNoCov">          0 :     return ures_getUInt(fResource, &amp;status);</span>
<a name="269"><span class="lineNum">     269 </span>            : }</a>
<span class="lineNum">     270 </span>            : 
<span class="lineNum">     271 </span><span class="lineNoCov">          0 : int32_t ResourceBundle::getInt(UErrorCode&amp; status) const {</span>
<span class="lineNum">     272 </span><span class="lineNoCov">          0 :     return ures_getInt(fResource, &amp;status);</span>
<a name="273"><span class="lineNum">     273 </span>            : }</a>
<span class="lineNum">     274 </span>            : 
<span class="lineNum">     275 </span><span class="lineNoCov">          0 : const char *ResourceBundle::getName(void) const {</span>
<span class="lineNum">     276 </span><span class="lineNoCov">          0 :     return ures_getName(fResource);</span>
<a name="277"><span class="lineNum">     277 </span>            : }</a>
<span class="lineNum">     278 </span>            : 
<span class="lineNum">     279 </span><span class="lineNoCov">          0 : const char *ResourceBundle::getKey(void) const {</span>
<span class="lineNum">     280 </span><span class="lineNoCov">          0 :     return ures_getKey(fResource);</span>
<a name="281"><span class="lineNum">     281 </span>            : }</a>
<span class="lineNum">     282 </span>            : 
<span class="lineNum">     283 </span><span class="lineNoCov">          0 : UResType ResourceBundle::getType(void) const {</span>
<span class="lineNum">     284 </span><span class="lineNoCov">          0 :     return ures_getType(fResource);</span>
<a name="285"><span class="lineNum">     285 </span>            : }</a>
<span class="lineNum">     286 </span>            : 
<span class="lineNum">     287 </span><span class="lineNoCov">          0 : int32_t ResourceBundle::getSize(void) const {</span>
<span class="lineNum">     288 </span><span class="lineNoCov">          0 :     return ures_getSize(fResource);</span>
<a name="289"><span class="lineNum">     289 </span>            : }</a>
<span class="lineNum">     290 </span>            : 
<span class="lineNum">     291 </span><span class="lineNoCov">          0 : UBool ResourceBundle::hasNext(void) const {</span>
<span class="lineNum">     292 </span><span class="lineNoCov">          0 :     return ures_hasNext(fResource);</span>
<a name="293"><span class="lineNum">     293 </span>            : }</a>
<span class="lineNum">     294 </span>            : 
<span class="lineNum">     295 </span><span class="lineNoCov">          0 : void ResourceBundle::resetIterator(void) {</span>
<span class="lineNum">     296 </span><span class="lineNoCov">          0 :     ures_resetIterator(fResource);</span>
<a name="297"><span class="lineNum">     297 </span><span class="lineNoCov">          0 : }</span></a>
<span class="lineNum">     298 </span>            : 
<span class="lineNum">     299 </span><span class="lineNoCov">          0 : ResourceBundle ResourceBundle::getNext(UErrorCode&amp; status) {</span>
<span class="lineNum">     300 </span>            :     UResourceBundle r;
<span class="lineNum">     301 </span>            : 
<span class="lineNum">     302 </span><span class="lineNoCov">          0 :     ures_initStackObject(&amp;r);</span>
<span class="lineNum">     303 </span><span class="lineNoCov">          0 :     ures_getNextResource(fResource, &amp;r, &amp;status);</span>
<span class="lineNum">     304 </span><span class="lineNoCov">          0 :     ResourceBundle res(&amp;r, status);</span>
<span class="lineNum">     305 </span><span class="lineNoCov">          0 :     if (U_SUCCESS(status)) {</span>
<span class="lineNum">     306 </span><span class="lineNoCov">          0 :         ures_close(&amp;r);</span>
<span class="lineNum">     307 </span>            :     }
<span class="lineNum">     308 </span><span class="lineNoCov">          0 :     return res;</span>
<a name="309"><span class="lineNum">     309 </span>            : }</a>
<span class="lineNum">     310 </span>            : 
<span class="lineNum">     311 </span><span class="lineNoCov">          0 : UnicodeString ResourceBundle::getNextString(UErrorCode&amp; status) {</span>
<span class="lineNum">     312 </span><span class="lineNoCov">          0 :     int32_t len = 0;</span>
<span class="lineNum">     313 </span><span class="lineNoCov">          0 :     const UChar* r = ures_getNextString(fResource, &amp;len, 0, &amp;status);</span>
<span class="lineNum">     314 </span><span class="lineNoCov">          0 :     return UnicodeString(TRUE, r, len);</span>
<a name="315"><span class="lineNum">     315 </span>            : }</a>
<span class="lineNum">     316 </span>            : 
<span class="lineNum">     317 </span><span class="lineNoCov">          0 : UnicodeString ResourceBundle::getNextString(const char ** key, UErrorCode&amp; status) {</span>
<span class="lineNum">     318 </span><span class="lineNoCov">          0 :     int32_t len = 0;</span>
<span class="lineNum">     319 </span><span class="lineNoCov">          0 :     const UChar* r = ures_getNextString(fResource, &amp;len, key, &amp;status);</span>
<span class="lineNum">     320 </span><span class="lineNoCov">          0 :     return UnicodeString(TRUE, r, len);</span>
<a name="321"><span class="lineNum">     321 </span>            : }</a>
<span class="lineNum">     322 </span>            : 
<span class="lineNum">     323 </span><span class="lineNoCov">          0 : ResourceBundle ResourceBundle::get(int32_t indexR, UErrorCode&amp; status) const {</span>
<span class="lineNum">     324 </span>            :     UResourceBundle r;
<span class="lineNum">     325 </span>            : 
<span class="lineNum">     326 </span><span class="lineNoCov">          0 :     ures_initStackObject(&amp;r);</span>
<span class="lineNum">     327 </span><span class="lineNoCov">          0 :     ures_getByIndex(fResource, indexR, &amp;r, &amp;status);</span>
<span class="lineNum">     328 </span><span class="lineNoCov">          0 :     ResourceBundle res(&amp;r, status);</span>
<span class="lineNum">     329 </span><span class="lineNoCov">          0 :     if (U_SUCCESS(status)) {</span>
<span class="lineNum">     330 </span><span class="lineNoCov">          0 :         ures_close(&amp;r);</span>
<span class="lineNum">     331 </span>            :     }
<span class="lineNum">     332 </span><span class="lineNoCov">          0 :     return res;</span>
<a name="333"><span class="lineNum">     333 </span>            : }</a>
<span class="lineNum">     334 </span>            : 
<span class="lineNum">     335 </span><span class="lineNoCov">          0 : UnicodeString ResourceBundle::getStringEx(int32_t indexS, UErrorCode&amp; status) const {</span>
<span class="lineNum">     336 </span><span class="lineNoCov">          0 :     int32_t len = 0;</span>
<span class="lineNum">     337 </span><span class="lineNoCov">          0 :     const UChar* r = ures_getStringByIndex(fResource, indexS, &amp;len, &amp;status);</span>
<span class="lineNum">     338 </span><span class="lineNoCov">          0 :     return UnicodeString(TRUE, r, len);</span>
<a name="339"><span class="lineNum">     339 </span>            : }</a>
<span class="lineNum">     340 </span>            : 
<span class="lineNum">     341 </span><span class="lineNoCov">          0 : ResourceBundle ResourceBundle::get(const char* key, UErrorCode&amp; status) const {</span>
<span class="lineNum">     342 </span>            :     UResourceBundle r;
<span class="lineNum">     343 </span>            : 
<span class="lineNum">     344 </span><span class="lineNoCov">          0 :     ures_initStackObject(&amp;r);</span>
<span class="lineNum">     345 </span><span class="lineNoCov">          0 :     ures_getByKey(fResource, key, &amp;r, &amp;status);</span>
<span class="lineNum">     346 </span><span class="lineNoCov">          0 :     ResourceBundle res(&amp;r, status);</span>
<span class="lineNum">     347 </span><span class="lineNoCov">          0 :     if (U_SUCCESS(status)) {</span>
<span class="lineNum">     348 </span><span class="lineNoCov">          0 :         ures_close(&amp;r);</span>
<span class="lineNum">     349 </span>            :     }
<span class="lineNum">     350 </span><span class="lineNoCov">          0 :     return res;</span>
<a name="351"><span class="lineNum">     351 </span>            : }</a>
<span class="lineNum">     352 </span>            : 
<span class="lineNum">     353 </span><span class="lineNoCov">          0 : ResourceBundle ResourceBundle::getWithFallback(const char* key, UErrorCode&amp; status){</span>
<span class="lineNum">     354 </span>            :     UResourceBundle r;
<span class="lineNum">     355 </span><span class="lineNoCov">          0 :     ures_initStackObject(&amp;r);</span>
<span class="lineNum">     356 </span><span class="lineNoCov">          0 :     ures_getByKeyWithFallback(fResource, key, &amp;r, &amp;status);</span>
<span class="lineNum">     357 </span><span class="lineNoCov">          0 :     ResourceBundle res(&amp;r, status);</span>
<span class="lineNum">     358 </span><span class="lineNoCov">          0 :     if(U_SUCCESS(status)){</span>
<span class="lineNum">     359 </span><span class="lineNoCov">          0 :         ures_close(&amp;r);</span>
<span class="lineNum">     360 </span>            :     }
<a name="361"><span class="lineNum">     361 </span><span class="lineNoCov">          0 :     return res;</span></a>
<span class="lineNum">     362 </span>            : }
<span class="lineNum">     363 </span><span class="lineNoCov">          0 : UnicodeString ResourceBundle::getStringEx(const char* key, UErrorCode&amp; status) const {</span>
<span class="lineNum">     364 </span><span class="lineNoCov">          0 :     int32_t len = 0;</span>
<span class="lineNum">     365 </span><span class="lineNoCov">          0 :     const UChar* r = ures_getStringByKey(fResource, key, &amp;len, &amp;status);</span>
<span class="lineNum">     366 </span><span class="lineNoCov">          0 :     return UnicodeString(TRUE, r, len);</span>
<span class="lineNum">     367 </span>            : }
<a name="368"><span class="lineNum">     368 </span>            : </a>
<span class="lineNum">     369 </span>            : const char*
<span class="lineNum">     370 </span><span class="lineNoCov">          0 : ResourceBundle::getVersionNumber()  const</span>
<span class="lineNum">     371 </span>            : {
<span class="lineNum">     372 </span><span class="lineNoCov">          0 :     return ures_getVersionNumberInternal(fResource);</span>
<a name="373"><span class="lineNum">     373 </span>            : }</a>
<span class="lineNum">     374 </span>            : 
<span class="lineNum">     375 </span><span class="lineNoCov">          0 : void ResourceBundle::getVersion(UVersionInfo versionInfo) const {</span>
<span class="lineNum">     376 </span><span class="lineNoCov">          0 :     ures_getVersion(fResource, versionInfo);</span>
<span class="lineNum">     377 </span><span class="lineNoCov">          0 : }</span>
<a name="378"><span class="lineNum">     378 </span>            : </a>
<span class="lineNum">     379 </span>            : static UMutex gLocaleLock = U_MUTEX_INITIALIZER;
<span class="lineNum">     380 </span><span class="lineNoCov">          0 : const Locale &amp;ResourceBundle::getLocale(void) const {</span>
<span class="lineNum">     381 </span><span class="lineNoCov">          0 :     Mutex lock(&amp;gLocaleLock);</span>
<span class="lineNum">     382 </span><span class="lineNoCov">          0 :     if (fLocale != NULL) {</span>
<span class="lineNum">     383 </span><span class="lineNoCov">          0 :         return *fLocale;</span>
<span class="lineNum">     384 </span>            :     }
<span class="lineNum">     385 </span><span class="lineNoCov">          0 :     UErrorCode status = U_ZERO_ERROR;</span>
<span class="lineNum">     386 </span><span class="lineNoCov">          0 :     const char *localeName = ures_getLocaleInternal(fResource, &amp;status);</span>
<span class="lineNum">     387 </span><span class="lineNoCov">          0 :     ResourceBundle *ncThis = const_cast&lt;ResourceBundle *&gt;(this);</span>
<span class="lineNum">     388 </span><span class="lineNoCov">          0 :     ncThis-&gt;fLocale = new Locale(localeName);</span>
<span class="lineNum">     389 </span><span class="lineNoCov">          0 :     return ncThis-&gt;fLocale != NULL ? *ncThis-&gt;fLocale : Locale::getDefault();</span>
<a name="390"><span class="lineNum">     390 </span>            : }</a>
<span class="lineNum">     391 </span>            : 
<span class="lineNum">     392 </span><span class="lineNoCov">          0 : const Locale ResourceBundle::getLocale(ULocDataLocaleType type, UErrorCode &amp;status) const</span>
<span class="lineNum">     393 </span>            : {
<span class="lineNum">     394 </span><span class="lineNoCov">          0 :   return ures_getLocaleByType(fResource, type, &amp;status);</span>
<span class="lineNum">     395 </span>            : }
<span class="lineNum">     396 </span>            : 
<span class="lineNum">     397 </span>            : U_NAMESPACE_END
<span class="lineNum">     398 </span>            : //eof
</pre>
      </td>
    </tr>
  </table>
  <br>

  <table width="100%" border=0 cellspacing=0 cellpadding=0>
    <tr><td class="ruler"><img src="../../../../glass.png" width=3 height=3 alt=""></td></tr>
    <tr><td class="versionInfo">Generated by: <a href="http://ltp.sourceforge.net/coverage/lcov.php" target="_parent">LCOV version 1.13</a></td></tr>
  </table>
  <br>

</body>
</html>
