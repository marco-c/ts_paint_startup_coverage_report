<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">

<html lang="en">

<head>
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
  <title>LCOV - output.info - intl/icu/source/i18n/digitlst.h</title>
  <link rel="stylesheet" type="text/css" href="../../../../gcov.css">
</head>

<body>

  <table width="100%" border=0 cellspacing=0 cellpadding=0>
    <tr><td class="title">LCOV - code coverage report</td></tr>
    <tr><td class="ruler"><img src="../../../../glass.png" width=3 height=3 alt=""></td></tr>

    <tr>
      <td width="100%">
        <table cellpadding=1 border=0 width="100%">
          <tr>
            <td width="10%" class="headerItem">Current view:</td>
            <td width="35%" class="headerValue"><a href="../../../../index.html">top level</a> - <a href="index.html">intl/icu/source/i18n</a> - digitlst.h<span style="font-size: 80%;"> (source / <a href="digitlst.h.func-sort-c.html">functions</a>)</span></td>
            <td width="5%"></td>
            <td width="15%"></td>
            <td width="10%" class="headerCovTableHead">Hit</td>
            <td width="10%" class="headerCovTableHead">Total</td>
            <td width="15%" class="headerCovTableHead">Coverage</td>
          </tr>
          <tr>
            <td class="headerItem">Test:</td>
            <td class="headerValue">output.info</td>
            <td></td>
            <td class="headerItem">Lines:</td>
            <td class="headerCovTableEntry">0</td>
            <td class="headerCovTableEntry">14</td>
            <td class="headerCovTableEntryLo">0.0 %</td>
          </tr>
          <tr>
            <td class="headerItem">Date:</td>
            <td class="headerValue">2017-07-14 16:53:18</td>
            <td></td>
            <td class="headerItem">Functions:</td>
            <td class="headerCovTableEntry">0</td>
            <td class="headerCovTableEntry">9</td>
            <td class="headerCovTableEntryLo">0.0 %</td>
          </tr>
          <tr>
            <td class="headerItem">Legend:</td>
            <td class="headerValueLeg">            Lines:
            <span class="coverLegendCov">hit</span>
            <span class="coverLegendNoCov">not hit</span>
</td>
            <td></td>
          </tr>
          <tr><td><img src="../../../../glass.png" width=3 height=3 alt=""></td></tr>
        </table>
      </td>
    </tr>

    <tr><td class="ruler"><img src="../../../../glass.png" width=3 height=3 alt=""></td></tr>
  </table>

  <table cellpadding=0 cellspacing=0 border=0>
    <tr>
      <td><br></td>
    </tr>
    <tr>
      <td>
<pre class="sourceHeading">          Line data    Source code</pre>
<pre class="source">
<a name="1"><span class="lineNum">       1 </span>            : // Â© 2016 and later: Unicode, Inc. and others.</a>
<span class="lineNum">       2 </span>            : // License &amp; terms of use: http://www.unicode.org/copyright.html
<span class="lineNum">       3 </span>            : /*
<span class="lineNum">       4 </span>            : ******************************************************************************
<span class="lineNum">       5 </span>            : *
<span class="lineNum">       6 </span>            : *   Copyright (C) 1997-2015, International Business Machines
<span class="lineNum">       7 </span>            : *   Corporation and others.  All Rights Reserved.
<span class="lineNum">       8 </span>            : *
<span class="lineNum">       9 </span>            : ******************************************************************************
<span class="lineNum">      10 </span>            : *
<span class="lineNum">      11 </span>            : * File DIGITLST.H
<span class="lineNum">      12 </span>            : *
<span class="lineNum">      13 </span>            : * Modification History:
<span class="lineNum">      14 </span>            : *
<span class="lineNum">      15 </span>            : *   Date        Name        Description
<span class="lineNum">      16 </span>            : *   02/25/97    aliu        Converted from java.
<span class="lineNum">      17 </span>            : *   03/21/97    clhuang     Updated per C++ implementation.
<span class="lineNum">      18 </span>            : *   04/15/97    aliu        Changed MAX_COUNT to DBL_DIG.  Changed Digit to char.
<span class="lineNum">      19 </span>            : *   09/09/97    aliu        Adapted for exponential notation support.
<span class="lineNum">      20 </span>            : *   08/02/98    stephen     Added nearest/even rounding
<span class="lineNum">      21 </span>            : *   06/29/99    stephen     Made LONG_DIGITS a macro to satisfy SUN compiler
<span class="lineNum">      22 </span>            : *   07/09/99    stephen     Removed kMaxCount (unused, for HP compiler)
<span class="lineNum">      23 </span>            : ******************************************************************************
<span class="lineNum">      24 </span>            : */
<span class="lineNum">      25 </span>            :  
<span class="lineNum">      26 </span>            : #ifndef DIGITLST_H
<span class="lineNum">      27 </span>            : #define DIGITLST_H
<span class="lineNum">      28 </span>            :  
<span class="lineNum">      29 </span>            : #include &quot;unicode/uobject.h&quot;
<span class="lineNum">      30 </span>            : 
<span class="lineNum">      31 </span>            : #if !UCONFIG_NO_FORMATTING
<span class="lineNum">      32 </span>            : #include &quot;unicode/decimfmt.h&quot;
<span class="lineNum">      33 </span>            : #include &lt;float.h&gt;
<span class="lineNum">      34 </span>            : #include &quot;decContext.h&quot;
<span class="lineNum">      35 </span>            : #include &quot;decNumber.h&quot;
<span class="lineNum">      36 </span>            : #include &quot;cmemory.h&quot;
<span class="lineNum">      37 </span>            : 
<span class="lineNum">      38 </span>            : // Decimal digits in a 64-bit int
<span class="lineNum">      39 </span>            : #define INT64_DIGITS 19
<span class="lineNum">      40 </span>            : 
<span class="lineNum">      41 </span>            : typedef enum EDigitListValues {
<span class="lineNum">      42 </span>            :     MAX_DBL_DIGITS = DBL_DIG,
<span class="lineNum">      43 </span>            :     MAX_I64_DIGITS = INT64_DIGITS,
<span class="lineNum">      44 </span>            :     MAX_DIGITS = MAX_I64_DIGITS,
<span class="lineNum">      45 </span>            :     MAX_EXPONENT = DBL_DIG,
<span class="lineNum">      46 </span>            :     DIGIT_PADDING = 3,
<span class="lineNum">      47 </span>            :     DEFAULT_DIGITS = 40,   // Initial storage size, will grow as needed.
<span class="lineNum">      48 </span>            : 
<span class="lineNum">      49 </span>            :      // &quot;+.&quot; + fDigits + &quot;e&quot; + fDecimalAt
<span class="lineNum">      50 </span>            :     MAX_DEC_DIGITS = MAX_DIGITS + DIGIT_PADDING + MAX_EXPONENT
<span class="lineNum">      51 </span>            : } EDigitListValues;
<span class="lineNum">      52 </span>            : 
<span class="lineNum">      53 </span>            : U_NAMESPACE_BEGIN
<span class="lineNum">      54 </span>            : 
<span class="lineNum">      55 </span>            : class CharString;
<span class="lineNum">      56 </span>            : class DigitInterval; 
<span class="lineNum">      57 </span>            : 
<span class="lineNum">      58 </span>            : // Export an explicit template instantiation of the MaybeStackHeaderAndArray that
<span class="lineNum">      59 </span>            : //    is used as a data member of DigitList.
<span class="lineNum">      60 </span>            : //
<span class="lineNum">      61 </span>            : //    MSVC requires this, even though it should not be necessary. 
<span class="lineNum">      62 </span>            : //    No direct access to the MaybeStackHeaderAndArray leaks out of the i18n library.
<span class="lineNum">      63 </span>            : //
<span class="lineNum">      64 </span>            : //    Macintosh produces duplicate definition linker errors with the explicit template
<span class="lineNum">      65 </span>            : //    instantiation.
<span class="lineNum">      66 </span>            : //
<span class="lineNum">      67 </span>            : #if !U_PLATFORM_IS_DARWIN_BASED
<span class="lineNum">      68 </span>            : template class U_I18N_API MaybeStackHeaderAndArray&lt;decNumber, char, DEFAULT_DIGITS&gt;;
<span class="lineNum">      69 </span>            : #endif
<span class="lineNum">      70 </span>            : 
<span class="lineNum">      71 </span>            : 
<span class="lineNum">      72 </span>            : enum EStackMode { kOnStack };
<span class="lineNum">      73 </span>            : 
<span class="lineNum">      74 </span>            : enum EFastpathBits { kFastpathOk = 1, kNoDecimal = 2 };
<span class="lineNum">      75 </span>            : 
<span class="lineNum">      76 </span>            : /**
<span class="lineNum">      77 </span>            :  * Digit List is actually a Decimal Floating Point number.
<span class="lineNum">      78 </span>            :  * The original implementation has been replaced by a thin wrapper onto a 
<span class="lineNum">      79 </span>            :  * decimal number from the decNumber library.
<span class="lineNum">      80 </span>            :  *
<span class="lineNum">      81 </span>            :  * The original DigitList API has been retained, to minimize the impact of
<span class="lineNum">      82 </span>            :  * the change on the rest of the ICU formatting code.
<span class="lineNum">      83 </span>            :  *
<span class="lineNum">      84 </span>            :  * The change to decNumber enables support for big decimal numbers, and
<span class="lineNum">      85 </span>            :  * allows rounding computations to be done directly in decimal, avoiding
<span class="lineNum">      86 </span>            :  * extra, and inaccurate, conversions to and from doubles.
<span class="lineNum">      87 </span>            :  *
<span class="lineNum">      88 </span>            :  * Original DigitList comments:
<span class="lineNum">      89 </span>            :  *
<span class="lineNum">      90 </span>            :  * Digit List utility class. Private to DecimalFormat.  Handles the transcoding
<span class="lineNum">      91 </span>            :  * between numeric values and strings of characters.  Only handles
<span class="lineNum">      92 </span>            :  * non-negative numbers.  The division of labor between DigitList and
<span class="lineNum">      93 </span>            :  * DecimalFormat is that DigitList handles the radix 10 representation
<span class="lineNum">      94 </span>            :  * issues; DecimalFormat handles the locale-specific issues such as
<span class="lineNum">      95 </span>            :  * positive/negative, grouping, decimal point, currency, and so on.
<span class="lineNum">      96 </span>            :  * &lt;P&gt;
<span class="lineNum">      97 </span>            :  * A DigitList is really a representation of a floating point value.
<span class="lineNum">      98 </span>            :  * It may be an integer value; we assume that a double has sufficient
<span class="lineNum">      99 </span>            :  * precision to represent all digits of a long.
<span class="lineNum">     100 </span>            :  * &lt;P&gt;
<span class="lineNum">     101 </span>            :  * The DigitList representation consists of a string of characters,
<span class="lineNum">     102 </span>            :  * which are the digits radix 10, from '0' to '9'.  It also has a radix
<span class="lineNum">     103 </span>            :  * 10 exponent associated with it.  The value represented by a DigitList
<span class="lineNum">     104 </span>            :  * object can be computed by mulitplying the fraction f, where 0 &lt;= f &lt; 1,
<span class="lineNum">     105 </span>            :  * derived by placing all the digits of the list to the right of the
<span class="lineNum">     106 </span>            :  * decimal point, by 10^exponent.
<span class="lineNum">     107 </span>            :  *
<span class="lineNum">     108 </span>            :  * --------
<span class="lineNum">     109 </span>            :  *
<span class="lineNum">     110 </span>            :  * DigitList vs. decimalNumber:
<span class="lineNum">     111 </span>            :  *
<span class="lineNum">     112 </span>            :  *    DigitList stores digits with the most significant first.
<span class="lineNum">     113 </span>            :  *    decNumber stores digits with the least significant first.
<span class="lineNum">     114 </span>            :  *
<span class="lineNum">     115 </span>            :  *    DigitList, decimal point is before the most significant.
<span class="lineNum">     116 </span>            :  *    decNumber, decimal point is after the least signficant digit.
<span class="lineNum">     117 </span>            :  *
<span class="lineNum">     118 </span>            :  *       digitList:    0.ddddd * 10 ^ exp
<span class="lineNum">     119 </span>            :  *       decNumber:    ddddd. * 10 ^ exp
<span class="lineNum">     120 </span>            :  *
<span class="lineNum">     121 </span>            :  *       digitList exponent = decNumber exponent + digit count
<span class="lineNum">     122 </span>            :  *
<span class="lineNum">     123 </span>            :  *    digitList, digits are platform invariant chars, '0' - '9'
<span class="lineNum">     124 </span>            :  *    decNumber, digits are binary, one per byte, 0 - 9.
<span class="lineNum">     125 </span>            :  *
<span class="lineNum">     126 </span>            :  *       (decNumber library is configurable in how digits are stored, ICU has configured
<span class="lineNum">     127 </span>            :  *        it this way for convenience in replacing the old DigitList implementation.)
<span class="lineNum">     128 </span>            :  */
<span class="lineNum">     129 </span>            : class U_I18N_API DigitList : public UMemory { // Declare external to make compiler happy
<span class="lineNum">     130 </span>            : public:
<span class="lineNum">     131 </span>            : 
<span class="lineNum">     132 </span>            :     DigitList();
<span class="lineNum">     133 </span>            :     ~DigitList();
<span class="lineNum">     134 </span>            : 
<span class="lineNum">     135 </span>            :     /* copy constructor
<span class="lineNum">     136 </span>            :      * @param DigitList The object to be copied.
<span class="lineNum">     137 </span>            :      * @return the newly created object. 
<span class="lineNum">     138 </span>            :      */
<span class="lineNum">     139 </span>            :     DigitList(const DigitList&amp;); // copy constructor
<span class="lineNum">     140 </span>            : 
<span class="lineNum">     141 </span>            :     /* assignment operator
<span class="lineNum">     142 </span>            :      * @param DigitList The object to be copied.
<span class="lineNum">     143 </span>            :      * @return the newly created object.
<span class="lineNum">     144 </span>            :      */
<span class="lineNum">     145 </span>            :     DigitList&amp; operator=(const DigitList&amp;);  // assignment operator
<span class="lineNum">     146 </span>            : 
<span class="lineNum">     147 </span>            :     /**
<span class="lineNum">     148 </span>            :      * Return true if another object is semantically equal to this one.
<span class="lineNum">     149 </span>            :      * @param other The DigitList to be compared for equality
<span class="lineNum">     150 </span>            :      * @return true if another object is semantically equal to this one.
<span class="lineNum">     151 </span>            :      * return false otherwise.
<span class="lineNum">     152 </span>            :      */
<span class="lineNum">     153 </span>            :     UBool operator==(const DigitList&amp; other) const;
<span class="lineNum">     154 </span>            : 
<span class="lineNum">     155 </span>            :     int32_t  compare(const DigitList&amp; other);
<span class="lineNum">     156 </span>            : 
<span class="lineNum">     157 </span>            : 
<span class="lineNum">     158 </span>            :     inline UBool operator!=(const DigitList&amp; other) const { return !operator==(other); }
<span class="lineNum">     159 </span>            : 
<span class="lineNum">     160 </span>            :     /**
<span class="lineNum">     161 </span>            :      * Clears out the digits.
<span class="lineNum">     162 </span>            :      * Use before appending them.
<span class="lineNum">     163 </span>            :      * Typically, you set a series of digits with append, then at the point
<span class="lineNum">     164 </span>            :      * you hit the decimal point, you set myDigitList.fDecimalAt = myDigitList.fCount;
<span class="lineNum">     165 </span>            :      * then go on appending digits.
<span class="lineNum">     166 </span>            :      */
<span class="lineNum">     167 </span>            :     void clear(void);
<span class="lineNum">     168 </span>            : 
<span class="lineNum">     169 </span>            :     /**
<span class="lineNum">     170 </span>            :      *  Remove, by rounding, any fractional part of the decimal number,
<span class="lineNum">     171 </span>            :      *  leaving an integer value.
<span class="lineNum">     172 </span>            :      */
<span class="lineNum">     173 </span>            :     void toIntegralValue();
<span class="lineNum">     174 </span>            :     
<span class="lineNum">     175 </span>            :     /**
<span class="lineNum">     176 </span>            :      * Appends digits to the list. 
<span class="lineNum">     177 </span>            :      *    CAUTION:  this function is not recommended for new code.
<span class="lineNum">     178 </span>            :      *              In the original DigitList implementation, decimal numbers were
<span class="lineNum">     179 </span>            :      *              parsed by appending them to a digit list as they were encountered.
<span class="lineNum">     180 </span>            :      *              With the revamped DigitList based on decNumber, append is very
<span class="lineNum">     181 </span>            :      *              inefficient, and the interaction with the exponent value is confusing.
<span class="lineNum">     182 </span>            :      *              Best avoided.
<span class="lineNum">     183 </span>            :      *              TODO:  remove this function once all use has been replaced.
<span class="lineNum">     184 </span>            :      *              TODO:  describe alternative to append()
<span class="lineNum">     185 </span>            :      * @param digit The digit to be appended.
<span class="lineNum">     186 </span>            :      */
<span class="lineNum">     187 </span>            :     void append(char digit);
<span class="lineNum">     188 </span>            : 
<span class="lineNum">     189 </span>            :     /**
<span class="lineNum">     190 </span>            :      * Utility routine to get the value of the digit list
<span class="lineNum">     191 </span>            :      * Returns 0.0 if zero length.
<span class="lineNum">     192 </span>            :      * @return the value of the digit list.
<span class="lineNum">     193 </span>            :      */
<span class="lineNum">     194 </span>            :     double getDouble(void) const;
<span class="lineNum">     195 </span>            : 
<span class="lineNum">     196 </span>            :     /**
<span class="lineNum">     197 </span>            :      * Utility routine to get the value of the digit list
<span class="lineNum">     198 </span>            :      * Make sure that fitsIntoLong() is called before calling this function.
<span class="lineNum">     199 </span>            :      * Returns 0 if zero length.
<span class="lineNum">     200 </span>            :      * @return the value of the digit list, return 0 if it is zero length
<span class="lineNum">     201 </span>            :      */
<span class="lineNum">     202 </span>            :     int32_t getLong(void) /*const*/;
<span class="lineNum">     203 </span>            : 
<span class="lineNum">     204 </span>            :     /**
<span class="lineNum">     205 </span>            :      * Utility routine to get the value of the digit list
<span class="lineNum">     206 </span>            :      * Make sure that fitsIntoInt64() is called before calling this function.
<span class="lineNum">     207 </span>            :      * Returns 0 if zero length.
<span class="lineNum">     208 </span>            :      * @return the value of the digit list, return 0 if it is zero length
<span class="lineNum">     209 </span>            :      */
<span class="lineNum">     210 </span>            :     int64_t getInt64(void) /*const*/;
<span class="lineNum">     211 </span>            : 
<span class="lineNum">     212 </span>            :     /**
<span class="lineNum">     213 </span>            :      *  Utility routine to get the value of the digit list as a decimal string.
<span class="lineNum">     214 </span>            :      */
<span class="lineNum">     215 </span>            :     void getDecimal(CharString &amp;str, UErrorCode &amp;status);
<span class="lineNum">     216 </span>            : 
<span class="lineNum">     217 </span>            :     /**
<span class="lineNum">     218 </span>            :      * Return true if the number represented by this object can fit into
<span class="lineNum">     219 </span>            :      * a long.
<span class="lineNum">     220 </span>            :      * @param ignoreNegativeZero True if negative zero is ignored.
<span class="lineNum">     221 </span>            :      * @return true if the number represented by this object can fit into
<span class="lineNum">     222 </span>            :      * a long, return false otherwise.
<span class="lineNum">     223 </span>            :      */
<span class="lineNum">     224 </span>            :     UBool fitsIntoLong(UBool ignoreNegativeZero) /*const*/;
<span class="lineNum">     225 </span>            : 
<span class="lineNum">     226 </span>            :     /**
<span class="lineNum">     227 </span>            :      * Return true if the number represented by this object can fit into
<span class="lineNum">     228 </span>            :      * an int64_t.
<span class="lineNum">     229 </span>            :      * @param ignoreNegativeZero True if negative zero is ignored.
<span class="lineNum">     230 </span>            :      * @return true if the number represented by this object can fit into
<span class="lineNum">     231 </span>            :      * a long, return false otherwise.
<span class="lineNum">     232 </span>            :      */
<span class="lineNum">     233 </span>            :     UBool fitsIntoInt64(UBool ignoreNegativeZero) /*const*/;
<span class="lineNum">     234 </span>            : 
<span class="lineNum">     235 </span>            :     /**
<span class="lineNum">     236 </span>            :      * Utility routine to set the value of the digit list from a double.
<span class="lineNum">     237 </span>            :      * @param source The value to be set
<span class="lineNum">     238 </span>            :      */
<span class="lineNum">     239 </span>            :     void set(double source);
<span class="lineNum">     240 </span>            : 
<span class="lineNum">     241 </span>            :     /**
<span class="lineNum">     242 </span>            :      * Utility routine to set the value of the digit list from a long.
<span class="lineNum">     243 </span>            :      * If a non-zero maximumDigits is specified, no more than that number of
<span class="lineNum">     244 </span>            :      * significant digits will be produced.
<span class="lineNum">     245 </span>            :      * @param source The value to be set
<span class="lineNum">     246 </span>            :      */
<span class="lineNum">     247 </span>            :     void set(int32_t source);
<span class="lineNum">     248 </span>            : 
<span class="lineNum">     249 </span>            :     /**
<span class="lineNum">     250 </span>            :      * Utility routine to set the value of the digit list from an int64.
<span class="lineNum">     251 </span>            :      * If a non-zero maximumDigits is specified, no more than that number of
<span class="lineNum">     252 </span>            :      * significant digits will be produced.
<span class="lineNum">     253 </span>            :      * @param source The value to be set
<span class="lineNum">     254 </span>            :      */
<span class="lineNum">     255 </span>            :     void set(int64_t source);
<span class="lineNum">     256 </span>            : 
<span class="lineNum">     257 </span>            :     /**
<span class="lineNum">     258 </span>            :      * Utility routine to set the value of the digit list from an int64.
<span class="lineNum">     259 </span>            :      * Does not set the decnumber unless requested later
<span class="lineNum">     260 </span>            :      * If a non-zero maximumDigits is specified, no more than that number of
<span class="lineNum">     261 </span>            :      * significant digits will be produced.
<span class="lineNum">     262 </span>            :      * @param source The value to be set
<span class="lineNum">     263 </span>            :      */
<span class="lineNum">     264 </span>            :     void setInteger(int64_t source);
<span class="lineNum">     265 </span>            : 
<span class="lineNum">     266 </span>            :    /**
<span class="lineNum">     267 </span>            :      * Utility routine to set the value of the digit list from a decimal number
<span class="lineNum">     268 </span>            :      * string.
<span class="lineNum">     269 </span>            :      * @param source The value to be set.  The string must be nul-terminated.
<span class="lineNum">     270 </span>            :      * @param fastpathBits special flags for fast parsing
<span class="lineNum">     271 </span>            :      */
<span class="lineNum">     272 </span>            :     void set(StringPiece source, UErrorCode &amp;status, uint32_t fastpathBits = 0);
<span class="lineNum">     273 </span>            : 
<span class="lineNum">     274 </span>            :     /**
<span class="lineNum">     275 </span>            :      * Multiply    this = this * arg
<span class="lineNum">     276 </span>            :      *    This digitlist will be expanded if necessary to accomodate the result.
<span class="lineNum">     277 </span>            :      *  @param arg  the number to multiply by.
<span class="lineNum">     278 </span>            :      */
<span class="lineNum">     279 </span>            :     void mult(const DigitList &amp;arg, UErrorCode &amp;status);
<span class="lineNum">     280 </span>            : 
<span class="lineNum">     281 </span>            :     /**
<span class="lineNum">     282 </span>            :      *   Divide    this = this / arg
<span class="lineNum">     283 </span>            :      */
<span class="lineNum">     284 </span>            :     void div(const DigitList &amp;arg, UErrorCode &amp;status);
<span class="lineNum">     285 </span>            : 
<span class="lineNum">     286 </span>            :     //  The following functions replace direct access to the original DigitList implmentation
<span class="lineNum">     287 </span>            :     //  data structures.
<span class="lineNum">     288 </span>            : 
<span class="lineNum">     289 </span>            :     void setRoundingMode(DecimalFormat::ERoundingMode m); 
<span class="lineNum">     290 </span>            : 
<span class="lineNum">     291 </span>            :     /** Test a number for zero.
<span class="lineNum">     292 </span>            :      * @return  TRUE if the number is zero
<span class="lineNum">     293 </span>            :      */
<span class="lineNum">     294 </span>            :     UBool isZero(void) const;
<span class="lineNum">     295 </span>            : 
<span class="lineNum">     296 </span>            :     /** Test for a Nan
<a name="297"><span class="lineNum">     297 </span>            :      * @return  TRUE if the number is a NaN</a>
<span class="lineNum">     298 </span>            :      */
<a name="299"><span class="lineNum">     299 </span><span class="lineNoCov">          0 :     UBool isNaN(void) const {return decNumberIsNaN(fDecNumber);}</span></a>
<span class="lineNum">     300 </span>            : 
<span class="lineNum">     301 </span><span class="lineNoCov">          0 :     UBool isInfinite() const {return decNumberIsInfinite(fDecNumber);}</span>
<span class="lineNum">     302 </span>            : 
<span class="lineNum">     303 </span>            :     /**  Reduce, or normalize.  Removes trailing zeroes, adjusts exponent appropriately. */
<span class="lineNum">     304 </span>            :     void     reduce();
<span class="lineNum">     305 </span>            : 
<span class="lineNum">     306 </span>            :     /**  Remove trailing fraction zeros, adjust exponent accordingly. */
<span class="lineNum">     307 </span>            :     void     trim();
<a name="308"><span class="lineNum">     308 </span>            : </a>
<span class="lineNum">     309 </span>            :     /** Set to zero */
<span class="lineNum">     310 </span><span class="lineNoCov">          0 :     void     setToZero() {uprv_decNumberZero(fDecNumber);}</span>
<a name="311"><span class="lineNum">     311 </span>            : </a>
<span class="lineNum">     312 </span>            :     /** get the number of digits in the decimal number */
<span class="lineNum">     313 </span><span class="lineNoCov">          0 :     int32_t  digits() const {return fDecNumber-&gt;digits;}</span>
<span class="lineNum">     314 </span>            : 
<span class="lineNum">     315 </span>            :     /**
<span class="lineNum">     316 </span>            :      * Round the number to the given number of digits.
<span class="lineNum">     317 </span>            :      * @param maximumDigits The maximum number of digits to be shown.
<span class="lineNum">     318 </span>            :      * Upon return, count will be less than or equal to maximumDigits.
<span class="lineNum">     319 </span>            :      * result is guaranteed to be trimmed. 
<span class="lineNum">     320 </span>            :      */
<span class="lineNum">     321 </span>            :     void round(int32_t maximumDigits);
<span class="lineNum">     322 </span>            : 
<span class="lineNum">     323 </span>            :     void roundFixedPoint(int32_t maximumFractionDigits);
<span class="lineNum">     324 </span>            : 
<span class="lineNum">     325 </span>            :     /** Ensure capacity for digits.  Grow the storage if it is currently less than
<span class="lineNum">     326 </span>            :      *      the requested size.   Capacity is not reduced if it is already greater
<span class="lineNum">     327 </span>            :      *      than requested.
<span class="lineNum">     328 </span>            :      */
<a name="329"><span class="lineNum">     329 </span>            :     void  ensureCapacity(int32_t  requestedSize, UErrorCode &amp;status); </a>
<span class="lineNum">     330 </span>            : 
<span class="lineNum">     331 </span><span class="lineNoCov">          0 :     UBool    isPositive(void) const { return decNumberIsNegative(fDecNumber) == 0;}</span>
<span class="lineNum">     332 </span>            :     void     setPositive(UBool s); 
<span class="lineNum">     333 </span>            : 
<span class="lineNum">     334 </span>            :     void     setDecimalAt(int32_t d);
<span class="lineNum">     335 </span>            :     int32_t  getDecimalAt();
<span class="lineNum">     336 </span>            : 
<span class="lineNum">     337 </span>            :     void     setCount(int32_t c);
<span class="lineNum">     338 </span>            :     int32_t  getCount() const;
<span class="lineNum">     339 </span>            :     
<span class="lineNum">     340 </span>            :     /**
<span class="lineNum">     341 </span>            :      * Set the digit in platform (invariant) format, from '0'..'9'
<span class="lineNum">     342 </span>            :      * @param i index of digit
<span class="lineNum">     343 </span>            :      * @param v digit value, from '0' to '9' in platform invariant format
<span class="lineNum">     344 </span>            :      */
<span class="lineNum">     345 </span>            :     void     setDigit(int32_t i, char v);
<span class="lineNum">     346 </span>            : 
<span class="lineNum">     347 </span>            :     /**
<span class="lineNum">     348 </span>            :      * Get the digit in platform (invariant) format, from '0'..'9' inclusive
<span class="lineNum">     349 </span>            :      * @param i index of digit
<span class="lineNum">     350 </span>            :      * @return invariant format of the digit
<span class="lineNum">     351 </span>            :      */
<span class="lineNum">     352 </span>            :     char     getDigit(int32_t i);
<span class="lineNum">     353 </span>            : 
<span class="lineNum">     354 </span>            : 
<span class="lineNum">     355 </span>            :     /**
<span class="lineNum">     356 </span>            :      * Get the digit's value, as an integer from 0..9 inclusive.
<span class="lineNum">     357 </span>            :      * Note that internally this value is a decNumberUnit, but ICU configures it to be a uint8_t.
<span class="lineNum">     358 </span>            :      * @param i index of digit
<span class="lineNum">     359 </span>            :      * @return value of that digit
<span class="lineNum">     360 </span>            :      */
<span class="lineNum">     361 </span>            :     uint8_t     getDigitValue(int32_t i);
<span class="lineNum">     362 </span>            : 
<span class="lineNum">     363 </span>            :     /**
<span class="lineNum">     364 </span>            :      * Gets the upper bound exponent for this value. For 987, returns 3
<span class="lineNum">     365 </span>            :      * because 10^3 is the smallest power of 10 that is just greater than
<span class="lineNum">     366 </span>            :      * 987.
<span class="lineNum">     367 </span>            :      */
<span class="lineNum">     368 </span>            :     int32_t getUpperExponent() const;
<span class="lineNum">     369 </span>            : 
<span class="lineNum">     370 </span>            :     /**
<span class="lineNum">     371 </span>            :      * Gets the lower bound exponent for this value. For 98.7, returns -1
<a name="372"><span class="lineNum">     372 </span>            :      * because the right most digit, is the 10^-1 place.</a>
<span class="lineNum">     373 </span>            :      */
<span class="lineNum">     374 </span><span class="lineNoCov">          0 :     int32_t getLowerExponent() const { return fDecNumber-&gt;exponent; }</span>
<span class="lineNum">     375 </span>            : 
<span class="lineNum">     376 </span>            :     /**
<span class="lineNum">     377 </span>            :      * Sets result to the smallest DigitInterval needed to display this
<span class="lineNum">     378 </span>            :      * DigitList in fixed point form and returns result.
<span class="lineNum">     379 </span>            :      */
<span class="lineNum">     380 </span>            :     DigitInterval&amp; getSmallestInterval(DigitInterval &amp;result) const;
<span class="lineNum">     381 </span>            : 
<span class="lineNum">     382 </span>            :     /**
<span class="lineNum">     383 </span>            :      * Like getDigitValue, but the digit is identified by exponent.
<span class="lineNum">     384 </span>            :      * For example, getDigitByExponent(7) returns the 10^7 place of this
<span class="lineNum">     385 </span>            :      * DigitList. Unlike getDigitValue, there are no upper or lower bounds
<span class="lineNum">     386 </span>            :      * for passed parameter. Instead, getDigitByExponent returns 0 if
<span class="lineNum">     387 </span>            :      * the exponent falls outside the interval for this DigitList.
<span class="lineNum">     388 </span>            :      */
<span class="lineNum">     389 </span>            :     uint8_t getDigitByExponent(int32_t exponent) const;
<span class="lineNum">     390 </span>            : 
<span class="lineNum">     391 </span>            :     /**
<span class="lineNum">     392 </span>            :      * Appends the digits in this object to a CharString.
<span class="lineNum">     393 </span>            :      * 3 is appended as (char) 3, not '3'
<span class="lineNum">     394 </span>            :      */
<span class="lineNum">     395 </span>            :     void appendDigitsTo(CharString &amp;str, UErrorCode &amp;status) const;
<span class="lineNum">     396 </span>            : 
<span class="lineNum">     397 </span>            :     /**
<span class="lineNum">     398 </span>            :      * Equivalent to roundFixedPoint(-digitExponent) except unlike
<span class="lineNum">     399 </span>            :      * roundFixedPoint, this works for any digitExponent value.
<span class="lineNum">     400 </span>            :      * If maxSigDigits is set then this instance is rounded to have no more
<span class="lineNum">     401 </span>            :      * than maxSigDigits. The end result is guaranteed to be trimmed.
<span class="lineNum">     402 </span>            :      */
<span class="lineNum">     403 </span>            :     void roundAtExponent(int32_t digitExponent, int32_t maxSigDigits=INT32_MAX);
<span class="lineNum">     404 </span>            : 
<span class="lineNum">     405 </span>            :     /**
<span class="lineNum">     406 </span>            :      * Quantizes according to some amount and rounds according to the
<span class="lineNum">     407 </span>            :      * context of this instance. Quantizing 3.233 with 0.05 gives 3.25.
<span class="lineNum">     408 </span>            :      */
<span class="lineNum">     409 </span>            :     void quantize(const DigitList &amp;amount, UErrorCode &amp;status);
<span class="lineNum">     410 </span>            : 
<span class="lineNum">     411 </span>            :     /**
<span class="lineNum">     412 </span>            :      * Like toScientific but only returns the exponent
<span class="lineNum">     413 </span>            :      * leaving this instance unchanged.
<span class="lineNum">     414 </span>            :      */ 
<span class="lineNum">     415 </span>            :     int32_t getScientificExponent(
<span class="lineNum">     416 </span>            :             int32_t minIntDigitCount, int32_t exponentMultiplier) const;
<span class="lineNum">     417 </span>            : 
<span class="lineNum">     418 </span>            :     /**
<span class="lineNum">     419 </span>            :      * Converts this instance to scientific notation. This instance
<span class="lineNum">     420 </span>            :      * becomes the mantissa and the exponent is returned.
<span class="lineNum">     421 </span>            :      * @param minIntDigitCount minimum integer digits in mantissa
<span class="lineNum">     422 </span>            :      *   Exponent is set so that the actual number of integer digits
<span class="lineNum">     423 </span>            :      *   in mantissa is as close to the minimum as possible.
<span class="lineNum">     424 </span>            :      * @param exponentMultiplier The exponent is always a multiple of
<span class="lineNum">     425 </span>            :      *  This number. Usually 1, but set to 3 for engineering notation.
<span class="lineNum">     426 </span>            :      * @return exponent
<span class="lineNum">     427 </span>            :      */
<span class="lineNum">     428 </span>            :     int32_t toScientific(
<span class="lineNum">     429 </span>            :             int32_t minIntDigitCount, int32_t exponentMultiplier);
<span class="lineNum">     430 </span>            : 
<span class="lineNum">     431 </span>            :     /**
<span class="lineNum">     432 </span>            :      * Shifts decimal to the right.
<span class="lineNum">     433 </span>            :      */
<span class="lineNum">     434 </span>            :     void shiftDecimalRight(int32_t numPlaces);
<span class="lineNum">     435 </span>            : 
<span class="lineNum">     436 </span>            : private:
<span class="lineNum">     437 </span>            :     /*
<span class="lineNum">     438 </span>            :      * These data members are intentionally public and can be set directly.
<span class="lineNum">     439 </span>            :      *&lt;P&gt;
<span class="lineNum">     440 </span>            :      * The value represented is given by placing the decimal point before
<span class="lineNum">     441 </span>            :      * fDigits[fDecimalAt].  If fDecimalAt is &lt; 0, then leading zeros between
<span class="lineNum">     442 </span>            :      * the decimal point and the first nonzero digit are implied.  If fDecimalAt
<span class="lineNum">     443 </span>            :      * is &gt; fCount, then trailing zeros between the fDigits[fCount-1] and the
<span class="lineNum">     444 </span>            :      * decimal point are implied.
<span class="lineNum">     445 </span>            :      * &lt;P&gt;
<span class="lineNum">     446 </span>            :      * Equivalently, the represented value is given by f * 10^fDecimalAt.  Here
<span class="lineNum">     447 </span>            :      * f is a value 0.1 &lt;= f &lt; 1 arrived at by placing the digits in fDigits to
<span class="lineNum">     448 </span>            :      * the right of the decimal.
<span class="lineNum">     449 </span>            :      * &lt;P&gt;
<span class="lineNum">     450 </span>            :      * DigitList is normalized, so if it is non-zero, fDigits[0] is non-zero.  We
<span class="lineNum">     451 </span>            :      * don't allow denormalized numbers because our exponent is effectively of
<span class="lineNum">     452 </span>            :      * unlimited magnitude.  The fCount value contains the number of significant
<span class="lineNum">     453 </span>            :      * digits present in fDigits[].
<span class="lineNum">     454 </span>            :      * &lt;P&gt;
<span class="lineNum">     455 </span>            :      * Zero is represented by any DigitList with fCount == 0 or with each fDigits[i]
<span class="lineNum">     456 </span>            :      * for all i &lt;= fCount == '0'.
<span class="lineNum">     457 </span>            :      *
<span class="lineNum">     458 </span>            :      * int32_t                         fDecimalAt;
<span class="lineNum">     459 </span>            :      * int32_t                         fCount;
<span class="lineNum">     460 </span>            :      * UBool                           fIsPositive;
<span class="lineNum">     461 </span>            :      * char                            *fDigits;
<span class="lineNum">     462 </span>            :      * DecimalFormat::ERoundingMode    fRoundingMode;
<span class="lineNum">     463 </span>            :      */
<span class="lineNum">     464 </span>            : 
<span class="lineNum">     465 </span>            : public:
<span class="lineNum">     466 </span>            :     decContext    fContext;   // public access to status flags.  
<span class="lineNum">     467 </span>            : 
<span class="lineNum">     468 </span>            : private:
<span class="lineNum">     469 </span>            :     decNumber     *fDecNumber;
<span class="lineNum">     470 </span>            :     MaybeStackHeaderAndArray&lt;decNumber, char, DEFAULT_DIGITS&gt;  fStorage;
<span class="lineNum">     471 </span>            : 
<span class="lineNum">     472 </span>            :     /* Cached double value corresponding to this decimal number.
<span class="lineNum">     473 </span>            :      * This is an optimization for the formatting implementation, which may
<span class="lineNum">     474 </span>            :      * ask for the double value multiple times.
<span class="lineNum">     475 </span>            :      */
<span class="lineNum">     476 </span>            :     union DoubleOrInt64 {
<span class="lineNum">     477 </span>            :       double        fDouble;
<span class="lineNum">     478 </span>            :       int64_t       fInt64;
<span class="lineNum">     479 </span>            :     } fUnion;
<span class="lineNum">     480 </span>            :     enum EHave {
<span class="lineNum">     481 </span>            :       kNone=0,
<span class="lineNum">     482 </span>            :       kDouble
<span class="lineNum">     483 </span>            :     } fHave;
<span class="lineNum">     484 </span>            : 
<span class="lineNum">     485 </span>            : 
<span class="lineNum">     486 </span>            : 
<span class="lineNum">     487 </span>            :     UBool shouldRoundUp(int32_t maximumDigits) const;
<span class="lineNum">     488 </span>            : 
<span class="lineNum">     489 </span>            :  public:
<span class="lineNum">     490 </span>            : 
<span class="lineNum">     491 </span>            : #if U_OVERRIDE_CXX_ALLOCATION
<span class="lineNum">     492 </span>            :     using UMemory::operator new;
<span class="lineNum">     493 </span>            :     using UMemory::operator delete;
<span class="lineNum">     494 </span>            : #else
<span class="lineNum">     495 </span>            :     static inline void * U_EXPORT2 operator new(size_t size) U_NO_THROW { return ::operator new(size); };
<span class="lineNum">     496 </span>            :     static inline void U_EXPORT2 operator delete(void *ptr )  U_NO_THROW { ::operator delete(ptr); };
<span class="lineNum">     497 </span>            : #endif
<span class="lineNum">     498 </span>            : 
<span class="lineNum">     499 </span>            :     static double U_EXPORT2 decimalStrToDouble(char *decstr, char **end);
<span class="lineNum">     500 </span>            : 
<span class="lineNum">     501 </span>            :     /**
<span class="lineNum">     502 </span>            :      * Placement new for stack usage
<a name="503"><span class="lineNum">     503 </span>            :      * @internal</a>
<span class="lineNum">     504 </span>            :      */
<span class="lineNum">     505 </span><span class="lineNoCov">          0 :     static inline void * U_EXPORT2 operator new(size_t /*size*/, void * onStack, EStackMode  /*mode*/) U_NO_THROW { return onStack; }</span>
<span class="lineNum">     506 </span>            : 
<span class="lineNum">     507 </span>            :     /**
<span class="lineNum">     508 </span>            :      * Placement delete for stack usage
<span class="lineNum">     509 </span>            :      * @internal
<span class="lineNum">     510 </span>            :      */
<span class="lineNum">     511 </span>            :     static inline void U_EXPORT2 operator delete(void * /*ptr*/, void * /*onStack*/, EStackMode /*mode*/)  U_NO_THROW {}
<a name="512"><span class="lineNum">     512 </span>            : </a>
<span class="lineNum">     513 </span>            :  private:
<span class="lineNum">     514 </span><span class="lineNoCov">          0 :     inline void internalSetDouble(double d) {</span>
<span class="lineNum">     515 </span><span class="lineNoCov">          0 :       fHave = kDouble;</span>
<a name="516"><span class="lineNum">     516 </span><span class="lineNoCov">          0 :       fUnion.fDouble=d;</span></a>
<span class="lineNum">     517 </span><span class="lineNoCov">          0 :     }</span>
<span class="lineNum">     518 </span><span class="lineNoCov">          0 :     inline void internalClear() {</span>
<span class="lineNum">     519 </span><span class="lineNoCov">          0 :       fHave = kNone;</span>
<span class="lineNum">     520 </span><span class="lineNoCov">          0 :     }</span>
<span class="lineNum">     521 </span>            : };
<span class="lineNum">     522 </span>            : 
<span class="lineNum">     523 </span>            : 
<span class="lineNum">     524 </span>            : U_NAMESPACE_END
<span class="lineNum">     525 </span>            : 
<span class="lineNum">     526 </span>            : #endif // #if !UCONFIG_NO_FORMATTING
<span class="lineNum">     527 </span>            : #endif // _DIGITLST
<span class="lineNum">     528 </span>            : 
<span class="lineNum">     529 </span>            : //eof
</pre>
      </td>
    </tr>
  </table>
  <br>

  <table width="100%" border=0 cellspacing=0 cellpadding=0>
    <tr><td class="ruler"><img src="../../../../glass.png" width=3 height=3 alt=""></td></tr>
    <tr><td class="versionInfo">Generated by: <a href="http://ltp.sourceforge.net/coverage/lcov.php" target="_parent">LCOV version 1.13</a></td></tr>
  </table>
  <br>

</body>
</html>
